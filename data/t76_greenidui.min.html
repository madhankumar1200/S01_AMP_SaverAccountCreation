
/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports==="object"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){if($.support.cors||!$.ajaxTransport||!window.XDomainRequest){return}var httpRegEx=/^https?:\/\//i;var getOrPostRegEx=/^get|post$/i;var sameSchemeRegEx=new RegExp("^"+location.protocol,"i");$.ajaxTransport("* text html xml json",function(options,userOptions,jqXHR){if(!options.crossDomain||!options.async||!getOrPostRegEx.test(options.type)||!httpRegEx.test(options.url)||!sameSchemeRegEx.test(options.url)){return}var xdr=null;return{send:function(headers,complete){var postData="";var userType=(userOptions.dataType||"").toLowerCase();xdr=new XDomainRequest;if(/^\d+$/.test(userOptions.timeout)){xdr.timeout=userOptions.timeout}xdr.ontimeout=function(){complete(500,"timeout")};xdr.onload=function(){var allResponseHeaders="Content-Length: "+xdr.responseText.length+"\r\nContent-Type: "+xdr.contentType;var status={code:200,message:"success"};var responses={text:xdr.responseText};try{if(userType==="html"||/text\/html/i.test(xdr.contentType)){responses.html=xdr.responseText}else if(userType==="json"||userType!=="text"&&/\/json/i.test(xdr.contentType)){try{responses.json=$.parseJSON(xdr.responseText)}catch(e){status.code=500;status.message="parseerror"}}else if(userType==="xml"||userType!=="text"&&/\/xml/i.test(xdr.contentType)){var doc=new ActiveXObject("Microsoft.XMLDOM");doc.async=false;try{doc.loadXML(xdr.responseText)}catch(e){doc=undefined}if(!doc||!doc.documentElement||doc.getElementsByTagName("parsererror").length){status.code=500;status.message="parseerror";throw"Invalid XML: "+xdr.responseText}responses.xml=doc}}catch(parseMessage){throw parseMessage}finally{complete(status.code,status.message,responses,allResponseHeaders)}};xdr.onprogress=function(){};xdr.onerror=function(){complete(500,"error",{text:xdr.responseText})};if(userOptions.data){postData=$.type(userOptions.data)==="string"?userOptions.data:$.param(userOptions.data)}xdr.open(options.type,options.url);xdr.send(postData)},abort:function(){if(xdr){xdr.abort()}}}})});
if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.2.0";Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.hasClass("alert")?$this:$this.parent()}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(150):removeElement()};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery);+function($){"use strict";var Modal=function(element,options){this.options=options;this.$body=$(document.body);this.$element=$(element);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};Modal.VERSION="3.2.0";Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.$body.addClass("greenid-modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="greenid-modal"]',$.proxy(this.hide,this));this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body)}that.$element.show().scrollTop(0);if(transition){that.$element[0].offsetWidth}that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):that.$element.trigger("focus").trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.$body.removeClass("greenid-modal-open");this.resetScrollbar();this.escape();$(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal")}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="greenid-modal-backdrop '+animate+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(150):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop();callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(150):callbackRemove()}else if(callback){callback()}};Modal.prototype.checkScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return;this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar()};Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);if(this.scrollbarWidth)this.$body.css("padding-right",bodyPad+this.scrollbarWidth)};Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure";this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;this.$body[0].removeChild(scrollDiv);return scrollbarWidth};function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})}var old=$.fn.modal;$.fn.modal=Plugin;$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle="greenid-modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.one("show.bs.modal",function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})});Plugin.call($target,option,this)})}(jQuery);+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",element,options)};Tooltip.VERSION="3.2.0";Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this;var $tip=this.tip();var tipId=this.getUID(this.type);this.setContent();$tip.attr("id",tipId);this.$element.attr("aria-describedby",tipId);if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var $parent=this.$element.parent();var parentDim=this.getPosition($parent);placement=placement=="bottom"&&pos.top+pos.height+actualHeight-parentDim.scroll>parentDim.height?"top":placement=="top"&&pos.top-parentDim.scroll-actualHeight<0?"bottom":placement=="right"&&pos.right+actualWidth>parentDim.width?"left":placement=="left"&&pos.left-actualWidth<parentDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){that.$element.trigger("shown.bs."+that.type);that.hoverState=null};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(150):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top=offset.top+marginTop;offset.left=offset.left+marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight}var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left)offset.left+=delta.left;else offset.top+=delta.top;var arrowDelta=delta.left?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight;var arrowPosition=delta.left?"left":"top";var arrowOffsetPosition=delta.left?"offsetWidth":"offsetHeight";$tip.offset(offset);this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],arrowPosition)};Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(){var that=this;var $tip=this.tip();var e=$.Event("hide.bs."+this.type);this.$element.removeAttr("aria-describedby");function complete(){if(that.hoverState!="in")$tip.detach();that.$element.trigger("hidden.bs."+that.type)}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(150):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0];var isBody=el.tagName=="BODY";return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():null,{scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop(),width:isBody?$(window).width():$element.outerWidth(),height:isBody?$(window).height():$element.outerHeight()},isBody?{top:0,left:0}:$element.offset())};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0;var viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll;var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding;var rightEdgeOffset=pos.left+viewportPadding+actualWidth;if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.width){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}return delta};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.getUID=function(prefix){do{prefix+=~~(Math.random()*1e6)}while(document.getElementById(prefix));return prefix};Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self)}}self.tip().hasClass("in")?self.leave(self):self.enter(self)};Tooltip.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&option=="destroy")return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.tooltip;$.fn.tooltip=Plugin;$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery);+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.7";Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content").children().detach().end()[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.popover;$.fn.popover=Plugin;$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery);+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="greenid-collapse"][href="#'+element.id+'"],'+'[data-toggle="greenid-collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.5";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="greenid-collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api",'[data-toggle="greenid-collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);+function($){"use strict";var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.7";function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;if(e&&e.type=="click"&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget))})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find(".dropdown-menu"+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery);
(function($){var methods={init:function(options){return this.each(function(){var $this=$(this);$this.data("uploadifive",{inputs:{},inputCount:0,fileID:0,queue:{count:0,selected:0,replaced:0,errors:0,queued:0,cancelled:0},uploads:{current:0,attempts:0,successful:0,errors:0,count:0}});var $data=$this.data("uploadifive");var settings=$data.settings=$.extend({auto:true,buttonClass:false,buttonText:"Select Files",checkScript:false,dnd:true,dropTarget:false,fileObjName:"Filedata",fileSizeLimit:0,fileType:false,formData:{},height:30,itemTemplate:false,method:"post",multi:true,overrideEvents:[],queueID:false,queueSizeLimit:0,removeCompleted:false,simUploadLimit:0,truncateLength:0,uploadLimit:0,uploadScript:"uploadifive.php",width:100},options);if(isNaN(settings.fileSizeLimit)){var fileSizeLimitBytes=parseInt(settings.fileSizeLimit)*1.024;if(settings.fileSizeLimit.indexOf("KB")>-1){settings.fileSizeLimit=fileSizeLimitBytes*1e3}else if(settings.fileSizeLimit.indexOf("MB")>-1){settings.fileSizeLimit=fileSizeLimitBytes*1e6}else if(settings.fileSizeLimit.indexOf("GB")>-1){settings.fileSizeLimit=fileSizeLimitBytes*1e9}}else{settings.fileSizeLimit=settings.fileSizeLimit*1024}$data.inputTemplate=$('<input type="file">').css({"font-size":settings.height+"px",opacity:0,position:"absolute",right:"-3px",top:"-3px","z-index":999});$data.createInput=function(){var input=$data.inputTemplate.clone();var inputName=input.name="input"+$data.inputCount++;if(settings.multi){input.attr("multiple",true)}if(settings.fileType){input.attr("accept",settings.fileType)}input.bind("change",function(){$data.queue.selected=0;$data.queue.replaced=0;$data.queue.errors=0;$data.queue.queued=0;var limit=this.files.length;$data.queue.selected=limit;if($data.queue.count+limit>settings.queueSizeLimit&&settings.queueSizeLimit!==0){if($.inArray("onError",settings.overrideEvents)<0){alert("The maximum number of queue items has been reached ("+settings.queueSizeLimit+").  Please select fewer files.")}if(typeof settings.onError==="function"){settings.onError.call($this,"QUEUE_LIMIT_EXCEEDED")}}else{for(var n=0;n<limit;n++){file=this.files[n];$data.addQueueItem(file)}$data.inputs[inputName]=this;$data.createInput()}if(settings.auto){methods.upload.call($this)}if(typeof settings.onSelect==="function"){settings.onSelect.call($this,$data.queue)}});if($data.currentInput){$data.currentInput.hide()}$data.button.append(input);$data.currentInput=input};$data.destroyInput=function(key){$($data.inputs[key]).remove();delete $data.inputs[key];$data.inputCount--};$data.drop=function(e){$data.queue.selected=0;$data.queue.replaced=0;$data.queue.errors=0;$data.queue.queued=0;var fileData=e.dataTransfer;var inputName=fileData.name="input"+$data.inputCount++;var limit=fileData.files.length;$data.queue.selected=limit;if($data.queue.count+limit>settings.queueSizeLimit&&settings.queueSizeLimit!==0){if($.inArray("onError",settings.overrideEvents)<0){alert("The maximum number of queue items has been reached ("+settings.queueSizeLimit+").  Please select fewer files.")}if(typeof settings.onError==="function"){settings.onError.call($this,"QUEUE_LIMIT_EXCEEDED")}}else{for(var n=0;n<limit;n++){file=fileData.files[n];$data.addQueueItem(file)}$data.inputs[inputName]=fileData}if(settings.auto){methods.upload.call($this)}if(typeof settings.onDrop==="function"){settings.onDrop.call($this,fileData.files,fileData.files.length)}e.preventDefault();e.stopPropagation()};$data.fileExistsInQueue=function(file){for(var key in $data.inputs){input=$data.inputs[key];limit=input.files.length;for(var n=0;n<limit;n++){existingFile=input.files[n];if(existingFile.name==file.name&&!existingFile.complete){return true}}}return false};$data.removeExistingFile=function(file){for(var key in $data.inputs){input=$data.inputs[key];limit=input.files.length;for(var n=0;n<limit;n++){existingFile=input.files[n];if(existingFile.name==file.name&&!existingFile.complete){$data.queue.replaced++;methods.cancel.call($this,existingFile,true)}}}};if(settings.itemTemplate==false){$data.queueItem=$('<div class="uploadifive-queue-item">                        <a class="close" href="#">X</a>                        <div><span class="filename"></span><span class="fileinfo"></span></div>                        <div class="progress">                            <div class="progress-bar"></div>                        </div>                    </div>')}else{$data.queueItem=$(settings.itemTemplate)}$data.addQueueItem=function(file){if(typeof settings.addQueueItemHook==="function"){var continueAddItem=settings.addQueueItemHook.call($this,file);if(!continueAddItem){return}}if($.inArray("onAddQueueItem",settings.overrideEvents)<0){$data.removeExistingFile(file);file.queueItem=$data.queueItem.clone();file.queueItem.attr("id",settings.id+"-file-"+$data.fileID++);file.queueItem.find(".close").bind("click",function(){methods.cancel.call($this,file);return false});var fileName=file.name;if(fileName.length>settings.truncateLength&&settings.truncateLength!=0){fileName=fileName.substring(0,settings.truncateLength)+"..."}file.queueItem.find(".filename").html(fileName);file.queueItem.data("file",file);$data.queueEl.append(file.queueItem)}if(typeof settings.onAddQueueItem==="function"){settings.onAddQueueItem.call($this,file)}if(file.size>settings.fileSizeLimit&&settings.fileSizeLimit!=0){$data.error("FILE_SIZE_LIMIT_EXCEEDED",file)}else{$data.queue.queued++;$data.queue.count++}};$data.removeQueueItem=function(file,instant,delay){if(!delay)delay=0;var fadeTime=instant?0:500;if(file.queueItem){if(file.queueItem.find(".fileinfo").html()!=" - Completed"){file.queueItem.find(".fileinfo").html(" - Cancelled")}file.queueItem.find(".progress-bar").width(0);file.queueItem.delay(delay).fadeOut(fadeTime,function(){$(this).remove()});delete file.queueItem;$data.queue.count--}};$data.filesToUpload=function(){var filesToUpload=0;for(var key in $data.inputs){input=$data.inputs[key];limit=input.files.length;for(var n=0;n<limit;n++){file=input.files[n];if(!file.skip&&!file.complete){filesToUpload++}}}return filesToUpload};$data.checkExists=function(file){if($.inArray("onCheck",settings.overrideEvents)<0){$.ajaxSetup({async:false});var checkData=$.extend(settings.formData,{filename:file.name});$.post(settings.checkScript,checkData,function(fileExists){file.exists=parseInt(fileExists)});if(file.exists){if(!confirm("A file named "+file.name+" already exists in the upload folder.\nWould you like to replace it?")){methods.cancel.call($this,file);return true}}}if(typeof settings.onCheck==="function"){settings.onCheck.call($this,file,file.exists)}return false};$data.uploadFile=function(file,uploadAll){if(!file.skip&&!file.complete&&!file.uploading){file.uploading=true;$data.uploads.current++;$data.uploads.attempted++;xhr=file.xhr=new XMLHttpRequest;if(typeof FormData==="function"||typeof FormData==="object"){var formData=new FormData;formData.append(settings.fileObjName,file);for(i in settings.formData){formData.append(i,settings.formData[i])}xhr.open(settings.method,settings.uploadScript,true);xhr.upload.addEventListener("progress",function(e){if(e.lengthComputable){$data.progress(e,file)}},false);xhr.addEventListener("load",function(e){if(this.readyState==4){file.uploading=false;if(this.status==200){if(file.xhr.responseText!=="Invalid file type."){$data.uploadComplete(e,file,uploadAll)}else{$data.error(file.xhr.responseText,file,uploadAll)}}else if(this.status==404){$data.error("404_FILE_NOT_FOUND",file,uploadAll)}else if(this.status==403){$data.error("403_FORBIDDEN",file,uploadAll)}else{$data.error("Unknown Error",file,uploadAll)}}});xhr.send(formData)}else{var reader=new FileReader;reader.onload=function(e){var boundary="-------------------------"+(new Date).getTime(),dashes="--",eol="\r\n",binFile="";binFile+=dashes+boundary+eol;binFile+='Content-Disposition: form-data; name="'+settings.fileObjName+'"';if(file.name){binFile+='; filename="'+file.name+'"'}binFile+=eol;binFile+="Content-Type: application/octet-stream"+eol+eol;binFile+=e.target.result+eol;for(key in settings.formData){binFile+=dashes+boundary+eol;binFile+='Content-Disposition: form-data; name="'+key+'"'+eol+eol;binFile+=settings.formData[key]+eol}binFile+=dashes+boundary+dashes+eol;xhr.upload.addEventListener("progress",function(e){$data.progress(e,file)},false);xhr.addEventListener("load",function(e){file.uploading=false;var status=this.status;if(status==404){$data.error("404_FILE_NOT_FOUND",file,uploadAll)}else{if(file.xhr.responseText!="Invalid file type."){$data.uploadComplete(e,file,uploadAll)}else{$data.error(file.xhr.responseText,file,uploadAll)}}},false);var url=settings.uploadScript;if(settings.method=="get"){var params=$(settings.formData).param();url+=params}xhr.open(settings.method,settings.uploadScript,true);xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+boundary);if(typeof settings.onUploadFile==="function"){settings.onUploadFile.call($this,file)}xhr.sendAsBinary(binFile)};reader.readAsBinaryString(file)}}};$data.progress=function(e,file){if($.inArray("onProgress",settings.overrideEvents)<0){if(e.lengthComputable){var percent=Math.round(e.loaded/e.total*100)}file.queueItem.find(".fileinfo").html(" - "+percent+"%");file.queueItem.find(".progress-bar").css("width",percent+"%")}if(typeof settings.onProgress==="function"){settings.onProgress.call($this,file,e)}};$data.error=function(errorType,file,uploadAll){if($.inArray("onError",settings.overrideEvents)<0){switch(errorType){case"404_FILE_NOT_FOUND":errorMsg="404 Error";break;case"403_FORBIDDEN":errorMsg="403 Forbidden";break;case"FORBIDDEN_FILE_TYPE":errorMsg="Forbidden File Type";break;case"FILE_SIZE_LIMIT_EXCEEDED":errorMsg="File Too Large";break;default:errorMsg="Unknown Error";break}file.queueItem.addClass("error").find(".fileinfo").html(" - "+errorMsg);file.queueItem.find(".progress").remove()}if(typeof settings.onError==="function"){settings.onError.call($this,errorType,file)}file.skip=true;if(errorType=="404_FILE_NOT_FOUND"){$data.uploads.errors++}else{$data.queue.errors++}if(uploadAll){methods.upload.call($this,null,true)}};$data.uploadComplete=function(e,file,uploadAll){if($.inArray("onUploadComplete",settings.overrideEvents)<0){file.queueItem.find(".progress-bar").css("width","100%");file.queueItem.find(".fileinfo").html(" - Completed");file.queueItem.find(".progress").slideUp(250);file.queueItem.addClass("complete")}if(typeof settings.onUploadComplete==="function"){settings.onUploadComplete.call($this,file,file.xhr.responseText)}if(settings.removeCompleted){setTimeout(function(){methods.cancel.call($this,file)},3e3)}file.complete=true;$data.uploads.successful++;$data.uploads.count++;$data.uploads.current--;delete file.xhr;if(uploadAll){methods.upload.call($this,null,true)}};$data.queueComplete=function(){if(typeof settings.onQueueComplete==="function"){settings.onQueueComplete.call($this,$data.uploads)}};if(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData)){settings.id="uploadifive-"+$this.attr("id");$data.button=$('<div id="'+settings.id+'" class="uploadifive-button">'+settings.buttonText+"</div>");if(settings.buttonClass)$data.button.addClass(settings.buttonClass);$data.button.css({height:settings.height,"line-height":settings.height+"px",overflow:"hidden",position:"relative","text-align":"center",width:settings.width});$this.before($data.button).appendTo($data.button).hide();$data.createInput.call($this);if(!settings.queueID){settings.queueID=settings.id+"-queue";$data.queueEl=$('<div id="'+settings.queueID+'" class="uploadifive-queue" />');$data.button.after($data.queueEl)}else{$data.queueEl=$("#"+settings.queueID)}if(settings.dnd){var $dropTarget=settings.dropTarget?$(settings.dropTarget):$data.queueEl.get(0);$dropTarget.addEventListener("dragleave",function(e){e.preventDefault();e.stopPropagation()},false);$dropTarget.addEventListener("dragenter",function(e){e.preventDefault();e.stopPropagation()},false);$dropTarget.addEventListener("dragover",function(e){e.preventDefault();e.stopPropagation()},false);$dropTarget.addEventListener("drop",$data.drop,false)}if(!XMLHttpRequest.prototype.sendAsBinary){XMLHttpRequest.prototype.sendAsBinary=function(datastr){function byteValue(x){return x.charCodeAt(0)&255}var ords=Array.prototype.map.call(datastr,byteValue);var ui8a=new Uint8Array(ords);this.send(ui8a.buffer)}}if(typeof settings.onInit==="function"){settings.onInit.call($this)}}else{if(typeof settings.onFallback==="function"){settings.onFallback.call($this)}return false}})},debug:function(){return this.each(function(){console.log($(this).data("uploadifive"))})},clearQueue:function(){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;for(var key in $data.inputs){input=$data.inputs[key];limit=input.files.length;for(i=0;i<limit;i++){file=input.files[i];methods.cancel.call($this,file)}}if(typeof settings.onClearQueue==="function"){settings.onClearQueue.call($this,$("#"+$data.settings.queueID))}})},cancel:function(file,fast){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;if(typeof file==="string"){if(!isNaN(file)){fileID="uploadifive-"+$(this).attr("id")+"-file-"+file}file=$("#"+fileID).data("file")}file.skip=true;$data.filesCancelled++;if(file.uploading){$data.uploads.current--;file.uploading=false;file.xhr.abort();delete file.xhr;methods.upload.call($this)}if($.inArray("onCancel",settings.overrideEvents)<0){$data.removeQueueItem(file,fast)}if(typeof settings.onCancel==="function"){settings.onCancel.call($this,file)}})},upload:function(file,keepVars){this.each(function(){var $this=$(this);if($this){var $data=$this.data("uploadifive");if($data){var settings=$data.settings;if(file){$data.uploadFile.call($this,file)}else{if($data.uploads.count+$data.uploads.current<settings.uploadLimit||settings.uploadLimit==0){if(!keepVars){$data.uploads.attempted=0;$data.uploads.successsful=0;$data.uploads.errors=0;var filesToUpload=$data.filesToUpload();if(typeof settings.onUpload==="function"){settings.onUpload.call($this,filesToUpload)}}$("#"+settings.queueID).find(".uploadifive-queue-item").not(".error, .complete").each(function(){_file=$(this).data("file");if($data.uploads.current>=settings.simUploadLimit&&settings.simUploadLimit!==0||$data.uploads.current>=settings.uploadLimit&&settings.uploadLimit!==0||$data.uploads.count>=settings.uploadLimit&&settings.uploadLimit!==0){return false}if(settings.checkScript){_file.checking=true;skipFile=$data.checkExists(_file);_file.checking=false;if(!skipFile){$data.uploadFile(_file,true)}}else{$data.uploadFile(_file,true)}});if($("#"+settings.queueID).find(".uploadifive-queue-item").not(".error, .complete").length==0){$data.queueComplete()}}else{if($data.uploads.current==0){if($.inArray("onError",settings.overrideEvents)<0){if($data.filesToUpload()>0&&settings.uploadLimit!=0){alert("The maximum upload limit has been reached.")}}if(typeof settings.onError==="function"){settings.onError.call($this,"UPLOAD_LIMIT_EXCEEDED",$data.filesToUpload())}}}}}}})},destroy:function(){this.each(function(){var $this=$(this),$data=$this.data("uploadifive"),settings=$data.settings;methods.clearQueue.call($this);if(!settings.queueID)$("#"+settings.queueID).remove();$this.siblings("input").remove();$this.show().insertBefore($data.button);$data.button.remove();if(typeof settings.onDestroy==="function"){settings.onDestroy.call($this)}})}};$.fn.uploadifive=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("The method "+method+" does not exist in $.uploadify")}}})(jQuery);
(function($){$.fn.ddslick=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exists.")}};var methods={},defaults={data:[],keepJSONItemsOnTop:false,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:true,imagePosition:"left",showSelectedHTML:true,clickOffToClose:true,onSelected:function(){}},ddSelectHtml='<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected form-control" tabindex="0" aria-label="Select your card type"></a><span class="dd-pointer dd-pointer-down"></span></div>',ddOptionsHtml='<ul class="dd-options"></ul>',ddslickCSS='<style id="css-ddslick" type="text/css">'+".dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}"+".dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }"+".dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}"+".dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}"+".dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }"+".dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}"+".dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}"+".dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }"+".dd-options > li:last-child > .dd-option{ border-bottom:none;}"+".dd-option:hover{ background:#f3f3f3; color:#000;}"+".dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }"+".dd-option-selected { background:#f6f6f6; }"+".dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}"+".dd-image-right { float:right; margin-right:15px; margin-left:5px;}"+".dd-container{ position:relative;} .dd-selected-text { font-weight:bold}</style>";if($("#css-ddslick").length<=0){$(ddslickCSS).appendTo("head")}methods.init=function(options){var options=$.extend({},defaults,options);return this.each(function(){var obj=$(this),data=obj.data("ddslick");if(!data){var ddSelect=[],ddJson=options.data;obj.find("option").each(function(){var $this=$(this),thisData=$this.data();ddSelect.push({text:$.trim($this.text()),value:$this.val(),selected:$this.is(":selected"),description:thisData.description,imageSrc:thisData.imagesrc})});if(options.keepJSONItemsOnTop)$.merge(options.data,ddSelect);else options.data=$.merge(ddSelect,options.data);var original=obj,placeholder=$('<div id="'+obj.attr("id")+'"></div>');obj.replaceWith(placeholder);obj=placeholder;obj.addClass("dd-container").append(ddSelectHtml).append(ddOptionsHtml);var ddSelect=obj.find(".dd-select"),ddOptions=obj.find(".dd-options");ddOptions.css({width:options.width});ddSelect.css({width:options.width,background:options.background});obj.css({width:options.width});if(options.height!=null)ddOptions.css({height:options.height,overflow:"auto"});$.each(options.data,function(index,item){if(item.selected)options.defaultSelectedIndex=index;ddOptions.append("<li>"+'<a class="dd-option">'+(item.value?' <input class="dd-option-value" type="hidden" value="'+item.value+'" />':"")+(item.imageSrc?' <img class="dd-option-image'+(options.imagePosition=="right"?" dd-image-right":"")+'" src="'+item.imageSrc+'" />':"")+(item.text?' <label class="dd-option-text">'+item.text+"</label>":"")+(item.description?' <small class="dd-option-description dd-desc">'+item.description+"</small>":"")+"</a>"+"</li>")});var pluginData={settings:options,original:original,selectedIndex:-1,selectedItem:null,selectedData:null};obj.data("ddslick",pluginData);if(options.selectText.length>0&&options.defaultSelectedIndex==null){obj.find(".dd-selected").html(options.selectText)}else{var index=options.defaultSelectedIndex!=null&&options.defaultSelectedIndex>=0&&options.defaultSelectedIndex<options.data.length?options.defaultSelectedIndex:0;selectIndex(obj,index)}obj.find(".dd-select").on("click.ddslick",function(){open(obj)});obj.find(".dd-selected.form-control").on("keypress",function(){open(obj);$(".dd-options li a").attr("tabindex","0");setTimeout(function(){$("ul.dd-options li:first-of-type a").focus()},500)});obj.find(".dd-option").on("click.ddslick keypress",function(){selectIndex(obj,$(this).closest("li").index())});if(options.clickOffToClose){ddOptions.addClass("dd-click-off-close");obj.on("click.ddslick",function(e){e.stopPropagation()});$("body").on("click",function(){$(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")});$(".dd-option").on("keypress",function(){setTimeout(function(){$(".dd-selected.form-control").focus()},500)})}}})};methods.select=function(options){return this.each(function(){if(options.index)selectIndex($(this),options.index)})};methods.open=function(){return this.each(function(){var $this=$(this),pluginData=$this.data("ddslick");if(pluginData)open($this)})};methods.close=function(){return this.each(function(){var $this=$(this),pluginData=$this.data("ddslick");if(pluginData)close($this)})};methods.destroy=function(){return this.each(function(){var $this=$(this),pluginData=$this.data("ddslick");if(pluginData){var originalElement=pluginData.original;$this.removeData("ddslick").unbind(".ddslick").replaceWith(originalElement)}})};function selectIndex(obj,index){var pluginData=obj.data("ddslick");var ddSelected=obj.find(".dd-selected"),ddSelectedValue=ddSelected.siblings(".dd-selected-value"),ddOptions=obj.find(".dd-options"),ddPointer=ddSelected.siblings(".dd-pointer"),selectedOption=obj.find(".dd-option").eq(index),selectedLiItem=selectedOption.closest("li"),settings=pluginData.settings,selectedData=pluginData.settings.data[index];obj.find(".dd-option").removeClass("dd-option-selected");selectedOption.addClass("dd-option-selected");pluginData.selectedIndex=index;pluginData.selectedItem=selectedLiItem;pluginData.selectedData=selectedData;if(settings.showSelectedHTML){ddSelected.html((selectedData.imageSrc?'<img class="dd-selected-image'+(settings.imagePosition=="right"?" dd-image-right":"")+'" src="'+selectedData.imageSrc+'" />':"")+(selectedData.text?'<label class="dd-selected-text">'+selectedData.text+"</label>":"")+(selectedData.description?'<small class="dd-selected-description dd-desc'+(settings.truncateDescription?" dd-selected-description-truncated":"")+'" >'+selectedData.description+"</small>":""))}else ddSelected.html(selectedData.text);ddSelectedValue.val(selectedData.value);pluginData.original.val(selectedData.value);obj.data("ddslick",pluginData);close(obj);adjustSelectedHeight(obj);if(typeof settings.onSelected=="function"){settings.onSelected.call(this,pluginData)}}function open(obj){var $this=obj.find(".dd-select"),ddOptions=$this.siblings(".dd-options"),ddPointer=$this.find(".dd-pointer"),wasOpen=ddOptions.is(":visible");$(".dd-click-off-close").not(ddOptions).slideUp(50);$(".dd-pointer").removeClass("dd-pointer-up");if(wasOpen){ddOptions.slideUp("fast");ddPointer.removeClass("dd-pointer-up")}else{ddOptions.slideDown("fast");ddPointer.addClass("dd-pointer-up")}adjustOptionsHeight(obj)}function close(obj){obj.find(".dd-options").slideUp(50);obj.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function adjustSelectedHeight(obj){var lSHeight=obj.find(".dd-select").css("height");var descriptionSelected=obj.find(".dd-selected-description");var imgSelected=obj.find(".dd-selected-image");if(descriptionSelected.length<=0&&imgSelected.length>0){obj.find(".dd-selected-text").css("lineHeight",lSHeight)}}function adjustOptionsHeight(obj){obj.find(".dd-option").each(function(){var $this=$(this);var lOHeight=$this.css("height");var descriptionOption=$this.find(".dd-option-description");var imgOption=obj.find(".dd-option-image");if(descriptionOption.length<=0&&imgOption.length>0){$this.find(".dd-option-text").css("lineHeight",lOHeight)}})}})(jQuery);
/*!
* jquery.inputmask.bundle.js
* https://github.com/RobinHerbots/Inputmask
* Copyright (c) 2010 - 2019 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 4.0.9
*/

(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)})([function(module,exports,__webpack_require__){"use strict";__webpack_require__(1);__webpack_require__(6);__webpack_require__(7);var _inputmask=__webpack_require__(2);var _inputmask2=_interopRequireDefault(_inputmask);var _inputmask3=__webpack_require__(3);var _inputmask4=_interopRequireDefault(_inputmask3);var _jquery=__webpack_require__(4);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(_inputmask4.default===_jquery2.default){__webpack_require__(8)}window.Inputmask=_inputmask2.default},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(function(Inputmask){Inputmask.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});Inputmask.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)//.*",autoUnmask:false},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function validator(chrs,maskset,pos,strict,opts){if(pos-1>-1&&maskset.buffer[pos-1]!=="."){chrs=maskset.buffer[pos-1]+chrs;if(pos-2>-1&&maskset.buffer[pos-2]!=="."){chrs=maskset.buffer[pos-2]+chrs}else chrs="0"+chrs}else chrs="00"+chrs;return new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(chrs)}}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:false,casing:"lower",onBeforePaste:function onBeforePaste(pastedValue,opts){pastedValue=pastedValue.toLowerCase();return pastedValue.replace("mailto:","")},definitions:{"*":{validator:"[0-9\uff11-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:true,autoUnmask:true}});return Inputmask})},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(3),__webpack_require__(5)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(function($,window,undefined){var document=window.document,ua=navigator.userAgent,ie=ua.indexOf("MSIE ")>0||ua.indexOf("Trident/")>0,mobile=isInputEventSupported("touchstart"),iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile;function Inputmask(alias,options,internal){if(!(this instanceof Inputmask)){return new Inputmask(alias,options,internal)}this.el=undefined;this.events={};this.maskset=undefined;this.refreshValue=false;if(internal!==true){if($.isPlainObject(alias)){options=alias}else{options=options||{};if(alias)options.alias=alias}this.opts=$.extend(true,{},this.defaults,options);this.noMasksCache=options&&options.definitions!==undefined;this.userOptions=options||{};this.isRTL=this.opts.numericInput;resolveAlias(this.opts.alias,options,this.opts)}}Inputmask.prototype={dataAttribute:"data-inputmask",defaults:{placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:false,autoUnmask:false,removeMaskOnSubmit:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function onBeforePaste(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(this,pastedValue,opts):pastedValue},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:true,showMaskOnHover:true,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",numericInput:false,rightAlign:false,undoOnEscape:true,radixPoint:"",_radixDance:false,groupSeparator:"",keepStatic:null,positionCaretOnTab:true,tabThrough:false,supportsInputType:["text","tel","url","password","search"],ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:undefined,jitMasking:false,nullable:true,inputEventOnly:false,noValuePatching:false,positionCaretOnClick:"lvp",casing:null,inputmode:"verbatim",colorMask:false,disablePredictiveText:false,importDataAttributes:true,shiftPositions:true},definitions:{9:{validator:"[0-9\uff11-\uff19]",definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",definitionSymbol:"*"},"*":{validator:"[0-9\uff11-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]"}},aliases:{},masksCache:{},mask:function mask(elems){var that=this;function importAttributeOptions(npt,opts,userOptions,dataAttribute){if(opts.importDataAttributes===true){var attrOptions=npt.getAttribute(dataAttribute),option,dataoptions,optionData,p;var importOption=function importOption(option,optionData){optionData=optionData!==undefined?optionData:npt.getAttribute(dataAttribute+"-"+option);if(optionData!==null){if(typeof optionData==="string"){if(option.indexOf("on")===0)optionData=window[optionData];else if(optionData==="false")optionData=false;else if(optionData==="true")optionData=true}userOptions[option]=optionData}};if(attrOptions&&attrOptions!==""){attrOptions=attrOptions.replace(/'/g,'"');dataoptions=JSON.parse("{"+attrOptions+"}")}if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()==="alias"){optionData=dataoptions[p];break}}}importOption("alias",optionData);if(userOptions.alias){resolveAlias(userOptions.alias,userOptions,opts)}for(option in opts){if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break}}}importOption(option,optionData)}}$.extend(true,opts,userOptions);if(npt.dir==="rtl"||opts.rightAlign){npt.style.textAlign="right"}if(npt.dir==="rtl"||opts.numericInput){npt.dir="ltr";npt.removeAttribute("dir");opts.isRTL=true}return Object.keys(userOptions).length}if(typeof elems==="string"){elems=document.getElementById(elems)||document.querySelectorAll(elems)}elems=elems.nodeName?[elems]:elems;$.each(elems,function(ndx,el){var scopedOpts=$.extend(true,{},that.opts);if(importAttributeOptions(el,scopedOpts,$.extend(true,{},that.userOptions),that.dataAttribute)){var maskset=generateMaskSet(scopedOpts,that.noMasksCache);if(maskset!==undefined){if(el.inputmask!==undefined){el.inputmask.opts.autoUnmask=true;el.inputmask.remove()}el.inputmask=new Inputmask(undefined,undefined,true);el.inputmask.opts=scopedOpts;el.inputmask.noMasksCache=that.noMasksCache;el.inputmask.userOptions=$.extend(true,{},that.userOptions);el.inputmask.isRTL=scopedOpts.isRTL||scopedOpts.numericInput;el.inputmask.el=el;el.inputmask.maskset=maskset;$.data(el,"_inputmask_opts",scopedOpts);maskScope.call(el.inputmask,{action:"mask"})}}});return elems&&elems[0]?elems[0].inputmask||this:this},option:function option(options,noremask){if(typeof options==="string"){return this.opts[options]}else if((typeof options==="undefined"?"undefined":_typeof(options))==="object"){$.extend(this.userOptions,options);if(this.el&&noremask!==true){this.mask(this.el)}return this}},unmaskedvalue:function unmaskedvalue(value){this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache);return maskScope.call(this,{action:"unmaskedvalue",value:value})},remove:function remove(){return maskScope.call(this,{action:"remove"})},getemptymask:function getemptymask(){this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache);return maskScope.call(this,{action:"getemptymask"})},hasMaskedValue:function hasMaskedValue(){return!this.opts.autoUnmask},isComplete:function isComplete(){this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache);return maskScope.call(this,{action:"isComplete"})},getmetadata:function getmetadata(){this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache);return maskScope.call(this,{action:"getmetadata"})},isValid:function isValid(value){this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache);return maskScope.call(this,{action:"isValid",value:value})},format:function format(value,metadata){this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache);return maskScope.call(this,{action:"format",value:value,metadata:metadata})},setValue:function setValue(value){if(this.el){$(this.el).trigger("setvalue",[value])}},analyseMask:function analyseMask(mask,regexMask,opts){var tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?(?:\|[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,regexTokenizer=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,escaped=false,currentToken=new MaskToken,match,m,openenings=[],maskTokens=[],openingToken,currentOpeningToken,alternator,lastMatch,groupToken;function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[];this.openGroup=isGroup||false;this.alternatorGroup=false;this.isGroup=isGroup||false;this.isOptional=isOptional||false;this.isQuantifier=isQuantifier||false;this.isAlternator=isAlternator||false;this.quantifier={min:1,max:1}}function insertTestDefinition(mtoken,element,position){position=position!==undefined?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(regexMask){if(element.indexOf("[")===0||escaped&&/\\d|\\s|\\w]/i.test(element)||element==="."){mtoken.matches.splice(position++,0,{fn:new RegExp(element,opts.casing?"i":""),optionality:false,newBlockMarker:prevMatch===undefined?"master":prevMatch.def!==element,casing:null,def:element,placeholder:undefined,nativeDef:element})}else{if(escaped)element=element[element.length-1];$.each(element.split(""),function(ndx,lmnt){prevMatch=mtoken.matches[position-1];mtoken.matches.splice(position++,0,{fn:null,optionality:false,newBlockMarker:prevMatch===undefined?"master":prevMatch.def!==lmnt&&prevMatch.fn!==null,casing:null,def:opts.staticDefinitionSymbol||lmnt,placeholder:opts.staticDefinitionSymbol!==undefined?lmnt:undefined,nativeDef:(escaped?"'":"")+lmnt})})}escaped=false}else{var maskdef=(opts.definitions?opts.definitions[element]:undefined)||Inputmask.prototype.definitions[element];if(maskdef&&!escaped){mtoken.matches.splice(position++,0,{fn:maskdef.validator?typeof maskdef.validator=="string"?new RegExp(maskdef.validator,opts.casing?"i":""):new function(){this.test=maskdef.validator}:new RegExp("."),optionality:false,newBlockMarker:prevMatch===undefined?"master":prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element})}else{mtoken.matches.splice(position++,0,{fn:null,optionality:false,newBlockMarker:prevMatch===undefined?"master":prevMatch.def!==element&&prevMatch.fn!==null,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,nativeDef:(escaped?"'":"")+element});escaped=false}}}function verifyGroupMarker(maskToken){if(maskToken&&maskToken.matches){$.each(maskToken.matches,function(ndx,token){var nextToken=maskToken.matches[ndx+1];if((nextToken===undefined||nextToken.matches===undefined||nextToken.isQuantifier===false)&&token&&token.isGroup){token.isGroup=false;if(!regexMask){insertTestDefinition(token,opts.groupmarker[0],0);if(token.openGroup!==true){insertTestDefinition(token,opts.groupmarker[1])}}}verifyGroupMarker(token)})}}function defaultCase(){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];insertTestDefinition(currentOpeningToken,m);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){if(alternator.matches[mndx].isGroup)alternator.matches[mndx].isGroup=false}if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator)}else{currentToken.matches.push(alternator)}}}else{insertTestDefinition(currentToken,m)}}function reverseTokens(maskToken){function reverseStatic(st){if(st===opts.optionalmarker[0])st=opts.optionalmarker[1];else if(st===opts.optionalmarker[1])st=opts.optionalmarker[0];else if(st===opts.groupmarker[0])st=opts.groupmarker[1];else if(st===opts.groupmarker[1])st=opts.groupmarker[0];return st}maskToken.matches=maskToken.matches.reverse();for(var match in maskToken.matches){if(maskToken.matches.hasOwnProperty(match)){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1);maskToken.matches.splice(intMatch+1,0,qt)}if(maskToken.matches[match].matches!==undefined){maskToken.matches[match]=reverseTokens(maskToken.matches[match])}else{maskToken.matches[match]=reverseStatic(maskToken.matches[match])}}}return maskToken}function groupify(matches){var groupToken=new MaskToken(true);groupToken.openGroup=false;groupToken.matches=matches;return groupToken}if(regexMask){opts.optionalmarker[0]=undefined;opts.optionalmarker[1]=undefined}while(match=regexMask?regexTokenizer.exec(mask):tokenizer.exec(mask)){m=match[0];if(regexMask){switch(m.charAt(0)){case"?":m="{0,1}";break;case"+":case"*":m="{"+m+"}";break}}if(escaped){defaultCase();continue}switch(m.charAt(0)){case"(?=":break;case"(?!":break;case"(?<=":break;case"(?<!":break;case opts.escapeChar:escaped=true;if(regexMask){defaultCase()}break;case opts.optionalmarker[1]:case opts.groupmarker[1]:openingToken=openenings.pop();openingToken.openGroup=false;if(openingToken!==undefined){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(openingToken);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=false;alternator.matches[mndx].alternatorGroup=false}if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator)}else{currentToken.matches.push(alternator)}}}else{currentToken.matches.push(openingToken)}}else defaultCase();break;case opts.optionalmarker[0]:openenings.push(new MaskToken(false,true));break;case opts.groupmarker[0]:openenings.push(new MaskToken(true));break;case opts.quantifiermarker[0]:var quantifier=new MaskToken(false,false,true);m=m.replace(/[{}]/g,"");var mqj=m.split("|"),mq=mqj[0].split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=mq.length===1?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if(mq0==="*"||mq0==="+"){mq0=mq1==="*"?0:1}quantifier.quantifier={min:mq0,max:mq1,jit:mqj[1]};var matches=openenings.length>0?openenings[openenings.length-1].matches:currentToken.matches;match=matches.pop();if(match.isAlternator){matches.push(match);matches=match.matches;var groupToken=new MaskToken(true);var tmpMatch=matches.pop();matches.push(groupToken);matches=groupToken.matches;match=tmpMatch}if(!match.isGroup){match=groupify([match])}matches.push(match);matches.push(quantifier);break;case opts.alternatormarker:var groupQuantifier=function groupQuantifier(matches){var lastMatch=matches.pop();if(lastMatch.isQuantifier){lastMatch=groupify([matches.pop(),lastMatch])}return lastMatch};if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];var subToken=currentOpeningToken.matches[currentOpeningToken.matches.length-1];if(currentOpeningToken.openGroup&&(subToken.matches===undefined||subToken.isGroup===false&&subToken.isAlternator===false)){lastMatch=openenings.pop()}else{lastMatch=groupQuantifier(currentOpeningToken.matches)}}else{lastMatch=groupQuantifier(currentToken.matches)}if(lastMatch.isAlternator){openenings.push(lastMatch)}else{if(lastMatch.alternatorGroup){alternator=openenings.pop();lastMatch.alternatorGroup=false}else{alternator=new MaskToken(false,false,false,true)}alternator.matches.push(lastMatch);openenings.push(alternator);if(lastMatch.openGroup){lastMatch.openGroup=false;var alternatorGroup=new MaskToken(true);alternatorGroup.alternatorGroup=true;openenings.push(alternatorGroup)}}break;default:defaultCase()}}while(openenings.length>0){openingToken=openenings.pop();currentToken.matches.push(openingToken)}if(currentToken.matches.length>0){verifyGroupMarker(currentToken);maskTokens.push(currentToken)}if(opts.numericInput||opts.isRTL){reverseTokens(maskTokens[0])}return maskTokens},positionColorMask:function positionColorMask(input,template){input.style.left=template.offsetLeft+"px"}};Inputmask.extendDefaults=function(options){$.extend(true,Inputmask.prototype.defaults,options)};Inputmask.extendDefinitions=function(definition){$.extend(true,Inputmask.prototype.definitions,definition)};Inputmask.extendAliases=function(alias){$.extend(true,Inputmask.prototype.aliases,alias)};Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata)};Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value)};Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value)};Inputmask.remove=function(elems){if(typeof elems==="string"){elems=document.getElementById(elems)||document.querySelectorAll(elems)}elems=elems.nodeName?[elems]:elems;$.each(elems,function(ndx,el){if(el.inputmask)el.inputmask.remove()})};Inputmask.setValue=function(elems,value){if(typeof elems==="string"){elems=document.getElementById(elems)||document.querySelectorAll(elems)}elems=elems.nodeName?[elems]:elems;$.each(elems,function(ndx,el){if(el.inputmask)el.inputmask.setValue(value);else $(el).trigger("setvalue",[value])})};Inputmask.escapeRegex=function(str){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return str.replace(new RegExp("(\\"+specials.join("|\\")+")","gim"),"\\$1")};Inputmask.keyCode={BACKSPACE:8,BACKSPACE_SAFARI:127,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SPACE:32,TAB:9,UP:38,X:88,CONTROL:17};Inputmask.dependencyLib=$;function resolveAlias(aliasStr,options,opts){var aliasDefinition=Inputmask.prototype.aliases[aliasStr];if(aliasDefinition){if(aliasDefinition.alias)resolveAlias(aliasDefinition.alias,undefined,opts);$.extend(true,opts,aliasDefinition);$.extend(true,opts,options);return true}else if(opts.mask===null){opts.mask=aliasStr}return false}function generateMaskSet(opts,nocache){function generateMask(mask,metadata,opts){var regexMask=false;if(mask===null||mask===""){regexMask=opts.regex!==null;if(regexMask){mask=opts.regex;mask=mask.replace(/^(\^)(.*)(\$)$/,"$2")}else{regexMask=true;mask=".*"}}if(mask.length===1&&opts.greedy===false&&opts.repeat!==0){opts.placeholder=""}if(opts.repeat>0||opts.repeat==="*"||opts.repeat==="+"){var repeatStart=opts.repeat==="*"?0:opts.repeat==="+"?1:opts.repeat;mask=opts.groupmarker[0]+mask+opts.groupmarker[1]+opts.quantifiermarker[0]+repeatStart+","+opts.repeat+opts.quantifiermarker[1]}var masksetDefinition,maskdefKey=regexMask?"regex_"+opts.regex:opts.numericInput?mask.split("").reverse().join(""):mask;if(Inputmask.prototype.masksCache[maskdefKey]===undefined||nocache===true){masksetDefinition={mask:mask,maskToken:Inputmask.prototype.analyseMask(mask,regexMask,opts),validPositions:{},_buffer:undefined,buffer:undefined,tests:{},excludes:{},metadata:metadata,maskLength:undefined,jitOffset:{}};if(nocache!==true){Inputmask.prototype.masksCache[maskdefKey]=masksetDefinition;masksetDefinition=$.extend(true,{},Inputmask.prototype.masksCache[maskdefKey])}}else masksetDefinition=$.extend(true,{},Inputmask.prototype.masksCache[maskdefKey]);return masksetDefinition}var ms;if($.isFunction(opts.mask)){opts.mask=opts.mask(opts)}if($.isArray(opts.mask)){if(opts.mask.length>1){if(opts.keepStatic===null){opts.keepStatic="auto";for(var i=0;i<opts.mask.length;i++){if(opts.mask[i].charAt(0)!==opts.mask[0].charAt(0)){opts.keepStatic=true;break}}}var altMask=opts.groupmarker[0];$.each(opts.isRTL?opts.mask.reverse():opts.mask,function(ndx,msk){if(altMask.length>1){altMask+=opts.groupmarker[1]+opts.alternatormarker+opts.groupmarker[0]}if(msk.mask!==undefined&&!$.isFunction(msk.mask)){altMask+=msk.mask}else{altMask+=msk}});altMask+=opts.groupmarker[1];return generateMask(altMask,opts.mask,opts)}else opts.mask=opts.mask.pop()}if(opts.mask&&opts.mask.mask!==undefined&&!$.isFunction(opts.mask.mask)){ms=generateMask(opts.mask.mask,opts.mask,opts)}else{ms=generateMask(opts.mask,opts.mask,opts)}return ms}function isInputEventSupported(eventName){var el=document.createElement("input"),evName="on"+eventName,isSupported=evName in el;if(!isSupported){el.setAttribute(evName,"return;");isSupported=typeof el[evName]==="function"}el=null;return isSupported}function maskScope(actionObj,maskset,opts){maskset=maskset||this.maskset;opts=opts||this.opts;var inputmask=this,el=this.el,isRTL=this.isRTL,undoValue,$el,skipKeyPressEvent=false,skipInputEvent=false,ignorable=false,maxLength,mouseEnter=false,colorMask,originalPlaceholder;var getMaskTemplate=function getMaskTemplate(baseOnInput,minimalPos,includeMode,noJit,clearOptionalTail){var greedy=opts.greedy;if(clearOptionalTail)opts.greedy=false;minimalPos=minimalPos||0;var maskTemplate=[],ndxIntlzr,pos=0,test,testPos,lvp=getLastValidPosition();do{if(baseOnInput===true&&getMaskSet().validPositions[pos]){testPos=clearOptionalTail&&getMaskSet().validPositions[pos].match.optionality===true&&getMaskSet().validPositions[pos+1]===undefined&&(getMaskSet().validPositions[pos].generatedInput===true||getMaskSet().validPositions[pos].input==opts.skipOptionalPartCharacter&&pos>0)?determineTestTemplate(pos,getTests(pos,ndxIntlzr,pos-1)):getMaskSet().validPositions[pos];test=testPos.match;ndxIntlzr=testPos.locator.slice();maskTemplate.push(includeMode===true?testPos.input:includeMode===false?test.nativeDef:getPlaceholder(pos,test))}else{testPos=getTestTemplate(pos,ndxIntlzr,pos-1);test=testPos.match;ndxIntlzr=testPos.locator.slice();var jitMasking=noJit===true?false:opts.jitMasking!==false?opts.jitMasking:test.jit;if(jitMasking===false||jitMasking===undefined||typeof jitMasking==="number"&&isFinite(jitMasking)&&jitMasking>pos){maskTemplate.push(includeMode===false?test.nativeDef:getPlaceholder(pos,test))}}if(opts.keepStatic==="auto"){if(test.newBlockMarker&&test.fn!==null){opts.keepStatic=pos-1}}pos++}while((maxLength===undefined||pos<maxLength)&&(test.fn!==null||test.def!=="")||minimalPos>pos);if(maskTemplate[maskTemplate.length-1]===""){maskTemplate.pop()}if(includeMode!==false||getMaskSet().maskLength===undefined)getMaskSet().maskLength=pos-1;opts.greedy=greedy;return maskTemplate};function getMaskSet(){return maskset}function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=undefined;if(soft!==true){maskset.validPositions={};maskset.p=0}}function getLastValidPosition(closestTo,strict,validPositions){var before=-1,after=-1,valids=validPositions||getMaskSet().validPositions;if(closestTo===undefined)closestTo=-1;for(var posNdx in valids){var psNdx=parseInt(posNdx);if(valids[psNdx]&&(strict||valids[psNdx].generatedInput!==true)){if(psNdx<=closestTo)before=psNdx;if(psNdx>=closestTo)after=psNdx}}return before===-1||before==closestTo?after:after==-1?before:closestTo-before<after-closestTo?before:after}function getDecisionTaker(tst){var decisionTaker=tst.locator[tst.alternation];if(typeof decisionTaker=="string"&&decisionTaker.length>0){decisionTaker=decisionTaker.split(",")[0]}return decisionTaker!==undefined?decisionTaker.toString():""}function getLocator(tst,align){var locator=(tst.alternation!=undefined?tst.mloc[getDecisionTaker(tst)]:tst.locator).join("");if(locator!=="")while(locator.length<align){locator+="0"}return locator}function determineTestTemplate(pos,tests){pos=pos>0?pos-1:0;var altTest=getTest(pos),targetLocator=getLocator(altTest),tstLocator,closest,bestMatch;for(var ndx=0;ndx<tests.length;ndx++){var tst=tests[ndx];tstLocator=getLocator(tst,targetLocator.length);var distance=Math.abs(tstLocator-targetLocator);if(closest===undefined||tstLocator!==""&&distance<closest||bestMatch&&!opts.greedy&&bestMatch.match.optionality&&bestMatch.match.newBlockMarker==="master"&&(!tst.match.optionality||!tst.match.newBlockMarker)||bestMatch&&bestMatch.match.optionalQuantifier&&!tst.match.optionalQuantifier){closest=distance;bestMatch=tst}}return bestMatch}function getTestTemplate(pos,ndxIntlzr,tstPs){return getMaskSet().validPositions[pos]||determineTestTemplate(pos,getTests(pos,ndxIntlzr?ndxIntlzr.slice():ndxIntlzr,tstPs))}function getTest(pos,tests){if(getMaskSet().validPositions[pos]){return getMaskSet().validPositions[pos]}return(tests||getTests(pos))[0]}function positionCanMatchDefinition(pos,def){var valid=false,tests=getTests(pos);for(var tndx=0;tndx<tests.length;tndx++){if(tests[tndx].match&&tests[tndx].match.def===def){valid=true;break}}return valid}function getTests(pos,ndxIntlzr,tstPs){var maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr?ndxIntlzr.slice():[0],matches=[],insertStop=false,latestMatch,cacheDependency=ndxIntlzr?ndxIntlzr.join(""):"";function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=$.inArray(latestMatch,tokenGroup.matches)===0;if(!firstMatch){$.each(tokenGroup.matches,function(ndx,match){if(match.isQuantifier===true)firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1]);else if(match.hasOwnProperty("matches"))firstMatch=isFirstMatch(latestMatch,match);if(firstMatch)return false})}return firstMatch}function resolveNdxInitializer(pos,alternateNdx,targetAlternation){var bestMatch,indexPos;if(getMaskSet().tests[pos]||getMaskSet().validPositions[pos]){$.each(getMaskSet().tests[pos]||[getMaskSet().validPositions[pos]],function(ndx,lmnt){if(lmnt.mloc[alternateNdx]){bestMatch=lmnt;return false}var alternation=targetAlternation!==undefined?targetAlternation:lmnt.alternation,ndxPos=lmnt.locator[alternation]!==undefined?lmnt.locator[alternation].toString().indexOf(alternateNdx):-1;if((indexPos===undefined||ndxPos<indexPos)&&ndxPos!==-1){bestMatch=lmnt;indexPos=ndxPos}})}if(bestMatch){var bestMatchAltIndex=bestMatch.locator[bestMatch.alternation];var locator=bestMatch.mloc[alternateNdx]||bestMatch.mloc[bestMatchAltIndex]||bestMatch.locator;return locator.slice((targetAlternation!==undefined?targetAlternation:bestMatch.alternation)+1)}else{return targetAlternation!==undefined?resolveNdxInitializer(pos,alternateNdx):undefined}}function isSubsetOf(source,target){function expand(pattern){var expanded=[],start,end;for(var i=0,l=pattern.length;i<l;i++){if(pattern.charAt(i)==="-"){end=pattern.charCodeAt(i+1);while(++start<end){expanded.push(String.fromCharCode(start))}}else{start=pattern.charCodeAt(i);expanded.push(pattern.charAt(i))}}return expanded.join("")}if(opts.regex&&source.match.fn!==null&&target.match.fn!==null){return expand(target.match.def.replace(/[\[\]]/g,"")).indexOf(expand(source.match.def.replace(/[\[\]]/g,"")))!==-1}return source.match.def===target.match.nativeDef}function staticCanMatchDefinition(source,target){var sloc=source.locator.slice(source.alternation).join(""),tloc=target.locator.slice(target.alternation).join(""),canMatch=sloc==tloc;canMatch=canMatch&&source.match.fn===null&&target.match.fn!==null?target.match.fn.test(source.match.def,getMaskSet(),pos,false,opts,false):false;return canMatch}function setMergeLocators(targetMatch,altMatch){if(altMatch===undefined||targetMatch.alternation===altMatch.alternation&&targetMatch.locator[targetMatch.alternation].toString().indexOf(altMatch.locator[altMatch.alternation])===-1){targetMatch.mloc=targetMatch.mloc||{};var locNdx=targetMatch.locator[targetMatch.alternation];if(locNdx===undefined)targetMatch.alternation=undefined;else{if(typeof locNdx==="string")locNdx=locNdx.split(",")[0];if(targetMatch.mloc[locNdx]===undefined)targetMatch.mloc[locNdx]=targetMatch.locator.slice();if(altMatch!==undefined){for(var ndx in altMatch.mloc){if(typeof ndx==="string")ndx=ndx.split(",")[0];if(targetMatch.mloc[ndx]===undefined)targetMatch.mloc[ndx]=altMatch.mloc[ndx]}targetMatch.locator[targetMatch.alternation]=Object.keys(targetMatch.mloc).join(",")}return true}}return false}if(testPos>500&&quantifierRecurse!==undefined){throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+getMaskSet().mask}if(testPos===pos&&match.matches===undefined){matches.push({match:match,locator:loopNdx.reverse(),cd:cacheDependency,mloc:{}});return true}else if(match.matches!==undefined){if(match.isGroup&&quantifierRecurse!==match){match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx,quantifierRecurse);if(match)return true}else if(match.isOptional){var optionalToken=match;match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match){$.each(matches,function(ndx,mtch){mtch.match.optionality=true});latestMatch=matches[matches.length-1].match;if(quantifierRecurse===undefined&&isFirstMatch(latestMatch,optionalToken)){insertStop=true;testPos=pos}else return true}}else if(match.isAlternator){var alternateToken=match,malternateMatches=[],maltMatches,currentMatches=matches.slice(),loopNdxCnt=loopNdx.length;var altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(altIndex===-1||typeof altIndex==="string"){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[],amndx;if(typeof altIndex=="string"){altIndexArr=altIndex.split(",")}else{for(amndx=0;amndx<alternateToken.matches.length;amndx++){altIndexArr.push(amndx.toString())}}if(getMaskSet().excludes[pos]){var altIndexArrClone=altIndexArr.slice();for(var i=0,el=getMaskSet().excludes[pos].length;i<el;i++){altIndexArr.splice(altIndexArr.indexOf(getMaskSet().excludes[pos][i].toString()),1)}if(altIndexArr.length===0){getMaskSet().excludes[pos]=undefined;altIndexArr=altIndexArrClone}}if(opts.keepStatic===true||isFinite(parseInt(opts.keepStatic))&&currentPos>=opts.keepStatic)altIndexArr=altIndexArr.slice(0,1);var unMatchedAlternation=false;for(var ndx=0;ndx<altIndexArr.length;ndx++){amndx=parseInt(altIndexArr[ndx]);matches=[];ndxInitializer=typeof altIndex==="string"?resolveNdxInitializer(testPos,amndx,loopNdxCnt)||ndxInitializerClone.slice():ndxInitializerClone.slice();if(alternateToken.matches[amndx]&&handleMatch(alternateToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse))match=true;else if(ndx===0){unMatchedAlternation=true}maltMatches=matches.slice();testPos=currentPos;matches=[];for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1],dropMatch=false;altMatch.match.jit=altMatch.match.jit||unMatchedAlternation;altMatch.alternation=altMatch.alternation||loopNdxCnt;setMergeLocators(altMatch);for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if(typeof altIndex!=="string"||altMatch.alternation!==undefined&&$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)!==-1){if(altMatch.match.nativeDef===altMatch2.match.nativeDef){dropMatch=true;setMergeLocators(altMatch2,altMatch);break}else if(isSubsetOf(altMatch,altMatch2)){if(setMergeLocators(altMatch,altMatch2)){dropMatch=true;malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch)}break}else if(isSubsetOf(altMatch2,altMatch)){setMergeLocators(altMatch2,altMatch);break}else if(staticCanMatchDefinition(altMatch,altMatch2)){if(setMergeLocators(altMatch,altMatch2)){dropMatch=true;malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch)}break}}}if(!dropMatch){malternateMatches.push(altMatch)}}}matches=currentMatches.concat(malternateMatches);testPos=pos;insertStop=matches.length>0;match=malternateMatches.length>0;ndxInitializer=ndxInitializerClone.slice()}else match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse);if(match)return true}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1]){var qt=match;for(var qndx=ndxInitializer.length>0?ndxInitializer.shift():0;qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max)&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup);if(match){latestMatch=matches[matches.length-1].match;latestMatch.optionalQuantifier=qndx>=qt.quantifier.min;latestMatch.jit=(qndx||1)*tokenGroup.matches.indexOf(latestMatch)>=qt.quantifier.jit;if(latestMatch.optionalQuantifier&&isFirstMatch(latestMatch,tokenGroup)){insertStop=true;testPos=pos;break}if(latestMatch.jit){getMaskSet().jitOffset[pos]=tokenGroup.matches.indexOf(latestMatch)}return true}}}else{match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match)return true}}else{testPos++}}for(var tndx=ndxInitializer.length>0?ndxInitializer.shift():0;tndx<maskToken.matches.length;tndx++){if(maskToken.matches[tndx].isQuantifier!==true){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos){return match}else if(testPos>pos){break}}}}function mergeLocators(pos,tests){var locator=[];if(!$.isArray(tests))tests=[tests];if(tests.length>0){if(tests[0].alternation===undefined){locator=determineTestTemplate(pos,tests.slice()).locator.slice();if(locator.length===0)locator=tests[0].locator.slice()}else{$.each(tests,function(ndx,tst){if(tst.def!==""){if(locator.length===0)locator=tst.locator.slice();else{for(var i=0;i<locator.length;i++){if(tst.locator[i]&&locator[i].toString().indexOf(tst.locator[i])===-1){locator[i]+=","+tst.locator[i]}}}}})}}return locator}if(pos>-1){if(ndxIntlzr===undefined){var previousPos=pos-1,test;while((test=getMaskSet().validPositions[previousPos]||getMaskSet().tests[previousPos])===undefined&&previousPos>-1){previousPos--}if(test!==undefined&&previousPos>-1){ndxInitializer=mergeLocators(previousPos,test);cacheDependency=ndxInitializer.join("");testPos=previousPos}}if(getMaskSet().tests[pos]&&getMaskSet().tests[pos][0].cd===cacheDependency){return getMaskSet().tests[pos]}for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if(match&&testPos===pos||testPos>pos){break}}}if(matches.length===0||insertStop){matches.push({match:{fn:null,optionality:false,casing:null,def:"",placeholder:""},locator:[],mloc:{},cd:cacheDependency})}if(ndxIntlzr!==undefined&&getMaskSet().tests[pos]){return $.extend(true,[],matches)}getMaskSet().tests[pos]=$.extend(true,[],matches);return getMaskSet().tests[pos]}function getBufferTemplate(){if(getMaskSet()._buffer===undefined){getMaskSet()._buffer=getMaskTemplate(false,1);if(getMaskSet().buffer===undefined)getMaskSet().buffer=getMaskSet()._buffer.slice()}return getMaskSet()._buffer}function getBuffer(noCache){if(getMaskSet().buffer===undefined||noCache===true){getMaskSet().buffer=getMaskTemplate(true,getLastValidPosition(),true);if(getMaskSet()._buffer===undefined)getMaskSet()._buffer=getMaskSet().buffer.slice()}return getMaskSet().buffer}function refreshFromBuffer(start,end,buffer){var i,p;if(start===true){resetMaskSet();start=0;end=buffer.length}else{for(i=start;i<end;i++){delete getMaskSet().validPositions[i]}}p=start;for(i=start;i<end;i++){resetMaskSet(true);if(buffer[i]!==opts.skipOptionalPartCharacter){var valResult=isValid(p,buffer[i],true,true);if(valResult!==false){resetMaskSet(true);p=valResult.caret!==undefined?valResult.caret:valResult.pos+1}}}}function casing(elem,test,pos){switch(opts.casing||test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase();break;case"title":var posBefore=getMaskSet().validPositions[pos-1];if(pos===0||posBefore&&posBefore.input===String.fromCharCode(Inputmask.keyCode.SPACE)){elem=elem.toUpperCase()}else{elem=elem.toLowerCase()}break;default:if($.isFunction(opts.casing)){var args=Array.prototype.slice.call(arguments);args.push(getMaskSet().validPositions);elem=opts.casing.apply(this,args)}}return elem}function checkAlternationMatch(altArr1,altArr2,na){var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=false,naArr=na!==undefined?na.split(","):[],naNdx;for(var i=0;i<naArr.length;i++){if((naNdx=altArr1.indexOf(naArr[i]))!==-1){altArr1.splice(naNdx,1)}}for(var alndx=0;alndx<altArr1.length;alndx++){if($.inArray(altArr1[alndx],altArrC)!==-1){isMatch=true;break}}return isMatch}function alternate(pos,c,strict,fromSetValid,rAltPos){var validPsClone=$.extend(true,{},getMaskSet().validPositions),lastAlt,alternation,isValidRslt=false,altPos,prevAltPos,i,validPos,decisionPos,lAltPos=rAltPos!==undefined?rAltPos:getLastValidPosition();if(lAltPos===-1&&rAltPos===undefined){lastAlt=0;prevAltPos=getTest(lastAlt);alternation=prevAltPos.alternation}else{for(;lAltPos>=0;lAltPos--){altPos=getMaskSet().validPositions[lAltPos];if(altPos&&altPos.alternation!==undefined){if(prevAltPos&&prevAltPos.locator[altPos.alternation]!==altPos.locator[altPos.alternation]){break}lastAlt=lAltPos;alternation=getMaskSet().validPositions[lastAlt].alternation;prevAltPos=altPos}}}if(alternation!==undefined){decisionPos=parseInt(lastAlt);getMaskSet().excludes[decisionPos]=getMaskSet().excludes[decisionPos]||[];if(pos!==true){getMaskSet().excludes[decisionPos].push(getDecisionTaker(prevAltPos))}var validInputsClone=[],staticInputsBeforePos=0;for(i=decisionPos;i<getLastValidPosition(undefined,true)+1;i++){validPos=getMaskSet().validPositions[i];if(validPos&&validPos.generatedInput!==true){validInputsClone.push(validPos.input)}else if(i<pos)staticInputsBeforePos++;delete getMaskSet().validPositions[i]}while(getMaskSet().excludes[decisionPos]&&getMaskSet().excludes[decisionPos].length<10){var posOffset=staticInputsBeforePos*-1,validInputs=validInputsClone.slice();getMaskSet().tests[decisionPos]=undefined;resetMaskSet(true);isValidRslt=true;while(validInputs.length>0){var input=validInputs.shift();if(!(isValidRslt=isValid(getLastValidPosition(undefined,true)+1,input,false,fromSetValid,true))){break}}if(isValidRslt&&c!==undefined){var targetLvp=getLastValidPosition(pos)+1;for(i=decisionPos;i<getLastValidPosition()+1;i++){validPos=getMaskSet().validPositions[i];if((validPos===undefined||validPos.match.fn==null)&&i<pos+posOffset){posOffset++}}pos=pos+posOffset;isValidRslt=isValid(pos>targetLvp?targetLvp:pos,c,strict,fromSetValid,true)}if(!isValidRslt){resetMaskSet();prevAltPos=getTest(decisionPos);getMaskSet().validPositions=$.extend(true,{},validPsClone);if(getMaskSet().excludes[decisionPos]){var decisionTaker=getDecisionTaker(prevAltPos);if(getMaskSet().excludes[decisionPos].indexOf(decisionTaker)!==-1){isValidRslt=alternate(pos,c,strict,fromSetValid,decisionPos-1);break}getMaskSet().excludes[decisionPos].push(decisionTaker);for(i=decisionPos;i<getLastValidPosition(undefined,true)+1;i++){delete getMaskSet().validPositions[i]}}else{isValidRslt=alternate(pos,c,strict,fromSetValid,decisionPos-1);break}}else break}}getMaskSet().excludes[decisionPos]=undefined;return isValidRslt}function isValid(pos,c,strict,fromSetValid,fromAlternate,validateOnly){function isSelection(posObj){return isRTL?posObj.begin-posObj.end>1||posObj.begin-posObj.end===1:posObj.end-posObj.begin>1||posObj.end-posObj.begin===1}strict=strict===true;var maskPos=pos;if(pos.begin!==undefined){maskPos=isRTL?pos.end:pos.begin}function _isValid(position,c,strict){var rslt=false;$.each(getTests(position),function(ndx,tst){var test=tst.match;getBuffer(true);rslt=test.fn!=null?test.fn.test(c,getMaskSet(),position,strict,opts,isSelection(pos)):(c===test.def||c===opts.skipOptionalPartCharacter)&&test.def!==""?{c:getPlaceholder(position,test,true)||test.def,pos:position}:false;if(rslt!==false){var elem=rslt.c!==undefined?rslt.c:c,validatedPos=position;elem=elem===opts.skipOptionalPartCharacter&&test.fn===null?getPlaceholder(position,test,true)||test.def:elem;if(rslt.remove!==undefined){if(!$.isArray(rslt.remove))rslt.remove=[rslt.remove];$.each(rslt.remove.sort(function(a,b){return b-a}),function(ndx,lmnt){revalidateMask({begin:lmnt,end:lmnt+1})})}if(rslt.insert!==undefined){if(!$.isArray(rslt.insert))rslt.insert=[rslt.insert];$.each(rslt.insert.sort(function(a,b){return a-b}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,true,fromSetValid)})}if(rslt!==true&&rslt.pos!==undefined&&rslt.pos!==position){validatedPos=rslt.pos}if(rslt!==true&&rslt.pos===undefined&&rslt.c===undefined){return false}if(!revalidateMask(pos,$.extend({},tst,{input:casing(elem,test,validatedPos)}),fromSetValid,validatedPos)){rslt=false}return false}});return rslt}var result=true,positionsClone=$.extend(true,{},getMaskSet().validPositions);if($.isFunction(opts.preValidation)&&!strict&&fromSetValid!==true&&validateOnly!==true){result=opts.preValidation(getBuffer(),maskPos,c,isSelection(pos),opts,getMaskSet())}if(result===true){trackbackPositions(undefined,maskPos,true);if(maxLength===undefined||maskPos<maxLength){result=_isValid(maskPos,c,strict);if((!strict||fromSetValid===true)&&result===false&&validateOnly!==true){var currentPosValid=getMaskSet().validPositions[maskPos];if(currentPosValid&&currentPosValid.match.fn===null&&(currentPosValid.match.def===c||c===opts.skipOptionalPartCharacter)){result={caret:seekNext(maskPos)}}else{if((opts.insertMode||getMaskSet().validPositions[seekNext(maskPos)]===undefined)&&(!isMask(maskPos,true)||getMaskSet().jitOffset[maskPos])){if(getMaskSet().jitOffset[maskPos]&&getMaskSet().validPositions[seekNext(maskPos)]===undefined){result=isValid(maskPos+getMaskSet().jitOffset[maskPos],c,strict);if(result!==false)result.caret=maskPos}else for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++){result=_isValid(nPos,c,strict);if(result!==false){result=trackbackPositions(maskPos,result.pos!==undefined?result.pos:nPos)||result;maskPos=nPos;break}}}}}}if(result===false&&opts.keepStatic!==false&&(opts.regex==null||isComplete(getBuffer()))&&!strict&&fromAlternate!==true){result=alternate(maskPos,c,strict,fromSetValid)}if(result===true){result={pos:maskPos}}}if($.isFunction(opts.postValidation)&&result!==false&&!strict&&fromSetValid!==true&&validateOnly!==true){var postResult=opts.postValidation(getBuffer(true),pos.begin!==undefined?isRTL?pos.end:pos.begin:pos,result,opts);if(postResult!==undefined){if(postResult.refreshFromBuffer&&postResult.buffer){var refresh=postResult.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,postResult.buffer)}result=postResult===true?result:postResult}}if(result&&result.pos===undefined){result.pos=maskPos}if(result===false||validateOnly===true){resetMaskSet(true);getMaskSet().validPositions=$.extend(true,{},positionsClone)}return result}function trackbackPositions(originalPos,newPos,fillOnly){var result;if(originalPos===undefined){for(originalPos=newPos-1;originalPos>0;originalPos--){if(getMaskSet().validPositions[originalPos])break}}for(var ps=originalPos;ps<newPos;ps++){if(getMaskSet().validPositions[ps]===undefined&&!isMask(ps,true)){var vp=ps==0?getTest(ps):getMaskSet().validPositions[ps-1];if(vp){var tests=getTests(ps).slice();if(tests[tests.length-1].match.def==="")tests.pop();var bestMatch=determineTestTemplate(ps,tests);bestMatch=$.extend({},bestMatch,{input:getPlaceholder(ps,bestMatch.match,true)||bestMatch.match.def});bestMatch.generatedInput=true;revalidateMask(ps,bestMatch,true);if(fillOnly!==true){var cvpInput=getMaskSet().validPositions[newPos].input;getMaskSet().validPositions[newPos]=undefined;result=isValid(newPos,cvpInput,true,true)}}}}return result}function revalidateMask(pos,validTest,fromSetValid,validatedPos){function IsEnclosedStatic(pos,valids,selection){var posMatch=valids[pos];if(posMatch!==undefined&&(posMatch.match.fn===null&&posMatch.match.optionality!==true||posMatch.input===opts.radixPoint)){var prevMatch=selection.begin<=pos-1?valids[pos-1]&&valids[pos-1].match.fn===null&&valids[pos-1]:valids[pos-1],nextMatch=selection.end>pos+1?valids[pos+1]&&valids[pos+1].match.fn===null&&valids[pos+1]:valids[pos+1];return prevMatch&&nextMatch}return false}var begin=pos.begin!==undefined?pos.begin:pos,end=pos.end!==undefined?pos.end:pos;if(pos.begin>pos.end){begin=pos.end;end=pos.begin}validatedPos=validatedPos!==undefined?validatedPos:begin;if(begin!==end||opts.insertMode&&getMaskSet().validPositions[validatedPos]!==undefined&&fromSetValid===undefined){var positionsClone=$.extend(true,{},getMaskSet().validPositions),lvp=getLastValidPosition(undefined,true),i;getMaskSet().p=begin;for(i=lvp;i>=begin;i--){if(getMaskSet().validPositions[i]&&getMaskSet().validPositions[i].match.nativeDef==="+"){opts.isNegative=false}delete getMaskSet().validPositions[i]}var valid=true,j=validatedPos,vps=getMaskSet().validPositions,needsValidation=false,posMatch=j,i=j;if(validTest){getMaskSet().validPositions[validatedPos]=$.extend(true,{},validTest);posMatch++;j++;if(begin<end)i++}for(;i<=lvp;i++){var t=positionsClone[i];if(t!==undefined&&(i>=end||i>=begin&&t.generatedInput!==true&&IsEnclosedStatic(i,positionsClone,{begin:begin,end:end}))){while(getTest(posMatch).match.def!==""){if(needsValidation===false&&positionsClone[posMatch]&&positionsClone[posMatch].match.nativeDef===t.match.nativeDef){getMaskSet().validPositions[posMatch]=$.extend(true,{},positionsClone[posMatch]);getMaskSet().validPositions[posMatch].input=t.input;trackbackPositions(undefined,posMatch,true);j=posMatch+1;valid=true}else if(opts.shiftPositions&&positionCanMatchDefinition(posMatch,t.match.def)){var result=isValid(posMatch,t.input,true,true);valid=result!==false;j=result.caret||result.insert?getLastValidPosition():posMatch+1;needsValidation=true}else{valid=t.generatedInput===true||t.input===opts.radixPoint&&opts.numericInput===true}if(valid)break;if(!valid&&posMatch>end&&isMask(posMatch,true)&&(t.match.fn!==null||posMatch>getMaskSet().maskLength)){break}posMatch++}if(getTest(posMatch).match.def=="")valid=false;posMatch=j}if(!valid)break}if(!valid){getMaskSet().validPositions=$.extend(true,{},positionsClone);resetMaskSet(true);return false}}else if(validTest){getMaskSet().validPositions[validatedPos]=$.extend(true,{},validTest)}resetMaskSet(true);return true}function isMask(pos,strict){var test=getTestTemplate(pos).match;if(test.def==="")test=getTest(pos).match;if(test.fn!=null){return test.fn}if(strict!==true&&pos>-1){var tests=getTests(pos);return tests.length>1+(tests[tests.length-1].match.def===""?1:0)}return false}function seekNext(pos,newBlock){var position=pos+1;while(getTest(position).match.def!==""&&(newBlock===true&&(getTest(position).match.newBlockMarker!==true||!isMask(position))||newBlock!==true&&!isMask(position))){position++}return position}function seekPrevious(pos,newBlock){var position=pos,tests;if(position<=0)return 0;while(--position>0&&(newBlock===true&&getTest(position).match.newBlockMarker!==true||newBlock!==true&&!isMask(position)&&(tests=getTests(position),tests.length<2||tests.length===2&&tests[1].match.def===""))){}return position}function writeBuffer(input,buffer,caretPos,event,triggerEvents){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite.call(inputmask,event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,result.buffer||buffer);buffer=getBuffer(true)}if(caretPos!==undefined)caretPos=result.caret!==undefined?result.caret:caretPos}}if(input!==undefined){input.inputmask._valueSet(buffer.join(""));if(caretPos!==undefined&&(event===undefined||event.type!=="blur")){caret(input,caretPos)}else renderColorMask(input,caretPos,buffer.length===0);if(triggerEvents===true){var $input=$(input),nptVal=input.inputmask._valueGet();skipInputEvent=true;$input.trigger("input");setTimeout(function(){if(nptVal===getBufferTemplate().join("")){$input.trigger("cleared")}else if(isComplete(buffer)===true){$input.trigger("complete")}},0)}}}function getPlaceholder(pos,test,returnPL){test=test||getTest(pos).match;if(test.placeholder!==undefined||returnPL===true){return $.isFunction(test.placeholder)?test.placeholder(opts):test.placeholder}else if(test.fn===null){if(pos>-1&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos),staticAlternations=[],prevTest;if(tests.length>1+(tests[tests.length-1].match.def===""?1:0)){for(var i=0;i<tests.length;i++){if(tests[i].match.optionality!==true&&tests[i].match.optionalQuantifier!==true&&(tests[i].match.fn===null||prevTest===undefined||tests[i].match.fn.test(prevTest.match.def,getMaskSet(),pos,true,opts)!==false)){staticAlternations.push(tests[i]);if(tests[i].match.fn===null)prevTest=tests[i];if(staticAlternations.length>1){if(/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)){return opts.placeholder.charAt(pos%opts.placeholder.length)}}}}}}return test.def}return opts.placeholder.charAt(pos%opts.placeholder.length)}function HandleNativePlaceholder(npt,value){if(ie){if(npt.inputmask._valueGet()!==value&&(npt.placeholder!==value||npt.placeholder==="")){var buffer=getBuffer().slice(),nptValue=npt.inputmask._valueGet();if(nptValue!==value){var lvp=getLastValidPosition();if(lvp===-1&&nptValue===getBufferTemplate().join("")){buffer=[]}else if(lvp!==-1){clearOptionalTail(buffer)}writeBuffer(npt,buffer)}}}else if(npt.placeholder!==value){npt.placeholder=value;if(npt.placeholder==="")npt.removeAttribute("placeholder")}}var EventRuler={on:function on(input,eventName,eventHandler){var ev=function ev(e){var that=this;if(that.inputmask===undefined&&this.nodeName!=="FORM"){var imOpts=$.data(that,"_inputmask_opts");if(imOpts)new Inputmask(imOpts).mask(that);else EventRuler.off(that)}else if(e.type!=="setvalue"&&this.nodeName!=="FORM"&&(that.disabled||that.readOnly&&!(e.type==="keydown"&&e.ctrlKey&&e.keyCode===67||opts.tabThrough===false&&e.keyCode===Inputmask.keyCode.TAB))){e.preventDefault()}else{switch(e.type){case"input":if(skipInputEvent===true){skipInputEvent=false;return e.preventDefault()}if(mobile){var args=arguments;setTimeout(function(){eventHandler.apply(that,args);caret(that,that.inputmask.caretPos,undefined,true)},0);return false}break;case"keydown":skipKeyPressEvent=false;skipInputEvent=false;break;case"keypress":if(skipKeyPressEvent===true){return e.preventDefault()}skipKeyPressEvent=true;break;case"click":if(iemobile||iphone){var args=arguments;setTimeout(function(){eventHandler.apply(that,args)},0);return false}break}var returnVal=eventHandler.apply(that,arguments);if(returnVal===false){e.preventDefault();e.stopPropagation()}return returnVal}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[];input.inputmask.events[eventName].push(ev);if($.inArray(eventName,["submit","reset"])!==-1){if(input.form!==null)$(input.form).on(eventName,ev)}else{$(input).on(eventName,ev)}},off:function off(input,event){if(input.inputmask&&input.inputmask.events){var events;if(event){events=[];events[event]=input.inputmask.events[event]}else{events=input.inputmask.events}$.each(events,function(eventName,evArr){while(evArr.length>0){var ev=evArr.pop();if($.inArray(eventName,["submit","reset"])!==-1){if(input.form!==null)$(input.form).off(eventName,ev)}else{$(input).off(eventName,ev)}}delete input.inputmask.events[eventName]})}}};var EventHandlers={keydownEvent:function keydownEvent(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k===Inputmask.keyCode.BACKSPACE||k===Inputmask.keyCode.DELETE||iphone&&k===Inputmask.keyCode.BACKSPACE_SAFARI||e.ctrlKey&&k===Inputmask.keyCode.X&&!isInputEventSupported("cut")){e.preventDefault();handleRemove(input,k,pos);writeBuffer(input,getBuffer(true),getMaskSet().p,e,input.inputmask._valueGet()!==getBuffer().join(""))}else if(k===Inputmask.keyCode.END||k===Inputmask.keyCode.PAGE_DOWN){e.preventDefault();var caretPos=seekNext(getLastValidPosition());caret(input,e.shiftKey?pos.begin:caretPos,caretPos,true)}else if(k===Inputmask.keyCode.HOME&&!e.shiftKey||k===Inputmask.keyCode.PAGE_UP){e.preventDefault();caret(input,0,e.shiftKey?pos.begin:0,true)}else if((opts.undoOnEscape&&k===Inputmask.keyCode.ESCAPE||k===90&&e.ctrlKey)&&e.altKey!==true){checkVal(input,true,false,undoValue.split(""));$input.trigger("click")}else if(k===Inputmask.keyCode.INSERT&&!(e.shiftKey||e.ctrlKey)){opts.insertMode=!opts.insertMode;input.setAttribute("im-insert",opts.insertMode)}else if(opts.tabThrough===true&&k===Inputmask.keyCode.TAB){if(e.shiftKey===true){if(getTest(pos.begin).match.fn===null){pos.begin=seekNext(pos.begin)}pos.end=seekPrevious(pos.begin,true);pos.begin=seekPrevious(pos.end,true)}else{pos.begin=seekNext(pos.begin,true);pos.end=seekNext(pos.begin,true);if(pos.end<getMaskSet().maskLength)pos.end--}if(pos.begin<getMaskSet().maskLength){e.preventDefault();caret(input,pos.begin,pos.end)}}opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts);ignorable=$.inArray(k,opts.ignorables)!==-1},keypressEvent:function keypressEvent(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(checkval!==true&&!(e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable)){if(k===Inputmask.keyCode.ENTER&&undoValue!==getBuffer().join("")){undoValue=getBuffer().join("");setTimeout(function(){$input.trigger("change")},0)}return true}else{if(k){if(k===46&&e.shiftKey===false&&opts.radixPoint!=="")k=opts.radixPoint.charCodeAt(0);var pos=checkval?{begin:ndx,end:ndx}:caret(input),forwardPosition,c=String.fromCharCode(k),offset=0;if(opts._radixDance&&opts.numericInput){var caretPos=getBuffer().indexOf(opts.radixPoint.charAt(0))+1;if(pos.begin<=caretPos){if(k===opts.radixPoint.charCodeAt(0))offset=1;pos.begin-=1;pos.end-=1}}getMaskSet().writeOutBuffer=true;var valResult=isValid(pos,c,strict);if(valResult!==false){resetMaskSet(true);forwardPosition=valResult.caret!==undefined?valResult.caret:seekNext(valResult.pos.begin?valResult.pos.begin:valResult.pos);getMaskSet().p=forwardPosition}forwardPosition=(opts.numericInput&&valResult.caret===undefined?seekPrevious(forwardPosition):forwardPosition)+offset;if(writeOut!==false){setTimeout(function(){opts.onKeyValidation.call(input,k,valResult,opts)},0);if(getMaskSet().writeOutBuffer&&valResult!==false){var buffer=getBuffer();writeBuffer(input,buffer,forwardPosition,e,checkval!==true)}}e.preventDefault();if(checkval){if(valResult!==false)valResult.forwardPosition=forwardPosition;return valResult}}}},pasteEvent:function pasteEvent(e){var input=this,ev=e.originalEvent||e,$input=$(input),inputValue=input.inputmask._valueGet(true),caretPos=caret(input),tempValue;if(isRTL){tempValue=caretPos.end;caretPos.end=caretPos.begin;caretPos.begin=tempValue}var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(0,caretPos.begin).join(""))valueBeforeCaret="";if(valueAfterCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(caretPos.end).join(""))valueAfterCaret="";if(window.clipboardData&&window.clipboardData.getData){inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret}else if(ev.clipboardData&&ev.clipboardData.getData){inputValue=valueBeforeCaret+ev.clipboardData.getData("text/plain")+valueAfterCaret}else return true;var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){pasteValue=opts.onBeforePaste.call(inputmask,inputValue,opts);if(pasteValue===false){return e.preventDefault()}if(!pasteValue){pasteValue=inputValue}}checkVal(input,false,false,pasteValue.toString().split(""));writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()),e,undoValue!==getBuffer().join(""));return e.preventDefault()},inputFallBackEvent:function inputFallBackEvent(e){function radixPointHandler(input,inputValue,caretPos){if(inputValue.charAt(caretPos.begin-1)==="."&&opts.radixPoint!==""){inputValue=inputValue.split("");inputValue[caretPos.begin-1]=opts.radixPoint.charAt(0);inputValue=inputValue.join("")}return inputValue}function ieMobileHandler(input,inputValue,caretPos){if(iemobile){var inputChar=inputValue.replace(getBuffer().join(""),"");if(inputChar.length===1){var iv=inputValue.split("");iv.splice(caretPos.begin,0,inputChar);inputValue=iv.join("")}}return inputValue}var input=this,inputValue=input.inputmask._valueGet();if(getBuffer().join("")!==inputValue){var caretPos=caret(input);inputValue=radixPointHandler(input,inputValue,caretPos);inputValue=ieMobileHandler(input,inputValue,caretPos);if(getBuffer().join("")!==inputValue){var buffer=getBuffer().join(""),offset=!opts.numericInput&&inputValue.length>buffer.length?-1:0,frontPart=inputValue.substr(0,caretPos.begin),backPart=inputValue.substr(caretPos.begin),frontBufferPart=buffer.substr(0,caretPos.begin+offset),backBufferPart=buffer.substr(caretPos.begin+offset);var selection=caretPos,entries="",isEntry=false;if(frontPart!==frontBufferPart){var fpl=(isEntry=frontPart.length>=frontBufferPart.length)?frontPart.length:frontBufferPart.length,i;for(i=0;frontPart.charAt(i)===frontBufferPart.charAt(i)&&i<fpl;i++){}if(isEntry){selection.begin=i-offset;entries+=frontPart.slice(i,selection.end)}}if(backPart!==backBufferPart){if(backPart.length>backBufferPart.length){entries+=backPart.slice(0,1)}else{if(backPart.length<backBufferPart.length){selection.end+=backBufferPart.length-backPart.length;if(!isEntry&&opts.radixPoint!==""&&backPart===""&&frontPart.charAt(selection.begin+offset-1)===opts.radixPoint){selection.begin--;entries=opts.radixPoint}}}}writeBuffer(input,getBuffer(),{begin:selection.begin+offset,end:selection.end+offset});if(entries.length>0){$.each(entries.split(""),function(ndx,entry){var keypress=new $.Event("keypress");keypress.which=entry.charCodeAt(0);ignorable=false;EventHandlers.keypressEvent.call(input,keypress)})}else{if(selection.begin===selection.end-1){selection.begin=seekPrevious(selection.begin+1);if(selection.begin===selection.end-1){caret(input,selection.begin)}else{caret(input,selection.begin,selection.end)}}var keydown=new $.Event("keydown");keydown.keyCode=opts.numericInput?Inputmask.keyCode.BACKSPACE:Inputmask.keyCode.DELETE;EventHandlers.keydownEvent.call(input,keydown)}e.preventDefault()}}},beforeInputEvent:function beforeInputEvent(e){if(e.cancelable){var input=this;switch(e.inputType){case"insertText":$.each(e.data.split(""),function(ndx,entry){var keypress=new $.Event("keypress");keypress.which=entry.charCodeAt(0);ignorable=false;EventHandlers.keypressEvent.call(input,keypress)});return e.preventDefault();case"deleteContentBackward":var keydown=new $.Event("keydown");keydown.keyCode=Inputmask.keyCode.BACKSPACE;EventHandlers.keydownEvent.call(input,keydown);return e.preventDefault();case"deleteContentForward":var keydown=new $.Event("keydown");keydown.keyCode=Inputmask.keyCode.DELETE;EventHandlers.keydownEvent.call(input,keydown);return e.preventDefault()}}},setValueEvent:function setValueEvent(e){this.inputmask.refreshValue=false;var input=this,value=e&&e.detail?e.detail[0]:arguments[1],value=value||input.inputmask._valueGet(true);if($.isFunction(opts.onBeforeMask))value=opts.onBeforeMask.call(inputmask,value,opts)||value;value=value.toString().split("");checkVal(input,true,false,value);undoValue=getBuffer().join("");if((opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===getBufferTemplate().join("")){input.inputmask._valueSet("")}},focusEvent:function focusEvent(e){var input=this,nptValue=input.inputmask._valueGet();if(opts.showMaskOnFocus){if(nptValue!==getBuffer().join("")){writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()))}else if(mouseEnter===false){caret(input,seekNext(getLastValidPosition()))}}if(opts.positionCaretOnTab===true&&mouseEnter===false){EventHandlers.clickEvent.apply(input,[e,true])}undoValue=getBuffer().join("")},mouseleaveEvent:function mouseleaveEvent(e){var input=this;mouseEnter=false;if(opts.clearMaskOnLostFocus&&document.activeElement!==input){HandleNativePlaceholder(input,originalPlaceholder)}},clickEvent:function clickEvent(e,tabbed){function doRadixFocus(clickPos){if(opts.radixPoint!==""){var vps=getMaskSet().validPositions;if(vps[clickPos]===undefined||vps[clickPos].input===getPlaceholder(clickPos)){if(clickPos<seekNext(-1))return true;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(radixPos!==-1){for(var vp in vps){if(radixPos<vp&&vps[vp].input!==getPlaceholder(vp)){return false}}return true}}}return false}var input=this;setTimeout(function(){if(document.activeElement===input){var selectedCaret=caret(input);if(tabbed){if(isRTL){selectedCaret.end=selectedCaret.begin}else{selectedCaret.begin=selectedCaret.end}}if(selectedCaret.begin===selectedCaret.end){switch(opts.positionCaretOnClick){case"none":break;case"select":caret(input,0,getBuffer().length);break;case"ignore":caret(input,seekNext(getLastValidPosition()));break;case"radixFocus":if(doRadixFocus(selectedCaret.begin)){var radixPos=getBuffer().join("").indexOf(opts.radixPoint);caret(input,opts.numericInput?seekNext(radixPos):radixPos);break}default:var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition(clickPosition,true),lastPosition=seekNext(lvclickPosition);if(clickPosition<lastPosition){caret(input,!isMask(clickPosition,true)&&!isMask(clickPosition-1,true)?seekNext(clickPosition):clickPosition)}else{var lvp=getMaskSet().validPositions[lvclickPosition],tt=getTestTemplate(lastPosition,lvp?lvp.match.locator:undefined,lvp),placeholder=getPlaceholder(lastPosition,tt.match);if(placeholder!==""&&getBuffer()[lastPosition]!==placeholder&&tt.match.optionalQuantifier!==true&&tt.match.newBlockMarker!==true||!isMask(lastPosition,opts.keepStatic)&&tt.match.def===placeholder){var newPos=seekNext(lastPosition);if(clickPosition>=newPos||clickPosition===lastPosition){lastPosition=newPos}}caret(input,lastPosition)}break}}}},0)},cutEvent:function cutEvent(e){var input=this,$input=$(input),pos=caret(input),ev=e.originalEvent||e;var clipboardData=window.clipboardData||ev.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData("text",isRTL?clipData.reverse().join(""):clipData.join(""));if(document.execCommand)document.execCommand("copy");handleRemove(input,Inputmask.keyCode.DELETE,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(""))},blurEvent:function blurEvent(e){var $input=$(this),input=this;if(input.inputmask){HandleNativePlaceholder(input,originalPlaceholder);var nptValue=input.inputmask._valueGet(),buffer=getBuffer().slice();if(nptValue!==""||colorMask!==undefined){if(opts.clearMaskOnLostFocus){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join("")){buffer=[]}else{clearOptionalTail(buffer)}}if(isComplete(buffer)===false){setTimeout(function(){$input.trigger("incomplete")},0);if(opts.clearIncomplete){resetMaskSet();if(opts.clearMaskOnLostFocus){buffer=[]}else{buffer=getBufferTemplate().slice()}}}writeBuffer(input,buffer,undefined,e)}if(undoValue!==getBuffer().join("")){undoValue=buffer.join("");$input.trigger("change")}}},mouseenterEvent:function mouseenterEvent(e){var input=this;mouseEnter=true;if(document.activeElement!==input&&opts.showMaskOnHover){HandleNativePlaceholder(input,(isRTL?getBuffer().slice().reverse():getBuffer()).join(""))}},submitEvent:function submitEvent(e){if(undoValue!==getBuffer().join("")){$el.trigger("change")}if(opts.clearMaskOnLostFocus&&getLastValidPosition()===-1&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join("")){el.inputmask._valueSet("")}if(opts.clearIncomplete&&isComplete(getBuffer())===false){el.inputmask._valueSet("")}if(opts.removeMaskOnSubmit){el.inputmask._valueSet(el.inputmask.unmaskedvalue(),true);setTimeout(function(){writeBuffer(el,getBuffer())},0)}},resetEvent:function resetEvent(e){el.inputmask.refreshValue=true;setTimeout(function(){$el.trigger("setvalue")},0)}};function checkVal(input,writeOut,strict,nptvl,initiatingEvent){var inputmask=this||input.inputmask,inputValue=nptvl.slice(),charCodes="",initialNdx=-1,result=undefined;function isTemplateMatch(ndx,charCodes){var charCodeNdx=getMaskTemplate(true,0,false).slice(ndx,seekNext(ndx)).join("").replace(/'/g,"").indexOf(charCodes);return charCodeNdx!==-1&&!isMask(ndx)&&(getTest(ndx).match.nativeDef===charCodes.charAt(0)||getTest(ndx).match.fn===null&&getTest(ndx).match.nativeDef==="'"+charCodes.charAt(0)||getTest(ndx).match.nativeDef===" "&&(getTest(ndx+1).match.nativeDef===charCodes.charAt(0)||getTest(ndx+1).match.fn===null&&getTest(ndx+1).match.nativeDef==="'"+charCodes.charAt(0)))}resetMaskSet();if(!strict&&opts.autoUnmask!==true){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(""),matches=inputValue.join("").match(new RegExp("^"+Inputmask.escapeRegex(staticInput),"g"));if(matches&&matches.length>0){inputValue.splice(0,matches.length*staticInput.length);initialNdx=seekNext(initialNdx)}}else{initialNdx=seekNext(initialNdx)}if(initialNdx===-1){getMaskSet().p=seekNext(initialNdx);initialNdx=0}else getMaskSet().p=initialNdx;inputmask.caretPos={begin:initialNdx};$.each(inputValue,function(ndx,charCode){if(charCode!==undefined){if(getMaskSet().validPositions[ndx]===undefined&&inputValue[ndx]===getPlaceholder(ndx)&&isMask(ndx,true)&&isValid(ndx,inputValue[ndx],true,undefined,undefined,true)===false){getMaskSet().p++}else{var keypress=new $.Event("_checkval");keypress.which=charCode.charCodeAt(0);charCodes+=charCode;var lvp=getLastValidPosition(undefined,true);if(!isTemplateMatch(initialNdx,charCodes)){result=EventHandlers.keypressEvent.call(input,keypress,true,false,strict,inputmask.caretPos.begin);if(result){initialNdx=inputmask.caretPos.begin+1;charCodes=""}}else{result=EventHandlers.keypressEvent.call(input,keypress,true,false,strict,lvp+1)}if(result){writeBuffer(undefined,getBuffer(),result.forwardPosition,keypress,false);inputmask.caretPos={begin:result.forwardPosition,end:result.forwardPosition}}}}});if(writeOut)writeBuffer(input,getBuffer(),result?result.forwardPosition:undefined,initiatingEvent||new $.Event("checkval"),initiatingEvent&&initiatingEvent.type==="input")}function unmaskedvalue(input){if(input){if(input.inputmask===undefined){return input.value}if(input.inputmask&&input.inputmask.refreshValue){EventHandlers.setValueEvent.call(input)}}var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps){if(vps[pndx].match&&vps[pndx].match.fn!=null){umValue.push(vps[pndx].input)}}var unmaskedValue=umValue.length===0?"":(isRTL?umValue.reverse():umValue).join("");if($.isFunction(opts.onUnMask)){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");unmaskedValue=opts.onUnMask.call(inputmask,bufferValue,unmaskedValue,opts)}return unmaskedValue}function caret(input,begin,end,notranslate){function translatePosition(pos){if(isRTL&&typeof pos==="number"&&(!opts.greedy||opts.placeholder!=="")&&el){pos=el.inputmask._valueGet().length-pos}return pos}var range;if(begin!==undefined){if($.isArray(begin)){end=isRTL?begin[0]:begin[1];begin=isRTL?begin[1]:begin[0]}if(begin.begin!==undefined){end=isRTL?begin.begin:begin.end;begin=isRTL?begin.end:begin.begin}if(typeof begin==="number"){begin=notranslate?begin:translatePosition(begin);end=notranslate?end:translatePosition(end);end=typeof end=="number"?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0;input.inputmask.caretPos={begin:begin,end:end};if(input===document.activeElement){if("selectionStart"in input){input.selectionStart=begin;input.selectionEnd=end}else if(window.getSelection){range=document.createRange();if(input.firstChild===undefined||input.firstChild===null){var textNode=document.createTextNode("");input.appendChild(textNode)}range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length);range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length);range.collapse(true);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range)}else if(input.createTextRange){range=input.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",begin);range.select()}renderColorMask(input,{begin:begin,end:end})}}}else{if("selectionStart"in input){begin=input.selectionStart;end=input.selectionEnd}else if(window.getSelection){range=window.getSelection().getRangeAt(0);if(range.commonAncestorContainer.parentNode===input||range.commonAncestorContainer===input){begin=range.startOffset;end=range.endOffset}}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-input.inputmask._valueGet().length);end=begin+range.text.length}return{begin:notranslate?begin:translatePosition(begin),end:notranslate?end:translatePosition(end)}}}function determineLastRequiredPosition(returnDefinition){var buffer=getMaskTemplate(true,getLastValidPosition(),true,true),bl=buffer.length,pos,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=lvTest!==undefined?lvTest.locator.slice():undefined,testPos;for(pos=lvp+1;pos<buffer.length;pos++){testPos=getTestTemplate(pos,ndxIntlzr,pos-1);ndxIntlzr=testPos.locator.slice();positions[pos]=$.extend(true,{},testPos)}var lvTestAlt=lvTest&&lvTest.alternation!==undefined?lvTest.locator[lvTest.alternation]:undefined;for(pos=bl-1;pos>lvp;pos--){testPos=positions[pos];if((testPos.match.optionality||testPos.match.optionalQuantifier&&testPos.match.newBlockMarker||lvTestAlt&&(lvTestAlt!==positions[pos].locator[lvTest.alternation]&&testPos.match.fn!=null||testPos.match.fn===null&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&getTests(pos)[0].def!==""))&&buffer[pos]===getPlaceholder(pos,testPos.match)){bl--}else break}return returnDefinition?{l:bl,def:positions[bl]?positions[bl].match:undefined}:bl}function clearOptionalTail(buffer){buffer.length=0;var template=getMaskTemplate(true,0,true,undefined,true),lmnt,validPos;while(lmnt=template.shift(),lmnt!==undefined){buffer.push(lmnt)}return buffer}function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if(opts.repeat==="*")return undefined;var complete=false,lrp=determineLastRequiredPosition(true),aml=seekPrevious(lrp.l);if(lrp.def===undefined||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=true;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if(test.fn!==null&&getMaskSet().validPositions[i]===undefined&&test.optionality!==true&&test.optionalQuantifier!==true||test.fn===null&&buffer[i]!==getPlaceholder(i,test)){complete=false;break}}}return complete}function handleRemove(input,k,pos,strict,fromIsValid){if(opts.numericInput||isRTL){if(k===Inputmask.keyCode.BACKSPACE){k=Inputmask.keyCode.DELETE}else if(k===Inputmask.keyCode.DELETE){k=Inputmask.keyCode.BACKSPACE}if(isRTL){var pend=pos.end;pos.end=pos.begin;pos.begin=pend}}if(k===Inputmask.keyCode.BACKSPACE&&pos.end-pos.begin<1){pos.begin=seekPrevious(pos.begin);if(getMaskSet().validPositions[pos.begin]!==undefined&&getMaskSet().validPositions[pos.begin].input===opts.groupSeparator){pos.begin--}}else if(k===Inputmask.keyCode.DELETE&&pos.begin===pos.end){pos.end=isMask(pos.end,true)&&getMaskSet().validPositions[pos.end]&&getMaskSet().validPositions[pos.end].input!==opts.radixPoint?pos.end+1:seekNext(pos.end)+1;if(getMaskSet().validPositions[pos.begin]!==undefined&&getMaskSet().validPositions[pos.begin].input===opts.groupSeparator){pos.end++}}revalidateMask(pos);if(strict!==true&&opts.keepStatic!==false||opts.regex!==null){var result=alternate(true);if(result){var newPos=result.caret!==undefined?result.caret:result.pos?seekNext(result.pos.begin?result.pos.begin:result.pos):getLastValidPosition(-1,true);if(k!==Inputmask.keyCode.DELETE||pos.begin>newPos){pos.begin==newPos}}}var lvp=getLastValidPosition(pos.begin,true);if(lvp<pos.begin||pos.begin===-1){getMaskSet().p=seekNext(lvp)}else if(strict!==true){getMaskSet().p=pos.begin;if(fromIsValid!==true){while(getMaskSet().p<lvp&&getMaskSet().validPositions[getMaskSet().p]===undefined){getMaskSet().p++}}}}function initializeColorMask(input){var computedStyle=(input.ownerDocument.defaultView||window).getComputedStyle(input,null);function findCaretPos(clientx){var e=document.createElement("span"),caretPos;for(var style in computedStyle){if(isNaN(style)&&style.indexOf("font")!==-1){e.style[style]=computedStyle[style]}}e.style.textTransform=computedStyle.textTransform;e.style.letterSpacing=computedStyle.letterSpacing;e.style.position="absolute";e.style.height="auto";e.style.width="auto";e.style.visibility="hidden";e.style.whiteSpace="nowrap";document.body.appendChild(e);var inputText=input.inputmask._valueGet(),previousWidth=0,itl;for(caretPos=0,itl=inputText.length;caretPos<=itl;caretPos++){e.innerHTML+=inputText.charAt(caretPos)||"_";if(e.offsetWidth>=clientx){var offset1=clientx-previousWidth;var offset2=e.offsetWidth-clientx;e.innerHTML=inputText.charAt(caretPos);offset1-=e.offsetWidth/3;caretPos=offset1<offset2?caretPos-1:caretPos;break}previousWidth=e.offsetWidth}document.body.removeChild(e);return caretPos}var template=document.createElement("div");template.style.width=computedStyle.width;template.style.textAlign=computedStyle.textAlign;colorMask=document.createElement("div");input.inputmask.colorMask=colorMask;colorMask.className="im-colormask";input.parentNode.insertBefore(colorMask,input);input.parentNode.removeChild(input);colorMask.appendChild(input);colorMask.appendChild(template);input.style.left=template.offsetLeft+"px";$(colorMask).on("mouseleave",function(e){return EventHandlers.mouseleaveEvent.call(input,[e])});$(colorMask).on("mouseenter",function(e){return EventHandlers.mouseenterEvent.call(input,[e])});$(colorMask).on("click",function(e){caret(input,findCaretPos(e.clientX));return EventHandlers.clickEvent.call(input,[e])})}function renderColorMask(input,caretPos,clear){var maskTemplate=[],isStatic=false,test,testPos,ndxIntlzr,pos=0;function setEntry(entry){if(entry===undefined)entry="";if(!isStatic&&(test.fn===null||testPos.input===undefined)){isStatic=true;maskTemplate.push("<span class='im-static'>"+entry)}else if(isStatic&&(test.fn!==null&&testPos.input!==undefined||test.def==="")){isStatic=false;var mtl=maskTemplate.length;maskTemplate[mtl-1]=maskTemplate[mtl-1]+"</span>";maskTemplate.push(entry)}else maskTemplate.push(entry)}function setCaret(){if(document.activeElement===input){maskTemplate.splice(caretPos.begin,0,caretPos.begin===caretPos.end||caretPos.end>getMaskSet().maskLength?'<mark class="im-caret" style="border-right-width: 1px;border-right-style: solid;">':'<mark class="im-caret-select">');maskTemplate.splice(caretPos.end+1,0,"</mark>")}}if(colorMask!==undefined){var buffer=getBuffer();if(caretPos===undefined){caretPos=caret(input)}else if(caretPos.begin===undefined){caretPos={begin:caretPos,end:caretPos}}if(clear!==true){var lvp=getLastValidPosition();do{if(getMaskSet().validPositions[pos]){testPos=getMaskSet().validPositions[pos];test=testPos.match;ndxIntlzr=testPos.locator.slice();setEntry(buffer[pos])}else{testPos=getTestTemplate(pos,ndxIntlzr,pos-1);test=testPos.match;ndxIntlzr=testPos.locator.slice();if(opts.jitMasking===false||pos<lvp||typeof opts.jitMasking==="number"&&isFinite(opts.jitMasking)&&opts.jitMasking>pos){setEntry(getPlaceholder(pos,test))}else isStatic=false}pos++}while((maxLength===undefined||pos<maxLength)&&(test.fn!==null||test.def!=="")||lvp>pos||isStatic);if(isStatic)setEntry();setCaret()}var template=colorMask.getElementsByTagName("div")[0];template.innerHTML=maskTemplate.join("");input.inputmask.positionColorMask(input,template)}}function mask(elem){function isElementTypeSupported(input,opts){function patchValueProperty(npt){var valueGet;var valueSet;function patchValhook(type){if($.valHooks&&($.valHooks[type]===undefined||$.valHooks[type].inputmaskpatch!==true)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value};var valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){elem.value=value;return elem};$.valHooks[type]={get:function get(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask){return elem.inputmask.unmaskedvalue()}else{var result=valhookGet(elem);return getLastValidPosition(undefined,undefined,elem.inputmask.maskset.validPositions)!==-1||opts.nullable!==true?result:""}}else return valhookGet(elem)},set:function set(elem,value){var $elem=$(elem),result;result=valhookSet(elem,value);if(elem.inputmask){$elem.trigger("setvalue",[value])}return result},inputmaskpatch:true}}}function getter(){if(this.inputmask){return this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():getLastValidPosition()!==-1||opts.nullable!==true?document.activeElement===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(""):valueGet.call(this):""}else return valueGet.call(this)}function setter(value){valueSet.call(this,value);if(this.inputmask){$(this).trigger("setvalue",[value])}}function installNativeValueSetFallback(npt){EventRuler.on(npt,"mouseenter",function(event){var $input=$(this),input=this,value=input.inputmask._valueGet();if(value!==getBuffer().join("")){$input.trigger("setvalue")}})}if(!npt.inputmask.__valueGet){if(opts.noValuePatching!==true){if(Object.getOwnPropertyDescriptor){if(typeof Object.getPrototypeOf!=="function"){Object.getPrototypeOf=_typeof("test".__proto__)==="object"?function(object){return object.__proto__}:function(object){return object.constructor.prototype}}var valueProperty=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt),"value"):undefined;if(valueProperty&&valueProperty.get&&valueProperty.set){valueGet=valueProperty.get;valueSet=valueProperty.set;Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:true})}else if(npt.tagName!=="INPUT"){valueGet=function valueGet(){return this.textContent};valueSet=function valueSet(value){this.textContent=value};Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:true})}}else if(document.__lookupGetter__&&npt.__lookupGetter__("value")){valueGet=npt.__lookupGetter__("value");valueSet=npt.__lookupSetter__("value");npt.__defineGetter__("value",getter);npt.__defineSetter__("value",setter)}npt.inputmask.__valueGet=valueGet;npt.inputmask.__valueSet=valueSet}npt.inputmask._valueGet=function(overruleRTL){return isRTL&&overruleRTL!==true?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el)};npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,value===null||value===undefined?"":overruleRTL!==true&&isRTL?value.split("").reverse().join(""):value)};if(valueGet===undefined){valueGet=function valueGet(){return this.value};valueSet=function valueSet(value){this.value=value};patchValhook(npt.type);installNativeValueSetFallback(npt)}}}var elementType=input.getAttribute("type");var isSupported=input.tagName==="INPUT"&&$.inArray(elementType,opts.supportsInputType)!==-1||input.isContentEditable||input.tagName==="TEXTAREA";if(!isSupported){if(input.tagName==="INPUT"){var el=document.createElement("input");el.setAttribute("type",elementType);isSupported=el.type==="text";el=null}else isSupported="partial"}if(isSupported!==false){patchValueProperty(input)}else input.inputmask=undefined;return isSupported}EventRuler.off(elem);var isSupported=isElementTypeSupported(elem,opts);if(isSupported!==false){el=elem;$el=$(el);originalPlaceholder=el.placeholder;maxLength=el!==undefined?el.maxLength:undefined;if(maxLength===-1)maxLength=undefined;if(opts.colorMask===true){initializeColorMask(el)}if(mobile){if("inputMode"in el){el.inputmode=opts.inputmode;el.setAttribute("inputmode",opts.inputmode)}if(opts.disablePredictiveText===true){if("autocorrect"in el){el.autocorrect=false}else{if(opts.colorMask!==true){initializeColorMask(el)}el.type="password"}}}if(isSupported===true){el.setAttribute("im-insert",opts.insertMode);EventRuler.on(el,"submit",EventHandlers.submitEvent);EventRuler.on(el,"reset",EventHandlers.resetEvent);EventRuler.on(el,"blur",EventHandlers.blurEvent);EventRuler.on(el,"focus",EventHandlers.focusEvent);if(opts.colorMask!==true){EventRuler.on(el,"click",EventHandlers.clickEvent);EventRuler.on(el,"mouseleave",EventHandlers.mouseleaveEvent);EventRuler.on(el,"mouseenter",EventHandlers.mouseenterEvent)}EventRuler.on(el,"paste",EventHandlers.pasteEvent);EventRuler.on(el,"cut",EventHandlers.cutEvent);EventRuler.on(el,"complete",opts.oncomplete);EventRuler.on(el,"incomplete",opts.onincomplete);EventRuler.on(el,"cleared",opts.oncleared);if(!mobile&&opts.inputEventOnly!==true){EventRuler.on(el,"keydown",EventHandlers.keydownEvent);EventRuler.on(el,"keypress",EventHandlers.keypressEvent)}else{el.removeAttribute("maxLength")}EventRuler.on(el,"input",EventHandlers.inputFallBackEvent);EventRuler.on(el,"beforeinput",EventHandlers.beforeInputEvent)}EventRuler.on(el,"setvalue",EventHandlers.setValueEvent);undoValue=getBufferTemplate().join("");if(el.inputmask._valueGet(true)!==""||opts.clearMaskOnLostFocus===false||document.activeElement===el){var initialValue=$.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(inputmask,el.inputmask._valueGet(true),opts)||el.inputmask._valueGet(true):el.inputmask._valueGet(true);if(initialValue!=="")checkVal(el,true,false,initialValue.split(""));var buffer=getBuffer().slice();undoValue=buffer.join("");if(isComplete(buffer)===false){if(opts.clearIncomplete){resetMaskSet()}}if(opts.clearMaskOnLostFocus&&document.activeElement!==el){if(getLastValidPosition()===-1){buffer=[]}else{clearOptionalTail(buffer)}}if(opts.clearMaskOnLostFocus===false||opts.showMaskOnFocus&&document.activeElement===el||el.inputmask._valueGet(true)!=="")writeBuffer(el,buffer);if(document.activeElement===el){caret(el,seekNext(getLastValidPosition()))}}}}var valueBuffer;if(actionObj!==undefined){switch(actionObj.action){case"isComplete":el=actionObj.el;return isComplete(getBuffer());case"unmaskedvalue":if(el===undefined||actionObj.value!==undefined){valueBuffer=actionObj.value;valueBuffer=($.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(inputmask,valueBuffer,opts)||valueBuffer:valueBuffer).split("");checkVal.call(this,undefined,false,false,valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite.call(inputmask,undefined,getBuffer(),0,opts)}return unmaskedvalue(el);case"mask":mask(el);break;case"format":valueBuffer=($.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(inputmask,actionObj.value,opts)||actionObj.value:actionObj.value).split("");checkVal.call(this,undefined,true,false,valueBuffer);if(actionObj.metadata){return{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:maskScope.call(this,{action:"getmetadata"},maskset,opts)}}return isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case"isValid":if(actionObj.value){valueBuffer=actionObj.value.split("");checkVal.call(this,undefined,true,true,valueBuffer)}else{actionObj.value=getBuffer().join("")}var buffer=getBuffer();var rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break}buffer.splice(rl,lmib+1-rl);return isComplete(buffer)&&actionObj.value===getBuffer().join("");case"getemptymask":return getBufferTemplate().join("");case"remove":if(el&&el.inputmask){$.data(el,"_inputmask_opts",null);$el=$(el);el.inputmask._valueSet(opts.autoUnmask?unmaskedvalue(el):el.inputmask._valueGet(true));EventRuler.off(el);if(el.inputmask.colorMask){colorMask=el.inputmask.colorMask;colorMask.removeChild(el);colorMask.parentNode.insertBefore(el,colorMask);colorMask.parentNode.removeChild(colorMask)}var valueProperty;if(Object.getOwnPropertyDescriptor&&Object.getPrototypeOf){valueProperty=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(el),"value");if(valueProperty){if(el.inputmask.__valueGet){Object.defineProperty(el,"value",{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet,configurable:true})}}}else if(document.__lookupGetter__&&el.__lookupGetter__("value")){if(el.inputmask.__valueGet){el.__defineGetter__("value",el.inputmask.__valueGet);el.__defineSetter__("value",el.inputmask.__valueSet)}}el.inputmask=undefined}return el;break;case"getmetadata":if($.isArray(maskset.metadata)){var maskTarget=getMaskTemplate(true,0,false).join("");$.each(maskset.metadata,function(ndx,mtdt){if(mtdt.mask===maskTarget){maskTarget=mtdt;return false}});return maskTarget}return maskset.metadata}}}return Inputmask})},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(function($){return $})},function(module,exports){module.exports=jQuery},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};if(true)!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return typeof window!=="undefined"?window:new(eval("require('jsdom').JSDOM"))("").window}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else{}},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(function(Inputmask){var $=Inputmask.dependencyLib;var formatCode={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return pad(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return pad(Date.prototype.getMonth.call(this)+1,2)}],mmm:[""],mmmm:[""],yy:["[0-9]{2}",Date.prototype.setFullYear,"year",function(){return pad(Date.prototype.getFullYear.call(this),2)}],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return pad(Date.prototype.getFullYear.call(this),4)}],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return pad(Date.prototype.getHours.call(this),2)}],hhh:["[0-9]+",Date.prototype.setHours,"hours",Date.prototype.getHours],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return pad(Date.prototype.getHours.call(this),2)}],HHH:["[0-9]+",Date.prototype.setHours,"hours",Date.prototype.getHours],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return pad(Date.prototype.getMinutes.call(this),2)}],ss:["[0-5][0-9]",Date.prototype.setSeconds,"seconds",function(){return pad(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return pad(Date.prototype.getMilliseconds.call(this),3)}],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return pad(Date.prototype.getMilliseconds.call(this),2)}],t:["[ap]"],tt:["[ap]m"],T:["[AP]"],TT:["[AP]M"],Z:[""],o:[""],S:[""]},formatAlias={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function getTokenizer(opts){if(!opts.tokenizer){var tokens=[];for(var ndx in formatCode){if(tokens.indexOf(ndx[0])===-1)tokens.push(ndx[0])}opts.tokenizer="("+tokens.join("+|")+")+?|.";opts.tokenizer=new RegExp(opts.tokenizer,"g")}return opts.tokenizer}function isValidDate(dateParts,currentResult){return!isFinite(dateParts.rawday)||dateParts.day=="29"&&!isFinite(dateParts.rawyear)||new Date(dateParts.date.getFullYear(),isFinite(dateParts.rawmonth)?dateParts.month:dateParts.date.getMonth()+1,0).getDate()>=dateParts.day?currentResult:false}function isDateInRange(dateParts,opts){var result=true;if(opts.min){if(dateParts["rawyear"]){var rawYear=dateParts["rawyear"].replace(/[^0-9]/g,""),minYear=opts.min.year.substr(0,rawYear.length);result=minYear<=rawYear}if(dateParts["year"]===dateParts["rawyear"]){if(opts.min.date.getTime()===opts.min.date.getTime()){result=opts.min.date.getTime()<=dateParts.date.getTime()}}}if(result&&opts.max&&opts.max.date.getTime()===opts.max.date.getTime()){result=opts.max.date.getTime()>=dateParts.date.getTime()}return result}function parse(format,dateObjValue,opts,raw){var mask="",match;while(match=getTokenizer(opts).exec(format)){if(dateObjValue===undefined){if(formatCode[match[0]]){mask+="("+formatCode[match[0]][0]+")"}else{switch(match[0]){case"[":mask+="(";break;case"]":mask+=")?";break;default:mask+=Inputmask.escapeRegex(match[0])}}}else{if(formatCode[match[0]]){if(raw!==true&&formatCode[match[0]][3]){var getFn=formatCode[match[0]][3];mask+=getFn.call(dateObjValue.date)}else if(formatCode[match[0]][2])mask+=dateObjValue["raw"+formatCode[match[0]][2]];else mask+=match[0]}else mask+=match[0]}}return mask}function pad(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val}return val}function analyseMask(maskString,format,opts){var dateObj={date:new Date(1,0,1)},targetProp,mask=maskString,match,dateOperation,targetValidator;function extendProperty(value){var correctedValue=value.replace(/[^0-9]/g,"0");if(correctedValue!=value){var enteredPart=value.replace(/[^0-9]/g,""),min=(opts.min&&opts.min[targetProp]||value).toString(),max=(opts.max&&opts.max[targetProp]||value).toString();correctedValue=enteredPart+(enteredPart<min.slice(0,enteredPart.length)?min.slice(enteredPart.length):enteredPart>max.slice(0,enteredPart.length)?max.slice(enteredPart.length):correctedValue.toString().slice(enteredPart.length))}return correctedValue}function setValue(dateObj,value,opts){dateObj[targetProp]=extendProperty(value);dateObj["raw"+targetProp]=value;if(dateOperation!==undefined)dateOperation.call(dateObj.date,targetProp=="month"?parseInt(dateObj[targetProp])-1:dateObj[targetProp])}if(typeof mask==="string"){while(match=getTokenizer(opts).exec(format)){var value=mask.slice(0,match[0].length);if(formatCode.hasOwnProperty(match[0])){targetValidator=formatCode[match[0]][0];targetProp=formatCode[match[0]][2];dateOperation=formatCode[match[0]][1];setValue(dateObj,value,opts)}mask=mask.slice(value.length)}return dateObj}else if(mask&&(typeof mask==="undefined"?"undefined":_typeof(mask))==="object"&&mask.hasOwnProperty("date")){return mask}return undefined}Inputmask.extendAliases({datetime:{mask:function mask(opts){formatCode.S=opts.i18n.ordinalSuffix.join("|");opts.inputFormat=formatAlias[opts.inputFormat]||opts.inputFormat;opts.displayFormat=formatAlias[opts.displayFormat]||opts.displayFormat||opts.inputFormat;opts.outputFormat=formatAlias[opts.outputFormat]||opts.outputFormat||opts.inputFormat;opts.placeholder=opts.placeholder!==""?opts.placeholder:opts.inputFormat.replace(/[\[\]]/,"");opts.regex=parse(opts.inputFormat,undefined,opts);return null},placeholder:"",inputFormat:"isoDateTime",displayFormat:undefined,outputFormat:undefined,min:null,max:null,i18n:{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]},postValidation:function postValidation(buffer,pos,currentResult,opts){opts.min=analyseMask(opts.min,opts.inputFormat,opts);opts.max=analyseMask(opts.max,opts.inputFormat,opts);var result=currentResult,dateParts=analyseMask(buffer.join(""),opts.inputFormat,opts);if(result&&dateParts.date.getTime()===dateParts.date.getTime()){result=isValidDate(dateParts,result);result=result&&isDateInRange(dateParts,opts)}if(pos&&result&&currentResult.pos!==pos){return{buffer:parse(opts.inputFormat,dateParts,opts),refreshFromBuffer:{start:pos,end:currentResult.pos}}}return result},onKeyDown:function onKeyDown(e,buffer,caretPos,opts){var input=this;if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date,match,date="";while(match=getTokenizer(opts).exec(opts.inputFormat)){if(match[0].charAt(0)==="d"){date+=pad(today.getDate(),match[0].length)}else if(match[0].charAt(0)==="m"){date+=pad(today.getMonth()+1,match[0].length)}else if(match[0]==="yyyy"){date+=today.getFullYear().toString()}else if(match[0].charAt(0)==="y"){date+=pad(today.getYear(),match[0].length)}}input.inputmask._valueSet(date);$(input).trigger("setvalue")}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return parse(opts.outputFormat,analyseMask(maskedValue,opts.inputFormat,opts),opts,true)},casing:function casing(elem,test,pos,validPositions){if(test.nativeDef.indexOf("[ap]")==0)return elem.toLowerCase();if(test.nativeDef.indexOf("[AP]")==0)return elem.toUpperCase();return elem},insertMode:false,shiftPositions:false}});return Inputmask})},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(function(Inputmask){var $=Inputmask.dependencyLib;function autoEscape(txt,opts){var escapedTxt="";for(var i=0;i<txt.length;i++){if(Inputmask.prototype.definitions[txt.charAt(i)]||opts.definitions[txt.charAt(i)]||opts.optionalmarker.start===txt.charAt(i)||opts.optionalmarker.end===txt.charAt(i)||opts.quantifiermarker.start===txt.charAt(i)||opts.quantifiermarker.end===txt.charAt(i)||opts.groupmarker.start===txt.charAt(i)||opts.groupmarker.end===txt.charAt(i)||opts.alternatormarker===txt.charAt(i)){escapedTxt+="\\"+txt.charAt(i)}else escapedTxt+=txt.charAt(i)}return escapedTxt}function alignDigits(buffer,digits,opts){if(digits>0){var radixPosition=$.inArray(opts.radixPoint,buffer);if(radixPosition===-1){buffer.push(opts.radixPoint);radixPosition=buffer.length-1}for(var i=1;i<=digits;i++){buffer[radixPosition+i]=buffer[radixPosition+i]||"0"}}return buffer}Inputmask.extendAliases({numeric:{mask:function mask(opts){if(opts.repeat!==0&&isNaN(opts.integerDigits)){opts.integerDigits=opts.repeat}opts.repeat=0;if(opts.groupSeparator===opts.radixPoint&&opts.digits&&opts.digits!=="0"){if(opts.radixPoint==="."){opts.groupSeparator=","}else if(opts.radixPoint===","){opts.groupSeparator="."}else opts.groupSeparator=""}if(opts.groupSeparator===" "){opts.skipOptionalPartCharacter=undefined}opts.autoGroup=opts.autoGroup&&opts.groupSeparator!=="";if(opts.autoGroup){if(typeof opts.groupSize=="string"&&isFinite(opts.groupSize))opts.groupSize=parseInt(opts.groupSize);if(isFinite(opts.integerDigits)){var seps=Math.floor(opts.integerDigits/opts.groupSize);var mod=opts.integerDigits%opts.groupSize;opts.integerDigits=parseInt(opts.integerDigits)+(mod===0?seps-1:seps);if(opts.integerDigits<1){opts.integerDigits="*"}}}if(opts.placeholder.length>1){opts.placeholder=opts.placeholder.charAt(0)}if(opts.positionCaretOnClick==="radixFocus"&&opts.placeholder===""&&opts.integerOptional===false){opts.positionCaretOnClick="lvp"}opts.definitions[";"]=opts.definitions["~"];opts.definitions[";"].definitionSymbol="~";if(opts.numericInput===true){opts.positionCaretOnClick=opts.positionCaretOnClick==="radixFocus"?"lvp":opts.positionCaretOnClick;opts.digitsOptional=false;if(isNaN(opts.digits))opts.digits=2;opts.decimalProtect=false}var mask="[+]";mask+=autoEscape(opts.prefix,opts);if(opts.integerOptional===true){mask+="~{1,"+opts.integerDigits+"}"}else mask+="~{"+opts.integerDigits+"}";if(opts.digits!==undefined){var radixDef=opts.decimalProtect?":":opts.radixPoint;var dq=opts.digits.toString().split(",");if(isFinite(dq[0])&&dq[1]&&isFinite(dq[1])){mask+=radixDef+";{"+opts.digits+"}"}else if(isNaN(opts.digits)||parseInt(opts.digits)>0){if(opts.digitsOptional){mask+="["+radixDef+";{1,"+opts.digits+"}]"}else mask+=radixDef+";{"+opts.digits+"}"}}mask+=autoEscape(opts.suffix,opts);mask+="[-]";opts.greedy=false;return mask},placeholder:"",greedy:false,digits:"*",digitsOptional:true,enforceDigitsOnBlur:false,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:false,allowMinus:true,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:true,prefix:"",suffix:"",rightAlign:true,decimalProtect:true,min:null,max:null,step:1,insertMode:true,autoUnmask:false,unmaskAsNumber:false,inputType:"text",inputmode:"numeric",preValidation:function preValidation(buffer,pos,c,isSelection,opts,maskset){if(c==="-"||c===opts.negationSymbol.front){if(opts.allowMinus!==true)return false;opts.isNegative=opts.isNegative===undefined?true:!opts.isNegative;if(buffer.join("")==="")return true;return{caret:maskset.validPositions[pos]?pos:undefined,dopost:true}}if(isSelection===false&&c===opts.radixPoint&&opts.digits!==undefined&&(isNaN(opts.digits)||parseInt(opts.digits)>0)){var radixPos=$.inArray(opts.radixPoint,buffer);if(radixPos!==-1&&maskset.validPositions[radixPos]!==undefined){if(opts.numericInput===true){return pos===radixPos}return{caret:radixPos+1}}}return true},postValidation:function postValidation(buffer,pos,currentResult,opts){function buildPostMask(buffer,opts){var postMask="";postMask+="("+opts.groupSeparator+"*{"+opts.groupSize+"}){*}";if(opts.radixPoint!==""){var radixSplit=buffer.join("").split(opts.radixPoint);if(radixSplit[1]){postMask+=opts.radixPoint+"*{"+radixSplit[1].match(/^\d*\??\d*/)[0].length+"}"}}return postMask}var suffix=opts.suffix.split(""),prefix=opts.prefix.split("");if(currentResult.pos===undefined&&currentResult.caret!==undefined&&currentResult.dopost!==true)return currentResult;var caretPos=currentResult.caret!==undefined?currentResult.caret:currentResult.pos;var maskedValue=buffer.slice();if(opts.numericInput){caretPos=maskedValue.length-caretPos-1;maskedValue=maskedValue.reverse()}var charAtPos=maskedValue[caretPos];if(charAtPos===opts.groupSeparator){caretPos+=1;charAtPos=maskedValue[caretPos]}if(caretPos===maskedValue.length-opts.suffix.length-1&&charAtPos===opts.radixPoint)return currentResult;if(charAtPos!==undefined){if(charAtPos!==opts.radixPoint&&charAtPos!==opts.negationSymbol.front&&charAtPos!==opts.negationSymbol.back){maskedValue[caretPos]="?";if(opts.prefix.length>0&&caretPos>=(opts.isNegative===false?1:0)&&caretPos<opts.prefix.length-1+(opts.isNegative===false?1:0)){prefix[caretPos-(opts.isNegative===false?1:0)]="?"}else if(opts.suffix.length>0&&caretPos>=maskedValue.length-opts.suffix.length-(opts.isNegative===false?1:0)){suffix[caretPos-(maskedValue.length-opts.suffix.length-(opts.isNegative===false?1:0))]="?"}}}prefix=prefix.join("");suffix=suffix.join("");var processValue=maskedValue.join("").replace(prefix,"");processValue=processValue.replace(suffix,"");processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),"");processValue=processValue.replace(new RegExp("[-"+Inputmask.escapeRegex(opts.negationSymbol.front)+"]","g"),"");processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),"");if(isNaN(opts.placeholder)){processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.placeholder),"g"),"")}if(processValue.length>1&&processValue.indexOf(opts.radixPoint)!==1){if(charAtPos==="0"){processValue=processValue.replace(/^\?/g,"")}processValue=processValue.replace(/^0/g,"")}if(processValue.charAt(0)===opts.radixPoint&&opts.radixPoint!==""&&opts.numericInput!==true){processValue="0"+processValue}if(processValue!==""){processValue=processValue.split("");if((!opts.digitsOptional||opts.enforceDigitsOnBlur&&currentResult.event==="blur")&&isFinite(opts.digits)){var radixPosition=$.inArray(opts.radixPoint,processValue);var rpb=$.inArray(opts.radixPoint,maskedValue);if(radixPosition===-1){processValue.push(opts.radixPoint);radixPosition=processValue.length-1}for(var i=1;i<=opts.digits;i++){if((!opts.digitsOptional||opts.enforceDigitsOnBlur&&currentResult.event==="blur")&&(processValue[radixPosition+i]===undefined||processValue[radixPosition+i]===opts.placeholder.charAt(0))){processValue[radixPosition+i]=currentResult.placeholder||opts.placeholder.charAt(0)}else if(rpb!==-1&&maskedValue[rpb+i]!==undefined){processValue[radixPosition+i]=processValue[radixPosition+i]||maskedValue[rpb+i]}}}if(opts.autoGroup===true&&opts.groupSeparator!==""&&(charAtPos!==opts.radixPoint||currentResult.pos!==undefined||currentResult.dopost)){var addRadix=processValue[processValue.length-1]===opts.radixPoint&&currentResult.c===opts.radixPoint;processValue=Inputmask(buildPostMask(processValue,opts),{numericInput:true,jitMasking:true,definitions:{"*":{validator:"[0-9?]",cardinality:1}}}).format(processValue.join(""));if(addRadix)processValue+=opts.radixPoint;if(processValue.charAt(0)===opts.groupSeparator){processValue.substr(1)}}else processValue=processValue.join("")}if(opts.isNegative&&currentResult.event==="blur"){opts.isNegative=processValue!=="0"}processValue=prefix+processValue;processValue+=suffix;if(opts.isNegative){processValue=opts.negationSymbol.front+processValue;processValue+=opts.negationSymbol.back}processValue=processValue.split("");if(charAtPos!==undefined){if(charAtPos!==opts.radixPoint&&charAtPos!==opts.negationSymbol.front&&charAtPos!==opts.negationSymbol.back){caretPos=$.inArray("?",processValue);if(caretPos>-1){processValue[caretPos]=charAtPos}else caretPos=currentResult.caret||0}else if(charAtPos===opts.radixPoint||charAtPos===opts.negationSymbol.front||charAtPos===opts.negationSymbol.back){var newCaretPos=$.inArray(charAtPos,processValue);if(newCaretPos!==-1)caretPos=newCaretPos}}if(opts.numericInput){caretPos=processValue.length-caretPos-1;processValue=processValue.reverse()}var rslt={caret:(charAtPos===undefined||currentResult.pos!==undefined)&&caretPos!==undefined?caretPos+(opts.numericInput?-1:1):caretPos,buffer:processValue,refreshFromBuffer:currentResult.dopost||buffer.join("")!==processValue.join("")};return rslt.refreshFromBuffer?rslt:currentResult},onBeforeWrite:function onBeforeWrite(e,buffer,caretPos,opts){function parseMinMaxOptions(opts){if(opts.parseMinMaxOptions===undefined){if(opts.min!==null){opts.min=opts.min.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),"");if(opts.radixPoint===",")opts.min=opts.min.replace(opts.radixPoint,".");opts.min=isFinite(opts.min)?parseFloat(opts.min):NaN;if(isNaN(opts.min))opts.min=Number.MIN_VALUE}if(opts.max!==null){opts.max=opts.max.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),"");if(opts.radixPoint===",")opts.max=opts.max.replace(opts.radixPoint,".");opts.max=isFinite(opts.max)?parseFloat(opts.max):NaN;if(isNaN(opts.max))opts.max=Number.MAX_VALUE}opts.parseMinMaxOptions="done"}}if(e){switch(e.type){case"keydown":return opts.postValidation(buffer,caretPos,{caret:caretPos,dopost:true},opts);case"blur":case"checkval":var unmasked;parseMinMaxOptions(opts);if(opts.min!==null||opts.max!==null){unmasked=opts.onUnMask(buffer.join(""),undefined,$.extend({},opts,{unmaskAsNumber:true}));if(opts.min!==null&&unmasked<opts.min){opts.isNegative=opts.min<0;return opts.postValidation(opts.min.toString().replace(".",opts.radixPoint).split(""),caretPos,{caret:caretPos,dopost:true,placeholder:"0"},opts)}else if(opts.max!==null&&unmasked>opts.max){opts.isNegative=opts.max<0;return opts.postValidation(opts.max.toString().replace(".",opts.radixPoint).split(""),caretPos,{caret:caretPos,dopost:true,placeholder:"0"},opts)}}return opts.postValidation(buffer,caretPos,{caret:caretPos,placeholder:"0",event:"blur"},opts);case"_checkval":return{caret:caretPos};default:break}}},regex:{integerPart:function integerPart(opts,emptyCheck){return emptyCheck?new RegExp("["+Inputmask.escapeRegex(opts.negationSymbol.front)+"+]?"):new RegExp("["+Inputmask.escapeRegex(opts.negationSymbol.front)+"+]?\\d+")},integerNPart:function integerNPart(opts){return new RegExp("[\\d"+Inputmask.escapeRegex(opts.groupSeparator)+Inputmask.escapeRegex(opts.placeholder.charAt(0))+"]+")}},definitions:{"~":{validator:function validator(chrs,maskset,pos,strict,opts,isSelection){var isValid,l;if(chrs==="k"||chrs==="m"){isValid={insert:[],c:0};for(var i=0,l=chrs==="k"?2:5;i<l;i++){isValid.insert.push({pos:pos+i,c:0})}isValid.pos=pos+l;return isValid}isValid=strict?new RegExp("[0-9"+Inputmask.escapeRegex(opts.groupSeparator)+"]").test(chrs):new RegExp("[0-9]").test(chrs);if(isValid===true){if(opts.numericInput!==true&&maskset.validPositions[pos]!==undefined&&maskset.validPositions[pos].match.def==="~"&&!isSelection){var processValue=maskset.buffer.join("");processValue=processValue.replace(new RegExp("[-"+Inputmask.escapeRegex(opts.negationSymbol.front)+"]","g"),"");processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),"");var pvRadixSplit=processValue.split(opts.radixPoint);if(pvRadixSplit.length>1){pvRadixSplit[1]=pvRadixSplit[1].replace(/0/g,opts.placeholder.charAt(0))}if(pvRadixSplit[0]==="0"){pvRadixSplit[0]=pvRadixSplit[0].replace(/0/g,opts.placeholder.charAt(0))}processValue=pvRadixSplit[0]+opts.radixPoint+pvRadixSplit[1]||"";var bufferTemplate=maskset._buffer.join("");if(processValue===opts.radixPoint){processValue=bufferTemplate}while(processValue.match(Inputmask.escapeRegex(bufferTemplate)+"$")===null){bufferTemplate=bufferTemplate.slice(1)}processValue=processValue.replace(bufferTemplate,"");processValue=processValue.split("");if(processValue[pos]===undefined){isValid={pos:pos,remove:pos}}else{isValid={pos:pos}}}}else if(!strict&&chrs===opts.radixPoint&&maskset.validPositions[pos-1]===undefined){isValid={insert:{pos:pos,c:0},pos:pos+1}}return isValid},cardinality:1},"+":{validator:function validator(chrs,maskset,pos,strict,opts){return opts.allowMinus&&(chrs==="-"||chrs===opts.negationSymbol.front)},cardinality:1,placeholder:""},"-":{validator:function validator(chrs,maskset,pos,strict,opts){return opts.allowMinus&&chrs===opts.negationSymbol.back},cardinality:1,placeholder:""},":":{validator:function validator(chrs,maskset,pos,strict,opts){var radix="["+Inputmask.escapeRegex(opts.radixPoint)+"]";var isValid=new RegExp(radix).test(chrs);if(isValid&&maskset.validPositions[pos]&&maskset.validPositions[pos].match.placeholder===opts.radixPoint){isValid={caret:pos+1}}return isValid},cardinality:1,placeholder:function placeholder(opts){return opts.radixPoint}}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){if(unmaskedValue===""&&opts.nullable===true){return unmaskedValue}var processValue=maskedValue.replace(opts.prefix,"");processValue=processValue.replace(opts.suffix,"");processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),"");if(opts.placeholder.charAt(0)!==""){processValue=processValue.replace(new RegExp(opts.placeholder.charAt(0),"g"),"0")}if(opts.unmaskAsNumber){if(opts.radixPoint!==""&&processValue.indexOf(opts.radixPoint)!==-1)processValue=processValue.replace(Inputmask.escapeRegex.call(this,opts.radixPoint),".");processValue=processValue.replace(new RegExp("^"+Inputmask.escapeRegex(opts.negationSymbol.front)),"-");processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),"");return Number(processValue)}return processValue},isComplete:function isComplete(buffer,opts){var maskedValue=(opts.numericInput?buffer.slice().reverse():buffer).join("");maskedValue=maskedValue.replace(new RegExp("^"+Inputmask.escapeRegex(opts.negationSymbol.front)),"-");maskedValue=maskedValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),"");maskedValue=maskedValue.replace(opts.prefix,"");maskedValue=maskedValue.replace(opts.suffix,"");maskedValue=maskedValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator)+"([0-9]{3})","g"),"$1");if(opts.radixPoint===",")maskedValue=maskedValue.replace(Inputmask.escapeRegex(opts.radixPoint),".");return isFinite(maskedValue)},onBeforeMask:function onBeforeMask(initialValue,opts){opts.isNegative=undefined;var radixPoint=opts.radixPoint||",";if((typeof initialValue=="number"||opts.inputType==="number")&&radixPoint!==""){initialValue=initialValue.toString().replace(".",radixPoint)}var valueParts=initialValue.split(radixPoint),integerPart=valueParts[0].replace(/[^\-0-9]/g,""),decimalPart=valueParts.length>1?valueParts[1].replace(/[^0-9]/g,""):"";initialValue=integerPart+(decimalPart!==""?radixPoint+decimalPart:decimalPart);var digits=0;if(radixPoint!==""){digits=decimalPart.length;if(decimalPart!==""){var digitsFactor=Math.pow(10,digits||1);if(isFinite(opts.digits)){digits=parseInt(opts.digits);digitsFactor=Math.pow(10,digits)}initialValue=initialValue.replace(Inputmask.escapeRegex(radixPoint),".");if(isFinite(initialValue))initialValue=Math.round(parseFloat(initialValue)*digitsFactor)/digitsFactor;initialValue=initialValue.toString().replace(".",radixPoint)}}if(opts.digits===0&&initialValue.indexOf(Inputmask.escapeRegex(radixPoint))!==-1){initialValue=initialValue.substring(0,initialValue.indexOf(Inputmask.escapeRegex(radixPoint)))}return alignDigits(initialValue.toString().split(""),digits,opts).join("")},onKeyDown:function onKeyDown(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey){switch(e.keyCode){case Inputmask.keyCode.UP:$input.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(opts.step));$input.trigger("setvalue");break;case Inputmask.keyCode.DOWN:$input.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(opts.step));$input.trigger("setvalue");break}}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:true,digits:2,digitsOptional:false,clearMaskOnLostFocus:false},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,digitsOptional:true,radixPoint:".",placeholder:"0",autoGroup:false,min:0,max:100,suffix:" %",allowMinus:false}});return Inputmask})},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4),__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(function($,Inputmask){if($.fn.inputmask===undefined){$.fn.inputmask=function(fn,options){var nptmask,input=this[0];if(options===undefined)options={};if(typeof fn==="string"){switch(fn){case"unmaskedvalue":return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case"remove":return this.each(function(){if(this.inputmask)this.inputmask.remove()});case"getemptymask":return input&&input.inputmask?input.inputmask.getemptymask():"";case"hasMaskedValue":return input&&input.inputmask?input.inputmask.hasMaskedValue():false;case"isComplete":return input&&input.inputmask?input.inputmask.isComplete():true;case"getmetadata":return input&&input.inputmask?input.inputmask.getmetadata():undefined;case"setvalue":Inputmask.setValue(input,options);break;case"option":if(typeof options==="string"){if(input&&input.inputmask!==undefined){return input.inputmask.option(options)}}else{return this.each(function(){if(this.inputmask!==undefined){return this.inputmask.option(options)}})}break;default:options.alias=fn;nptmask=new Inputmask(options);return this.each(function(){nptmask.mask(this)})}}else if(Array.isArray(fn)){options.alias=fn;nptmask=new Inputmask(options);return this.each(function(){nptmask.mask(this)})}else if((typeof fn==="undefined"?"undefined":_typeof(fn))=="object"){nptmask=new Inputmask(fn);if(fn.mask===undefined&&fn.alias===undefined){return this.each(function(){if(this.inputmask!==undefined){return this.inputmask.option(fn)}else nptmask.mask(this)})}else{return this.each(function(){nptmask.mask(this)})}}else if(fn===undefined){return this.each(function(){nptmask=new Inputmask(options);nptmask.mask(this)})}}}return $.fn.inputmask})}]);(function($,undefined){var $window=$(window);function UTCDate(){return new Date(Date.UTC.apply(Date,arguments))}function UTCToday(){var today=new Date;return UTCDate(today.getFullYear(),today.getMonth(),today.getDate())}function alias(method){return function(){return this[method].apply(this,arguments)}}var DateArray=function(){var extras={get:function(i){return this.slice(i)[0]},contains:function(d){var val=d&&d.valueOf();for(var i=0,l=this.length;i<l;i++)if(this[i].valueOf()===val)return i;return-1},remove:function(i){this.splice(i,1)},replace:function(new_array){if(!new_array)return;if(!$.isArray(new_array))new_array=[new_array];this.clear();this.push.apply(this,new_array)},clear:function(){this.length=0},copy:function(){var a=new DateArray;a.replace(this);return a}};return function(){var a=[];a.push.apply(a,arguments);$.extend(a,extras);return a}}();var Datepicker=function(element,options){this.dates=new DateArray;this.viewDate=UTCToday();this.focusDate=null;this._process_options(options);this.element=$(element);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0)this.component=false;this.picker=$(DPGlobal.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl")}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find("tfoot th.today").attr("colspan",function(i,val){return parseInt(val)+1});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};Datepicker.prototype={constructor:Datepicker,_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o);var lang=o.language;if(!dates[lang]){lang=lang.split("-")[0];if(!dates[lang])lang=defaults.language}o.language=lang;switch(o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}o.startView=Math.max(o.startView,o.minViewMode);if(o.multidate!==true){o.multidate=Number(o.multidate)||false;if(o.multidate!==false)o.multidate=Math.max(0,o.multidate);else o.multidate=1}o.multidateSeparator=String(o.multidateSeparator);o.weekStart%=7;o.weekEnd=(o.weekStart+6)%7;var format=DPGlobal.parseFormat(o.format);if(o.startDate!==-Infinity){if(!!o.startDate){if(o.startDate instanceof Date)o.startDate=this._local_to_utc(this._zero_time(o.startDate));else o.startDate=DPGlobal.parseDate(o.startDate,format,o.language)}else{o.startDate=-Infinity}}if(o.endDate!==Infinity){if(!!o.endDate){if(o.endDate instanceof Date)o.endDate=this._local_to_utc(this._zero_time(o.endDate));else o.endDate=DPGlobal.parseDate(o.endDate,format,o.language)}else{o.endDate=Infinity}}o.daysOfWeekDisabled=o.daysOfWeekDisabled||[];if(!$.isArray(o.daysOfWeekDisabled))o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/);o.daysOfWeekDisabled=$.map(o.daysOfWeekDisabled,function(d){return parseInt(d,10)});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();plc=$.grep(plc,function(word){return/^auto|left|right|top|bottom$/.test(word)});o.orientation={x:"auto",y:"auto"};if(!_plc||_plc==="auto");else if(plc.length===1){switch(plc[0]){case"top":case"bottom":o.orientation.y=plc[0];break;case"left":case"right":o.orientation.x=plc[0];break}}else{_plc=$.grep(plc,function(word){return/^left|right$/.test(word)});o.orientation.x=_plc[0]||"auto";_plc=$.grep(plc,function(word){return/^top|bottom$/.test(word)});o.orientation.y=_plc[0]||"auto"}},_events:[],_secondaryEvents:[],_applyEvents:function(evs){for(var i=0,el,ch,ev;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1]}else if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2]}el.on(ev,ch)}},_unapplyEvents:function(evs){for(var i=0,el,ev,ch;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1]}else if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2]}el.off(ev,ch)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:$.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update()},this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]]}else if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:$.proxy(this.show,this)}]]}this._events.push([this.element,"*",{blur:$.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target},this)}]);this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{"mousedown touchstart":$.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(event,altdate){var date=altdate||this.dates.get(-1),local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(ix,format){if(arguments.length===0){ix=this.dates.length-1;format=this.o.format}else if(typeof ix==="string"){format=ix;ix=this.dates.length-1}format=format||this.o.format;var date=this.dates.get(ix);return DPGlobal.formatDate(date,format,this.o.language)},this)})},show:function(){if(!this.isInline)this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val()))this.setValue();this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},_utc_to_local:function(utc){return utc&&new Date(utc.getTime()+utc.getTimezoneOffset()*6e4)},_local_to_utc:function(local){return local&&new Date(local.getTime()-local.getTimezoneOffset()*6e4)},_zero_time:function(local){return local&&new Date(local.getFullYear(),local.getMonth(),local.getDate())},_zero_utc_time:function(utc){return utc&&new Date(Date.UTC(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate()))},getDates:function(){return $.map(this.dates,this._utc_to_local)},getUTCDates:function(){return $.map(this.dates,function(d){return new Date(d)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,args);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,$.map(args,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:alias("setDates"),setUTCDate:alias("setUTCDates"),setValue:function(){var formatted=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(formatted).change()}}else{this.element.val(formatted).change()}},getFormattedDate:function(format){if(format===undefined)format=this.o.format;var lang=this.o.language;return $.map(this.dates,function(d){return DPGlobal.formatDate(d,format,lang)}).join(this.o.multidateSeparator)},setStartDate:function(startDate){this._process_options({startDate:startDate});this.update();this.updateNavArrows()},setEndDate:function(endDate){this._process_options({endDate:endDate});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled:daysOfWeekDisabled});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,windowWidth=$window.width(),windowHeight=$window.height(),scrollTop=$window.scrollTop();var zIndex=parseInt(this.element.parents().filter(function(){return $(this).css("z-index")!=="auto"}).first().css("z-index"))+10;var offset=this.component?this.component.parent().offset():this.element.offset();var height=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var width=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var left=offset.left,top=offset.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom "+"datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right")left-=calendarWidth-width}else{this.picker.addClass("datepicker-orient-left");if(offset.left<0)left-=offset.left-visualPadding;else if(offset.left+calendarWidth>windowWidth)left=windowWidth-calendarWidth-visualPadding}var yorient=this.o.orientation.y,top_overflow,bottom_overflow;if(yorient==="auto"){top_overflow=-scrollTop+offset.top-calendarHeight;bottom_overflow=scrollTop+windowHeight-(offset.top+height+calendarHeight);if(Math.max(top_overflow,bottom_overflow)===bottom_overflow)yorient="top";else yorient="bottom"}this.picker.addClass("datepicker-orient-"+yorient);if(yorient==="top")top+=height;else top-=calendarHeight+parseInt(this.picker.css("padding-top"));this.picker.css({top:top,left:left,zIndex:zIndex})},_allow_update:true,update:function(){if(!this._allow_update)return;var oldDates=this.dates.copy(),dates=[],fromArgs=false;if(arguments.length){$.each(arguments,$.proxy(function(i,date){if(date instanceof Date)date=this._local_to_utc(date);dates.push(date)},this));fromArgs=true}else{dates=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(dates&&this.o.multidate)dates=dates.split(this.o.multidateSeparator);else dates=[dates];delete this.element.data().date}dates=$.map(dates,$.proxy(function(date){return DPGlobal.parseDate(date,this.o.format,this.o.language)},this));dates=$.grep(dates,$.proxy(function(date){return date<this.o.startDate||date>this.o.endDate||!date},this),true);this.dates.replace(dates);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)this.viewDate=new Date(this.o.startDate);else if(this.viewDate>this.o.endDate)this.viewDate=new Date(this.o.endDate);if(fromArgs){this.setValue()}else if(dates.length){if(String(oldDates)!==String(this.dates))this._trigger("changeDate")}if(!this.dates.length&&oldDates.length)this._trigger("clearDate");this.fill()},fillDow:function(){var dowCnt=this.o.weekStart,html="<tr>";if(this.o.calendarWeeks){var cell='<th class="cw">&nbsp;</th>';html+=cell;this.picker.find(".datepicker-days thead tr:first-child").prepend(cell)}while(dowCnt<this.o.weekStart+7){html+='<th class="dow">'+dates[this.o.language].daysMin[dowCnt++%7]+"</th>"}html+="</tr>";this.picker.find(".datepicker-days thead").append(html)},fillMonths:function(){var html="",i=0;while(i<12){html+='<span class="month">'+dates[this.o.language].monthsShort[i++]+"</span>"}this.picker.find(".datepicker-months td").html(html)},setRange:function(range){if(!range||!range.length)delete this.range;else this.range=$.map(range,function(d){return d.valueOf()});this.fill()},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),today=new Date;if(date.getUTCFullYear()<year||date.getUTCFullYear()===year&&date.getUTCMonth()<month){cls.push("old")}else if(date.getUTCFullYear()>year||date.getUTCFullYear()===year&&date.getUTCMonth()>month){cls.push("new")}if(this.focusDate&&date.valueOf()===this.focusDate.valueOf())cls.push("focused");if(this.o.todayHighlight&&date.getUTCFullYear()===today.getFullYear()&&date.getUTCMonth()===today.getMonth()&&date.getUTCDate()===today.getDate()){cls.push("today")}if(this.dates.contains(date)!==-1)cls.push("active");if(date.valueOf()<this.o.startDate||date.valueOf()>this.o.endDate||$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){cls.push("disabled")}if(this.range){if(date>this.range[0]&&date<this.range[this.range.length-1]){cls.push("range")}if($.inArray(date.valueOf(),this.range)!==-1){cls.push("selected")}}return cls},fill:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,startMonth=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,endYear=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,endMonth=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,todaytxt=dates[this.o.language].today||dates["en"].today||"",cleartxt=dates[this.o.language].clear||dates["en"].clear||"",tooltip;this.picker.find(".datepicker-days thead th.datepicker-switch").text(dates[this.o.language].months[month]+" "+year);this.picker.find("tfoot th.today").text(todaytxt).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(cleartxt).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month-1,28),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day);prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getUTCDay()===this.o.weekStart){html.push("<tr>");if(this.o.calendarWeeks){var ws=new Date(+prevMonth+(this.o.weekStart-prevMonth.getUTCDay()-7)%7*864e5),th=new Date(Number(ws)+(7+4-ws.getUTCDay())%7*864e5),yth=new Date(Number(yth=UTCDate(th.getUTCFullYear(),0,1))+(7+4-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+"</td>")}}clsName=this.getClassNames(prevMonth);clsName.push("day");if(this.o.beforeShowDay!==$.noop){var before=this.o.beforeShowDay(this._utc_to_local(prevMonth));if(before===undefined)before={};else if(typeof before==="boolean")before={enabled:before};else if(typeof before==="string")before={classes:before};if(before.enabled===false)clsName.push("disabled");if(before.classes)clsName=clsName.concat(before.classes.split(/\s+/));if(before.tooltip)tooltip=before.tooltip}clsName=$.unique(clsName);html.push('<td class="'+clsName.join(" ")+'"'+(tooltip?' title="'+tooltip+'"':"")+">"+prevMonth.getUTCDate()+"</td>");if(prevMonth.getUTCDay()===this.o.weekEnd){html.push("</tr>")}prevMonth.setUTCDate(prevMonth.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var months=this.picker.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");$.each(this.dates,function(i,d){if(d.getUTCFullYear()===year)months.eq(d.getUTCMonth()).addClass("active")});if(year<startYear||year>endYear){months.addClass("disabled")}if(year===startYear){months.slice(0,startMonth).addClass("disabled")}if(year===endYear){months.slice(endMonth+1).addClass("disabled")}html="";year=parseInt(year/10,10)*10;var yearCont=this.picker.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");year-=1;var years=$.map(this.dates,function(d){return d.getUTCFullYear()}),classes;for(var i=-1;i<11;i++){classes=["year"];if(i===-1)classes.push("old");else if(i===10)classes.push("new");if($.inArray(year,years)!==-1)classes.push("active");if(year<startYear||year>endYear)classes.push("disabled");html+='<span class="'+classes.join(" ")+'">'+year+"</span>";year+=1}yearCont.html(html)},updateNavArrows:function(){if(!this._allow_update)return;var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()&&month<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()&&month>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(e){e.preventDefault();var target=$(e.target).closest("span, td, th"),year,month,day;if(target.length===1){switch(target[0].nodeName.toLowerCase()){case"th":switch(target[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var dir=DPGlobal.modes[this.viewMode].navStep*(target[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,dir);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,dir);if(this.viewMode===1)this._trigger("changeYear",this.viewDate);break}this.fill();break;case"today":var date=new Date;date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);this.showMode(-2);var which=this.o.todayBtn==="linked"?null:"view";this._setDate(date,which);break;case"clear":var element;if(this.isInput)element=this.element;else if(this.component)element=this.element.find("input");if(element)element.val("").change();this.update();this._trigger("changeDate");if(this.o.autoclose)this.hide();break}break;case"span":if(!target.is(".disabled")){this.viewDate.setUTCDate(1);if(target.is(".month")){day=1;month=target.parent().find("span").index(target);year=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(month);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(UTCDate(year,month,day))}}else{day=1;month=0;year=parseInt(target.text(),10)||0;this.viewDate.setUTCFullYear(year);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(UTCDate(year,month,day))}}this.showMode(-1);this.fill()}break;case"td":if(target.is(".day")&&!target.is(".disabled")){day=parseInt(target.text(),10)||1;year=this.viewDate.getUTCFullYear();month=this.viewDate.getUTCMonth();if(target.is(".old")){if(month===0){month=11;year-=1}else{month-=1}}else if(target.is(".new")){if(month===11){month=0;year+=1}else{month+=1}}this._setDate(UTCDate(year,month,day))}break}}if(this.picker.is(":visible")&&this._focused_from){$(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(date){var ix=this.dates.contains(date);if(!date){this.dates.clear()}else{this.dates.push(date)}if(typeof this.o.multidate==="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(date,which){if(!which||which==="date")this._toggle_multidate(date&&new Date(date));if(!which||which==="view")this.viewDate=date&&new Date(date);this.fill();this.setValue();this._trigger("changeDate");var element;if(this.isInput){element=this.element}else if(this.component){element=this.element.find("input")}if(element){element.change()}if(this.o.autoclose&&(!which||which==="date")){this.hide()}},moveMonth:function(date,dir){if(!date)return undefined;if(!dir)return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag===1){test=dir===-1?function(){return new_date.getUTCMonth()===month}:function(){return new_date.getUTCMonth()!==new_month};new_month=month+dir;new_date.setUTCMonth(new_month);if(new_month<0||new_month>11)new_month=(new_month+12)%12}else{for(var i=0;i<mag;i++)new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!==new_date.getUTCMonth()}}while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month)}return new_date},moveYear:function(date,dir){return this.moveMonth(date,dir*12)},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){if(e.keyCode===27)this.show();return}var dateChanged=false,dir,newDate,newViewDate,focusDate=this.focusDate||this.viewDate;switch(e.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;dir=e.keyCode===37?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveYear(focusDate,dir);this._trigger("changeYear",this.viewDate)}else if(e.shiftKey){newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveMonth(focusDate,dir);this._trigger("changeMonth",this.viewDate)}else{newDate=new Date(this.dates.get(-1)||UTCToday());newDate.setUTCDate(newDate.getUTCDate()+dir);newViewDate=new Date(focusDate);newViewDate.setUTCDate(focusDate.getUTCDate()+dir)}if(this.dateWithinRange(newDate)){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation)break;dir=e.keyCode===38?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveYear(focusDate,dir);this._trigger("changeYear",this.viewDate)}else if(e.shiftKey){newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveMonth(focusDate,dir);this._trigger("changeMonth",this.viewDate)}else{newDate=new Date(this.dates.get(-1)||UTCToday());newDate.setUTCDate(newDate.getUTCDate()+dir*7);newViewDate=new Date(focusDate);newViewDate.setUTCDate(focusDate.getUTCDate()+dir*7)}if(this.dateWithinRange(newDate)){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault()}break;case 32:break;case 13:focusDate=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(focusDate);dateChanged=true;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){e.preventDefault();if(this.o.autoclose)this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(dateChanged){if(this.dates.length)this._trigger("changeDate");else this._trigger("clearDate");var element;if(this.isInput){element=this.element}else if(this.component){element=this.element.find("input")}if(element){element.change()}}},showMode:function(dir){if(dir){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+dir))}this.picker.find(">div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var DateRangePicker=function(element,options){this.element=$(element);this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i});delete options.inputs;$(this.inputs).datepicker(options).bind("changeDate",$.proxy(this.dateUpdated,this));this.pickers=$.map(this.inputs,function(i){return $(i).data("datepicker")});this.updateDates()};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.getUTCDate()});this.updateRanges()},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf()});$.each(this.pickers,function(i,p){p.setRange(range)})},dateUpdated:function(e){if(this.updating)return;this.updating=true;var dp=$(e.target).data("datepicker"),new_date=dp.getUTCDate(),i=$.inArray(e.target,this.inputs),l=this.inputs.length;if(i===-1)return;$.each(this.pickers,function(i,p){if(!p.getUTCDate())p.setUTCDate(new_date)});if(new_date<this.dates[i]){while(i>=0&&new_date<this.dates[i]){this.pickers[i--].setUTCDate(new_date)}}else if(new_date>this.dates[i]){while(i<l&&new_date>this.dates[i]){this.pickers[i++].setUTCDate(new_date)}}this.updateDates();delete this.updating},remove:function(){$.map(this.pickers,function(p){p.remove()});delete this.element.data().datepicker}};function opts_from_el(el,prefix){var data=$(el).data(),out={},inkey,replace=new RegExp("^"+prefix.toLowerCase()+"([A-Z])");prefix=new RegExp("^"+prefix.toLowerCase());function re_lower(_,a){return a.toLowerCase()}for(var key in data)if(prefix.test(key)){inkey=key.replace(replace,re_lower);out[inkey]=data[key]}return out}function opts_from_locale(lang){var out={};if(!dates[lang]){lang=lang.split("-")[0];if(!dates[lang])return}var d=dates[lang];$.each(locale_opts,function(i,k){if(k in d)out[k]=d[k]});return out}var old=$.fn.datepicker;$.fn.datepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return;this.each(function(){var $this=$(this),data=$this.data("datepicker"),options=typeof option==="object"&&option;if(!data){var elopts=opts_from_el(this,"date"),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.is(".input-daterange")||opts.inputs){var ropts={inputs:opts.inputs||$this.find("input").toArray()};$this.data("datepicker",data=new DateRangePicker(this,$.extend(opts,ropts)))}else{$this.data("datepicker",data=new Datepicker(this,opts))}}if(typeof option==="string"&&typeof data[option]==="function"){internal_return=data[option].apply(data,args);if(internal_return!==undefined)return false}});if(internal_return!==undefined)return internal_return;else return this};var defaults=$.fn.datepicker.defaults={autoclose:false,beforeShowDay:$.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var locale_opts=$.fn.datepicker.locale_opts=["format","rtl","weekStart"];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var DPGlobal={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(year){return year%4===0&&year%100!==0||year%400===0},getDaysInMonth:function(year,month){return[31,DPGlobal.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(format){var separators=format.replace(this.validParts,"\0").split("\0"),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||parts.length===0){throw new Error("Invalid date format.")}return{separators:separators,parts:parts}},parseDate:function(date,format,language){if(!date)return undefined;if(date instanceof Date)return date;if(typeof format==="string")format=DPGlobal.parseFormat(format);var part_re=/([\-+]\d+)([dmwy])/,parts=date.match(/([\-+]\d+)([dmwy])/g),part,dir,i;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){date=new Date;for(i=0;i<parts.length;i++){part=part_re.exec(parts[i]);dir=parseInt(part[1]);switch(part[2]){case"d":date.setUTCDate(date.getUTCDate()+dir);break;case"m":date=Datepicker.prototype.moveMonth.call(Datepicker.prototype,date,dir);break;case"w":date.setUTCDate(date.getUTCDate()+dir*7);break;case"y":date=Datepicker.prototype.moveYear.call(Datepicker.prototype,date,dir);break}}return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0)}parts=date&&date.match(this.nonpunctuation)||[];date=new Date;var parsed={},setters_order=["yyyy","yy","M","MM","m","mm","d","dd"],setters_map={yyyy:function(d,v){return d.setUTCFullYear(v)},yy:function(d,v){return d.setUTCFullYear(2e3+v)},m:function(d,v){if(isNaN(d))return d;v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!==v)d.setUTCDate(d.getUTCDate()-1);return d},d:function(d,v){return d.setUTCDate(v)}},val,filtered;setters_map["M"]=setters_map["MM"]=setters_map["mm"]=setters_map["m"];setters_map["dd"]=setters_map["d"];date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var fparts=format.parts.slice();if(parts.length!==fparts.length){fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1}).toArray()}function match_part(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m===p}if(parts.length===fparts.length){var cnt;for(i=0,cnt=fparts.length;i<cnt;i++){val=parseInt(parts[i],10);part=fparts[i];if(isNaN(val)){switch(part){case"MM":filtered=$(dates[language].months).filter(match_part);val=$.inArray(filtered[0],dates[language].months)+1;break;case"M":filtered=$(dates[language].monthsShort).filter(match_part);val=$.inArray(filtered[0],dates[language].monthsShort)+1;break}}parsed[part]=val}var _date,s;for(i=0;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s])){_date=new Date(date);setters_map[s](_date,parsed[s]);if(!isNaN(_date))date=_date}}}return date},formatDate:function(date,format,language){if(!date)return"";if(typeof format==="string")format=DPGlobal.parseFormat(format);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?"0":"")+val.d;val.mm=(val.m<10?"0":"")+val.m;date=[];var seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<=cnt;i++){if(seps.length)date.push(seps.shift());date.push(val[format.parts[i]])}return date.join("")},headTemplate:"<thead>"+"<tr>"+'<th class="prev">&laquo;</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">&raquo;</th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:"<tfoot>"+"<tr>"+'<th colspan="7" class="today"></th>'+"</tr>"+"<tr>"+'<th colspan="7" class="clear"></th>'+"</tr>"+"</tfoot>"};DPGlobal.template='<div class="datepicker greenid-datepicker-container">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+DPGlobal.headTemplate+"<tbody></tbody>"+DPGlobal.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+"</table>"+"</div>"+"</div>";$.fn.datepicker.DPGlobal=DPGlobal;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this};$(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var $this=$(this);if($this.data("datepicker"))return;e.preventDefault();$this.datepicker("show")});$(function(){$('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery);
/*! eq.js (with polyfills) v1.9.0 (c) 2013-2016 Sam Richard with thanks to the Financial Times, MIT license */
!function(){"getPrototypeOf"in Object||(Object.getPrototypeOf=function(t){if(t!==Object(t))throw new TypeError("Object.getPrototypeOf called on non-object");return t.constructor?t.constructor.prototype:null}),"requestAnimationFrame"in this||!function(t){"use strict";var e=Date.now();t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var n=Date.now(),o=16+e-n;return 0>o&&(o=0),e=n,setTimeout(function(){e=Date.now(),t(performance.now())},o)},t.cancelAnimationFrame=function(t){clearTimeout(t)}}(this),function(t){if(!("Event"in t))return!1;if("function"==typeof t.Event)return!0;try{return new Event("click"),!0}catch(e){return!1}}(this)||(this.Event=function(t,e){if(!t)throw new Error("Not enough arguments");var n=document.createEvent("Event"),o=e&&void 0!==e.bubbles?e.bubbles:!1,r=e&&void 0!==e.cancelable?e.cancelable:!1;return n.initEvent(t,o,r),n}),"CustomEvent"in this&&("function"==typeof this.CustomEvent||this.CustomEvent.toString().indexOf("CustomEventConstructor")>-1)||(this.CustomEvent=function(t,e){if(!t)throw Error('TypeError: Failed to construct "CustomEvent": An event name must be provided.');var n;e=e||{bubbles:!1,cancelable:!1,detail:null};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail)}catch(o){n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable),n.detail=e.detail}return n},CustomEvent.prototype=Event.prototype),"addEventListener"in this||document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}),"getComputedStyle"in this||!function(t){function e(t,n,o){var r,i=t.document&&t.currentStyle[n].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""],u=i[1],c=i[2];return o=o?/%|em/.test(c)&&t.parentElement?e(t.parentElement,"fontSize",null):16:o,r="fontSize"==n?o:/width/i.test(n)?t.clientWidth:t.clientHeight,"%"==c?u/100*r:"cm"==c?.3937*u*96:"em"==c?u*o:"in"==c?96*u:"mm"==c?.3937*u*96/10:"pc"==c?12*u*96/72:"pt"==c?96*u/72:u}function n(t,e){var n="border"==e?"Width":"",o=e+"Top"+n,r=e+"Right"+n,i=e+"Bottom"+n,u=e+"Left"+n;t[e]=(t[o]==t[r]&&t[o]==t[i]&&t[o]==t[u]?[t[o]]:t[o]==t[i]&&t[u]==t[r]?[t[o],t[r]]:t[u]==t[r]?[t[o],t[r],t[i]]:[t[o],t[r],t[i],t[u]]).join(" ")}function o(t){var o,r=this,i=t.currentStyle,u=e(t,"fontSize"),c=function(t){return"-"+t.toLowerCase()};for(o in i)if(Array.prototype.push.call(r,"styleFloat"==o?"float":o.replace(/[A-Z]/,c)),"width"==o)r[o]=t.offsetWidth+"px";else if("height"==o)r[o]=t.offsetHeight+"px";else if("styleFloat"==o)r["float"]=i[o];else if(/margin.|padding.|border.+W/.test(o)&&"auto"!=r[o])r[o]=Math.round(e(t,o,u))+"px";else if(/^outline/.test(o))try{r[o]=i[o]}catch(a){r.outlineColor=i.color,r.outlineStyle=r.outlineStyle||"none",r.outlineWidth=r.outlineWidth||"0px",r.outline=[r.outlineColor,r.outlineWidth,r.outlineStyle].join(" ")}else r[o]=i[o];n(r,"margin"),n(r,"padding"),n(r,"border"),r.fontSize=Math.round(u)+"px"}o.prototype={constructor:o,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(t){return this[t.replace(/-\w/g,function(t){return t[1].toUpperCase()})]},item:function(t){return this[t]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9")}},t.getComputedStyle=function(t){return new o(t)}}(this),"forEach"in Array.prototype||(Array.prototype.forEach=function(t){if(void 0===this||null===this)throw new TypeError(this+"is not an object");if(!(t instanceof Function))throw new TypeError(t+" is not a function");for(var e=Object(this),n=arguments[1],o=e instanceof String?e.split(""):e,r=Math.max(Math.min(o.length,9007199254740991),0)||0,i=-1;++i<r;)i in o&&t.call(n,o[i],i,e)})}(),function(t){"use strict";function e(){this.nodes=[],this.eqsLength=0,this.widths=[],this.points=[],this.callback=void 0}function n(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,function(){return n.call(t,window.event)})}function o(t){return window.getComputedStyle(t,":before").getPropertyValue("content").slice(1,-1)}var r=function(t,e){return[].slice.call(t).concat([].slice.call(e))};e.prototype.query=function(e,n){var r,i=Object.getPrototypeOf(t);n&&"function"==typeof n&&(i.callback=n),e&&"number"!=typeof e?r=e.length:(e=i.nodes,r=i.nodesLength);var u,c=[],a=[];for(u=0;r>u;u++){var l=e[u].getBoundingClientRect(),s=l.width;void 0===s&&(s=l.right-l.left),c.push(s);try{a.push(i.sortObj(e[u].getAttribute("data-eq-pts")))}catch(f){try{a.push(i.sortObj(o(e[u])))}catch(d){a.push([{key:"",value:0}])}}}i.widths=c,i.points=a,e&&"number"!=typeof e?i.nodeWrites(e,c,a):n&&"function"!=typeof n?i.nodeWrites():window.requestAnimationFrame(i.nodeWrites)},e.prototype.nodeWrites=function(e){var n,o,r,i,u,c,a,l=Object.getPrototypeOf(t),s=l.widths,f=l.points;for(e&&"number"!=typeof e?i=e.length:(e=l.nodes,i=l.nodesLength),n=0;i>n;n++){var d=s[n],p=e[n],h=f[n],y=[],v=h.length;if(d<h[0].value)a=null;else if(d>=h[v-1].value){for(r=0;v>r;r++)y.push(h[r].key);a=y.join(" ")}else for(o=0;v>o;o++){var m=h[o],b=h[o+1];if(y.push(m.key),0===o&&d<m.value){a=null;break}if(void 0!==b&&void 0===b.value){y.push(b.key),a=y.join(" ");break}if(d>=m.value&&d<b.value){a=y.join(" ");break}}null===a?p.removeAttribute("data-eq-state"):p.setAttribute("data-eq-state",a),c=new CustomEvent("eqResize",{detail:a,bubbles:!0}),p.dispatchEvent(c)}l.callback&&(u=l.callback,l.callback=void 0,u(e))},e.prototype.refreshNodes=function(){var e=Object.getPrototypeOf(t),n=[];e.nodes=document.querySelectorAll("[data-eq-pts]"),n=o(document.querySelector("html")).split(", "),n.forEach(function(t){""!==t&&(e.nodes=r(e.nodes,document.querySelectorAll(t)))}),e.nodesLength=e.nodes.length},e.prototype.sortObj=function(t){for(var e=[],n=t.split(","),o=0;o<n.length;o++){var r=n[o].split(":");e.push({key:r[0].replace(/^\s+|\s+$/g,""),value:parseFloat(r[1])})}return e.sort(function(t,e){return t.value-e.value})},e.prototype.definePts=function(t,e){return e=e?e:{},e=JSON.stringify(e),e=e.substring(1,e.length-1),e=e.replace(/:/g,": "),e=e.replace(/,/g,", "),e=e.replace(/"/g,""),t.setAttribute("data-eq-pts",e),e},e.prototype.all=function(e){var n=Object.getPrototypeOf(t),o=e?!0:!1;n.refreshNodes(),o?n.query(void 0,e):window.requestAnimationFrame(n.query)},t=t||new e,n(window,"DOMContentLoaded",function(){t.all(!1)}),n(window,"load",function(){t.all(!0)}),n(window,"resize",function(){t.all(!0)}),"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("eqjs",function(){return t}):window.eqjs=t}(window.eqjs);
if(!window.greenidNoConflict1Loaded){window.greenidNoConflict1Loaded=true;greenidJQuery=jQuery.noConflict(true);if(typeof Handlebars!=="undefined"&&Handlebars!==null){window._Handlebars=Handlebars}}
var Handlebars=function(){var __module4__=function(){"use strict";var __exports__;function SafeString(string){this.string=string}SafeString.prototype.toString=function(){return""+this.string};__exports__=SafeString;return __exports__}();var __module3__=function(__dependency1__){"use strict";var __exports__={};var SafeString=__dependency1__;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]||"&amp;"}function extend(obj,value){for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){obj[key]=value[key]}}}__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return typeof value==="function"};if(isFunction(/x/)){isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};__exports__.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString){return string.toString()}else if(!string&&string!==0){return""}string=""+string;if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}__exports__.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}__exports__.isEmpty=isEmpty;return __exports__}(__module4__);var __module5__=function(){"use strict";var __exports__;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=" - "+line+":"+node.firstColumn}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(line){this.lineNumber=line;this.column=node.firstColumn}}Exception.prototype=new Error;__exports__=Exception;return __exports__}();var __module2__=function(__dependency1__,__dependency2__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var VERSION="1.3.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=4;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}__exports__.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Exception("Arg not supported with multiple helpers")}Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}},registerPartial:function(name,str){if(toString.call(name)===objectType){Utils.extend(this.partials,name)}else{this.partials[name]=str}}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Exception("Missing helper: '"+arg+"'")}});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;if(isFunction(context)){context=context.call(this)}if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(isArray(context)){if(context.length>0){return instance.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}});instance.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;if(isFunction(context)){context=context.call(this)}if(options.data){data=createFrame(options.data)}if(context&&typeof context==="object"){if(isArray(context)){for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=i===0;data.last=i===context.length-1}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=i===0}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context)){context=context.call(this)}if(!Utils.isEmpty(context))return options.fn(context)});instance.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,context)})}var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};__exports__.logger=logger;function log(level,obj){logger.log(level,obj)}__exports__.log=log;var createFrame=function(object){var obj={};Utils.extend(obj,object);return obj};__exports__.createFrame=createFrame;return __exports__}(__module3__,__module5__);var __module6__=function(__dependency1__,__dependency2__,__dependency3__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var COMPILER_REVISION=__dependency3__.COMPILER_REVISION;var REVISION_CHANGES=__dependency3__.REVISION_CHANGES;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}__exports__.checkRevision=checkRevision;function template(templateSpec,env){if(!env){throw new Exception("No environment passed to template")}var invokePartialWrapper=function(partial,name,context,helpers,partials,data){var result=env.VM.invokePartial.apply(this,arguments);if(result!=null){return result}if(env.compile){var options={helpers:helpers,partials:partials,data:data};partials[name]=env.compile(partial,{data:data!==undefined},env);return partials[name](context,options)}else{throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}};var container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=program(i,fn,data)}else if(!programWrapper){programWrapper=this.programs[i]=program(i,fn)}return programWrapper},merge:function(param,common){var ret=param||common;if(param&&common&&param!==common){ret={};Utils.extend(ret,common);Utils.extend(ret,param)}return ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var namespace=options.partial?options:env,helpers,partials;if(!options.partial){helpers=options.helpers;partials=options.partials}var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);if(!options.partial){env.VM.checkRevision(container.compilerInfo)}return result}}__exports__.template=template;function programWithDepth(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var prog=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args))};prog.program=i;prog.depth=args.length;return prog}__exports__.programWithDepth=programWithDepth;function program(i,fn,data){var prog=function(context,options){options=options||{};return fn(context,options.data||data)};prog.program=i;prog.depth=0;return prog}__exports__.program=program;function invokePartial(partial,name,context,helpers,partials,data){var options={partial:true,helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}__exports__.invokePartial=invokePartial;function noop(){return""}__exports__.noop=noop;return __exports__}(__module3__,__module5__,__module2__);var __module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var base=__dependency1__;var SafeString=__dependency2__;var Exception=__dependency3__;var Utils=__dependency4__;var runtime=__dependency5__;var create=function(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb};var Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__}(__module2__,__module4__,__module5__,__module3__,__module6__);var __module7__=function(__dependency1__){"use strict";var __exports__;var Exception=__dependency1__;function LocationInfo(locInfo){locInfo=locInfo||{};this.firstLine=locInfo.first_line;this.firstColumn=locInfo.first_column;this.lastColumn=locInfo.last_column;this.lastLine=locInfo.last_line}var AST={ProgramNode:function(statements,inverseStrip,inverse,locInfo){var inverseLocationInfo,firstInverseNode;if(arguments.length===3){locInfo=inverse;inverse=null}else if(arguments.length===2){locInfo=inverseStrip;inverseStrip=null}LocationInfo.call(this,locInfo);this.type="program";this.statements=statements;this.strip={};if(inverse){firstInverseNode=inverse[0];if(firstInverseNode){inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn};this.inverse=new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)}else{this.inverse=new AST.ProgramNode(inverse,inverseStrip)}this.strip.right=inverseStrip.left}else if(inverseStrip){this.strip.left=inverseStrip.right}},MustacheNode:function(rawParams,hash,open,strip,locInfo){LocationInfo.call(this,locInfo);this.type="mustache";this.strip=strip;if(open!=null&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped=escapeFlag!=="{"&&escapeFlag!=="&"}else{this.escaped=!!open}if(rawParams instanceof AST.SexprNode){this.sexpr=rawParams}else{this.sexpr=new AST.SexprNode(rawParams,hash)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo);this.type="sexpr";this.hash=hash;var id=this.id=rawParams[0];var params=this.params=rawParams.slice(1);var eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,context,strip,locInfo){LocationInfo.call(this,locInfo);this.type="partial";this.partialName=partialName;this.context=context;this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){LocationInfo.call(this,locInfo);if(mustache.sexpr.id.original!==close.path.original){throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this)}this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;this.strip={left:mustache.strip.left,right:close.strip.right};(program||inverse).strip.left=mustache.strip.right;(inverse||program).strip.right=close.strip.left;if(inverse&&!program){this.isInverse=true}},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="content";this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo);this.type="hash";this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo);this.type="ID";var original="",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||part==="."||part==="this"){if(dig.length>0){throw new Exception("Invalid path: "+original,this)}else if(part===".."){depth++}else{this.isScoped=true}}else{dig.push(part)}}this.original=original;this.parts=dig;this.string=dig.join(".");this.depth=depth;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo);this.type="PARTIAL_NAME";this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo);this.type="DATA";this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="STRING";this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo);this.type="INTEGER";this.original=this.integer=integer;this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo);this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true"},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo);this.type="comment";this.comment=comment}};__exports__=AST;return __exports__}(__module5__);var __module9__=function(){"use strict";var __exports__;var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);break;case 2:return new yy.ProgramNode([],this._$);break;case 3:this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:this.$=new yy.ProgramNode([],this._$);break;case 8:this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);break;case 13:this.$=$$[$0];break;case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 21:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=true;this.$=$$[$0-1];break;case 32:this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$);break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};function stripFlags(open,close){return{left:open.charAt(2)==="~",right:close.charAt(0)==="~"||close.charAt(1)==="~"}}var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}return this},more:function(){this._more=true;return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else{this.begin("mu")}if(yy_.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:strip(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:strip(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 32;break;case 24:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:yy_.yytext=strip(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();__exports__=handlebars;return __exports__}();var __module8__=function(__dependency1__,__dependency2__){"use strict";var __exports__={};var parser=__dependency1__;var AST=__dependency2__;__exports__.parser=parser;function parse(input){if(input.constructor===AST.ProgramNode){return input}parser.yy=AST;return parser.parse(input)}__exports__.parse=parse;return __exports__}(__module9__,__module7__);var __module10__=function(__dependency1__){"use strict";var __exports__={};var Exception=__dependency1__;function Compiler(){}__exports__.Compiler=Compiler;Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,out=[],params,param;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode.opcode==="DECLARE"){out.push("DECLARE "+opcode.name+"="+opcode.value)}else{params=[];for(var j=0;j<opcode.args.length;j++){param=opcode.args[j];if(typeof param==="string"){param='"'+param.replace("\n","\\n")+'"'}params.push(param)}out.push(opcode.opcode+" "+params.join(" "))}}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false}for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length){return false}for(var j=0;j<opcode.args.length;j++){if(opcode.args[j]!==otherOpcode.args[j]){return false}}}len=this.children.length;if(other.children.length!==len){return false}for(i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false}}return true},guid:0,compile:function(program,options){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,if:true,unless:true,with:true,log:true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name]}}return this.accept(program)},accept:function(node){var strip=node.strip||{},ret;if(strip.left){this.opcode("strip")}ret=this[node.type](node);if(strip.right){this.opcode("strip")}return ret},program:function(program){var statements=program.statements;for(var i=0,l=statements.length;i<l;i++){this.accept(statements[i])}this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue}else{this.addDepth(depth-1)}}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program){program=this.compileProgram(program)}if(inverse){inverse=this.compileProgram(inverse)}var sexpr=mustache.sexpr;var type=this.classifySexpr(sexpr);if(type==="helper"){this.helperSexpr(sexpr,program,inverse)}else if(type==="simple"){this.simpleSexpr(sexpr);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(sexpr,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];if(this.options.stringParams){if(val.depth){this.addDepth(val.depth)}this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",val.stringModeValue,val.type);if(val.type==="sexpr"){this.sexpr(val)}}else{this.accept(val)}this.opcode("assignToHash",pair[0])}this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=true;if(partial.context){this.ID(partial.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",partialName.name);this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr);if(mustache.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;if(id.type==="DATA"){this.DATA(id)}else if(id.parts.length){this.ID(id)}else{this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];if(this.options.knownHelpers[name]){this.opcode("invokeKnownHelper",params.length,name)}else if(this.options.knownHelpersOnly){throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr)}else{this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);if(type==="simple"){this.simpleSexpr(sexpr)}else if(type==="helper"){this.helperSexpr(sexpr)}else{this.ambiguousSexpr(sexpr)}},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);var name=id.parts[0];if(!name){this.opcode("pushContext")}else{this.opcode("lookupOnContext",id.parts[0])}for(var i=1,l=id.parts.length;i<l;i++){this.opcode("lookup",id.parts[i])}},DATA:function(data){this.options.data=true;if(data.id.isScoped||data.id.depth){throw new Exception("Scoped data references are not supported: "+data.original,data)}this.opcode("lookupData");var parts=data.id.parts;for(var i=0,l=parts.length;i<l;i++){this.opcode("lookup",parts[i])}},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){if(depth===0){return}if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper;var isEligible=sexpr.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];if(options.knownHelpers[name]){isHelper=true}else if(options.knownHelpersOnly){isEligible=false}}if(isHelper){return"helper"}else if(isEligible){return"ambiguous"}else{return"simple"}},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth)}this.opcode("getContext",param.depth||0);this.opcode("pushStringParam",param.stringModeValue,param.type);if(param.type==="sexpr"){this.sexpr(param)}}else{this[param.type](param)}}},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(sexpr.hash){this.hash(sexpr.hash)}else{this.opcode("emptyHash")}return params}};function precompile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode){throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}__exports__.precompile=precompile;function compile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode){throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}var compiled;function compileInput(){var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);var templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,true);return env.template(templateSpec)}return function(context,options){if(!compiled){compiled=compileInput()}return compiled.call(this,context,options)}}__exports__.compile=compile;return __exports__}(__module5__);var __module11__=function(__dependency1__,__dependency2__){"use strict";var __exports__;var COMPILER_REVISION=__dependency1__.COMPILER_REVISION;var REVISION_CHANGES=__dependency1__.REVISION_CHANGES;var log=__dependency1__.log;var Exception=__dependency2__;function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;if(parent.indexOf("depth")===0){wrap=true}if(/^[0-9]+$/.test(name)){ret=parent+"["+name+"]"}else if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){ret=parent+"."+name}else{ret=parent+"['"+name+"']"}if(wrap){return"("+parent+" && "+ret+")"}else{return ret}},compilerInfo:function(){var revision=COMPILER_REVISION,versions=REVISION_CHANGES[revision];return"this.compilerInfo = ["+revision+",'"+versions+"'];\n"},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";"}else{return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};log("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(var l=opcodes.length;this.i<l;this.i++){opcode=opcodes[this.i];if(opcode.opcode==="DECLARE"){this[opcode.name]=opcode.value}else{this[opcode.opcode].apply(this,opcode.args)}if(opcode.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new Exception("Compile completed with content left on stack")}return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace;var copies="helpers = this.merge(helpers, "+namespace+".helpers);";if(this.environment.usePartial){copies=copies+" partials = this.merge(partials, "+namespace+".partials);"}if(this.options.data){copies=copies+" data = data || {};"}out.push(copies)}else{out.push("")}if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer())}else{out.push("")}this.lastContext=0;this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ")}if(!this.isChild){for(var alias in this.context.aliases){if(this.context.aliases.hasOwnProperty(alias)){this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i])}var source=this.mergeSource();if(!this.isChild){source=this.compilerInfo()+source}if(asObject){params.push(source);return Function.apply(this,params)}else{var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";log("debug",functionSource+"\n\n");return functionSource}},mergeSource:function(){var source="",buffer;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer){if(buffer){buffer=buffer+"\n    + "+line.content}else{buffer=line.content}}else{if(buffer){source+="buffer += "+buffer+";\n  ";buffer=undefined}source+=line+"\n  "}}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);this.replaceStack(function(current){params.splice(1,0,current);return"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current);this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){if(this.pendingContent){content=this.pendingContent+content}if(this.stripNext){content=content.replace(/^\s+/,"")}this.pendingContent=content},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth}},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext);this.pushString(type);if(type!=="sexpr"){if(typeof string==="string"){this.pushString(string)}else{this.pushStackLiteral(string)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+hash.contexts.join(",")+"}");this.push("{"+hash.types.join(",")+"}")}this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){this.inlineStack.push(expr);return expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid))}else{this.pushStackLiteral(null)}},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,true);var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var lookup="helper = "+helper.name+" || "+nonHelper;if(helper.paramsInit){lookup+=","+helper.paramsInit}this.push("("+lookup+",helper "+"? helper.call("+helper.callParams+") "+": helperMissing.call("+helper.helperMissingParams+"))");if(!isRoot){this.flushInline()}},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var nextStack=this.nextStack();if(helper.paramsInit){this.pushSource(helper.paramsInit)}this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }");this.pushSource("else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var value=this.popStack(),context,type;if(this.options.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context){hash.contexts.push("'"+key+"': "+context)}if(type){hash.types.push("'"+key+"': "+type)}hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler;var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push("");index=this.context.programs.length;child.index=index;child.name="program"+index;this.context.programs[index]=compiler.compile(child,options,this.context);this.context.environments[index]=child}else{child.index=index;child.name="program"+index}}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i}}},programExpression:function(guid){this.context.aliases.self="this";if(guid==null){return"self.noop"}var child=this.environment.children[guid],depths=child.depths.list,depth;var programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("depth0")}else{programParams.push("depth"+(depth-1))}}return(depths.length===0?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name);this.pushSource(name+" = "+val+";")},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(source){this.source.push(source)}},pushStack:function(item){this.flushInline();var stack=this.incrStack();if(item){this.pushSource(stack+" = "+item+";")}this.compileStack.push(stack);return stack},replaceStack:function(callback){var prefix="",inline=this.isInline(),stack,createdStack,usedLiteral;if(inline){var top=this.popStack(true);if(top instanceof Literal){stack=top.value;usedLiteral=true}else{createdStack=!this.stackSlot;var name=!createdStack?this.topStackName():this.incrStack();prefix="("+this.push(name)+" = "+top+"),";stack=this.topStack()}}else{stack=this.topStack()}var item=callback.call(this,stack);if(inline){if(!usedLiteral){this.popStack()}if(createdStack){this.stackSlot--}this.push("("+prefix+item+")")}else{if(!/^stack/.test(stack)){stack=this.nextStack()}this.pushSource(stack+" = ("+prefix+item+");")}return stack},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry)}else{this.pushStack(entry)}}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal){return item.value}else{if(!inline){if(!this.stackSlot){throw new Exception("Invalid stack pop")}this.stackSlot--}return item}},topStack:function(wrapped){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(!wrapped&&item instanceof Literal){return item.value}else{return item}},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[],paramsInit=this.setupParams(paramSize,params,missingParams);var foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupOptions:function(paramSize,params){var options=[],contexts=[],types=[],param,inverse,program;options.push("hash:"+this.popStack());if(this.options.stringParams){options.push("hashTypes:"+this.popStack());options.push("hashContexts:"+this.popStack())}inverse=this.popStack();program=this.popStack();if(program||inverse){if(!program){this.context.aliases.self="this";program="self.noop"}if(!inverse){this.context.aliases.self="this";inverse="self.noop"}options.push("inverse:"+inverse);options.push("fn:"+program)}for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){types.push(this.popStack());contexts.push(this.popStack())}}if(this.options.stringParams){options.push("contexts:["+contexts.join(",")+"]");options.push("types:["+types.join(",")+"]")}if(this.options.data){options.push("data:data")}return options},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";if(useRegister){this.useRegister("options");params.push("options");return"options="+options}else{params.push(options);return""}}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true}JavaScriptCompiler.isValidJavaScriptVariableName=function(name){if(!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)){return true}return false};__exports__=JavaScriptCompiler;return __exports__}(__module2__,__module5__);var __module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var Handlebars=__dependency1__;var AST=__dependency2__;var Parser=__dependency3__.parser;var parse=__dependency3__.parse;var Compiler=__dependency4__.Compiler;var compile=__dependency4__.compile;var precompile=__dependency4__.precompile;var JavaScriptCompiler=__dependency5__;var _create=Handlebars.create;var create=function(){var hb=_create();hb.compile=function(input,options){return compile(input,options,hb)};hb.precompile=function(input,options){return precompile(input,options,hb)};hb.AST=AST;hb.Compiler=Compiler;hb.JavaScriptCompiler=JavaScriptCompiler;hb.Parser=Parser;hb.parse=parse;return hb};Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__}(__module1__,__module7__,__module8__,__module10__,__module11__);return __module0__}();
if(!window.greenidNoConflict2Loaded){window.greenidNoConflict2Loaded=true;var greenidHandlebars=Handlebars;if(typeof window._Handlebars!=="undefined"&&window._Handlebars!==null){Handlebars=window._Handlebars}}
if(!window.greenidStaticConfigLoaded){window.greenidStaticConfigLoaded=true;var greenidStaticConfig=function(){"use strict";var c={};c.host="NULLHOST";c.origin="simpleui";c.debug=false;c.clientLogLevel="TRACE";c.showLocation=false;c.showDialogWhenNoSourcesLeft=true;c.mobile=false;c.hostedMode="";c.can_log=typeof console!=="undefined"&&typeof console.log!=="undefined";function getErrorObject(){try{throw Error("")}catch(err){return err}}var module={};module.urlMap={sandbox:{url:"https://sandbox.vixverify.com/df",businessVerificationURL:"http://local.vixverify.com:9050/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"XDF5GwuvPsLuJ22NcfD9cRnWDaaPkGji"},sandbox2:{url:"https://sandbox2.vixverify.com/df",businessVerificationURL:"http://local.vixverify.com:9050/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"XDF5GwuvPsLuJ22NcfD9cRnWDaaPkGji"},sandbox3:{url:"https://sandbox3.vixverify.com/df",businessVerificationURL:"http://local.vixverify.com:9050/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"XDF5GwuvPsLuJ22NcfD9cRnWDaaPkGji"},dev:{url:"https://local.vixverify.com/df",businessVerificationURL:"https://local.vixverify.com/vixbiz/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"q30gjhmhnInCiZKvejgCWDRTFvT3wbbj"},"local-dev":{url:"https://local.vixverify.com/df",businessVerificationURL:"https://local.vixverify.com/vixbiz/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"q30gjhmhnInCiZKvejgCWDRTFvT3wbbj"},local:{url:"https://local.vixverify.com/df",businessVerificationURL:"https://local.vixverify.com/vixbiz/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"q30gjhmhnInCiZKvejgCWDRTFvT3wbbj"},vixlocal:{url:"https://local.vixverify.com/df",businessVerificationURL:"https://local.vixverify.com/vixbiz/",active:true,devOnly:true,harmonyUsername:"web",harmonyPassword:"q30gjhmhnInCiZKvejgCWDRTFvT3wbbj"},test:{url:"https://simpleui-test-au.vixverify.com/df",businessVerificationURL:"https://simpleui-test-au.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-test":{url:"https://simpleui-test-au.vixverify.com/df",businessVerificationURL:"https://test-au.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-stag":{url:"https://simpleui-staging.vixverify.com/df",businessVerificationURL:"https://staging.vixverify.com/vixbiz",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-dev1":{url:"https://simpleui-dev1.vixverify.com/df",businessVerificationURL:"https://dev1.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-stag2":{url:"https://simpleui-staging2.vixverify.com/df",businessVerificationURL:"https://staging2.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-dev2":{url:"https://simpleui-dev2.vixverify.com/df",businessVerificationURL:"https://dev2.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-dev3":{url:"https://simpleui-dev3.vixverify.com/df",businessVerificationURL:"https://dev3.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-dev4":{url:"https://simpleui-dev4.vixverify.com/df",businessVerificationURL:"https://dev4.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"},"au-test-vv":{url:"https://simpleui-test-au.vixverify.com/df",active:true},prod:{url:"https://simpleui-au.vixverify.com/df",active:true},"au-prod":{url:"https://simpleui-au.vixverify.com/df",businessVerificationURL:"https://au.vixverify.com/vixbiz/",active:true,harmonyUsername:"web_bv",harmonyPassword:"gu8KCeWzTZG7lf0fPVBFtxCDKVUeW2nk"}};module.properties={};module.divNames={idPrefix:"greenid-",mainDiv:"greenid-container",errorDiv:"greenid-error-content",introDiv:"greenid-intro-content",introHeading:"greenid-intro-content h1",introWording:"greenid-intro-words",introAlert:"greenid-intro-content .greenid-alert",sourceContentDiv:"greenid-source-content",sourceHeaderDiv:"greenid-source-header",sourceTitleDiv:"greenid-source-title",sourceListDiv:"greenid-source-list-container",optionListDiv:"greenid-option-list",sourceListId:"greenid-option-list #greenid-sources .list-group-item a",sourceBodyDiv:"greenid-source-body",dlStateSelectId:"greenid-rego-state",modalDiv:"greenid-wait-modal",modalDivClass:"greenid-modal",modalTextDiv:"greenid-modal-text",modalBackdropDiv:"greenid-modal-backdrop",modalBackdropBootstrap:"greenid-modal-backdrop",alertClass:"greenid-alert",alertErrorClass:"greenid-alert-danger",alertLockoutClass:"greenid-alert-lockout",completeLaterModal:"greenid-completelater",errorModal:"greenid-error",postofficeSourceDiv:"postoffice-source",biometricDiv:"greenid-biometric-content"};module.ADDRESS_STATE="";module.uploadTypes={};module.setServerProperties=function(properties){if(properties!=null&&properties!=="undefined"){module.properties=properties;module.updateDocuploadProperties(properties);module.ADDRESS_STATE=properties["addressState"]}else{module.properties={}}};module.updateDocuploadProperties=function(properties){if(properties!=null&&properties!=="undefined"){if(module.properties!=null&&module.properties!=="undefined"){module.properties["group.A.choices"]=properties["group.A.choices"];var uploadlist=[];var j=0;for(var i=0;i<properties["group.A.choices"];i++){j=i+1;uploadlist[i]={};uploadlist[i].name=properties["group.A."+j];module.properties["group.A."+j]=properties["group.A."+j]}module.uploadTypes=uploadlist}}};module.showPostOffice=function(){return module.properties["showPostOfficeForm"]};module.remoteLogLevel=function(){if(typeof module.properties["simpleui.remote.log.level"]==="undefined"){return"INFO"}return module.properties["simpleui.remote.log.level"]};module.logLevel=function(){if(typeof c.clientLogLevel==="undefined"){return"INFO"}return c.clientLogLevel};module.getHostedMode=function(){return c.hostedMode};module.setHostedModeScansFirst=function(){c.hostedMode="ScansFirst"};module.setHostedModeReturningUser=function(){c.hostedMode="ReturningUser"};module.setHostedModeFormFirst=function(){c.hostedMode="FormFirst"};module.showDialogWhenNoSourcesLeft=function(){return c.showDialogWhenNoSourcesLeft};module.get=function(name){return c[name]};module.setEnvironment=function(environmentName,opts){var validEnv=false;if(environmentName!=null){var lowerName=environmentName.toLowerCase();var urlSettings=module.urlMap[lowerName];if(typeof urlSettings!="undefined"){var active=false;if(typeof urlSettings.active=="undefined"){active=true}else{active=urlSettings.active}if(active){validEnv=true;c.host=urlSettings.url;if(typeof urlSettings.debug!="undefined"){c.debug=urlSettings.debug}if(typeof urlSettings.clientLogLevel!="undefined"){c.clientLogLevel=urlSettings.clientLogLevel}}}if(opts!==undefined){if(opts.debug!=null){c.debug=opts.debug}if(opts.origin!=null){c.origin=opts.origin}if(opts.logLevel!=null){c.clientLogLevel=opts.logLevel}if(opts.showLocation!=null){c.showLocation=opts.showLocation}if(opts.showDialogWhenNoSourcesLeft!=null){c.showDialogWhenNoSourcesLeft=opts.showDialogWhenNoSourcesLeft}if(opts.mobile!=null){c.mobile=opts.mobile}}}if(!validEnv){var envList="";var i=0;for(var key in module.urlMap){if(module.urlMap.hasOwnProperty(key)){if(!module.urlMap[key].devOnly&&module.urlMap[key].active){if(i>0)envList+=", ";envList+='"'+key+'"';i++}}}throw new Error("Invalid environment specified in edentiti.setup.  Valid values are "+envList+".")}};module.setDebugMode=function(value){c.debug=value};module.debugEnabled=function(){return c.debug};module.log=function(){if(!c.debug||!c.can_log){return}if(typeof c.showLocation!="undefined"&&c.showLocation){var err=getErrorObject();var caller_line=err.stack.split("\n")[4];var index=caller_line.indexOf("at ");var clean=caller_line.slice(index+2,caller_line.length);var newArgs=new Array;newArgs[0]=clean;var i=1;for(var key in arguments){newArgs[i++]=arguments[key]}console.log.apply(console,newArgs)}else{if(console.log.apply){console.log.apply(console,arguments)}else{var log=Function.prototype.bind.call(console.log,console);log.apply(console,arguments)}}};return module}()}
if(!window.greenidLogLoaded){window.greenidLogLoaded=true;var greenidLog=function($,staticconfig){"use strict";var INFO="INFO";var WARN="WARN";var ERROR="ERROR";var DEBUG="DEBUG";var TRACE="TRACE";var LOG_URL="/log";var async=true;var dataType="json";var contentType="text/plain";var numToCache=10;var logCache=[];function shouldLog(logEventLevel,remoteLogLevel){if(remoteLogLevel==="TRACE")return true;if(remoteLogLevel==="DEBUG"){if(logEventLevel!="TRACE"){return true}}if(remoteLogLevel==="INFO"){if(logEventLevel!="TRACE"&&logEventLevel!="DEBUG"){return true}}if(remoteLogLevel==="WARN"){if(logEventLevel!="TRACE"&&logEventLevel!="DEBUG"&&logEventLevel!="INFO"){return true}}if(remoteLogLevel==="ERROR"){if(logEventLevel==="ERROR"){return true}}return false}function addZero(x,n){while(x.toString().length<n){x="0"+x}return x}function getDateTime(){var now=new Date;var year=now.getFullYear();var month=now.getMonth()+1;var day=now.getDate();var hour=now.getHours();var minute=now.getMinutes();var second=now.getSeconds();var millisecond=addZero(now.getMilliseconds(),3);if(month.toString().length==1){var month="0"+month}if(day.toString().length==1){var day="0"+day}if(hour.toString().length==1){var hour="0"+hour}if(minute.toString().length==1){var minute="0"+minute}if(second.toString().length==1){var second="0"+second}var dateTime=year+"-"+month+"-"+day+" "+hour+":"+minute+":"+second+":"+millisecond;return dateTime}function uuid(){var uuid="",i,random;for(i=0;i<32;i++){random=Math.random()*16|0;if(i==8||i==12||i==16||i==20){uuid+="-"}uuid+=(i==12?4:i==16?random&3|8:random).toString(16)}return uuid}var module={};module.verificationId="";module.verificationToken="";module.accountId="";module.version="";module.logid=Math.random().toString(36).substr(2,8);module.currentPOI="";module.poiLastTime;module.FUNCTION="function";module.SOURCE="source";module.MESSAGE="message";module.OVERALL_STATE="overallState";module.FORM_ID="formId";module.CURRENT_CHECK_STATE="currentCheckState";module.VERIFICATION_TOKEN="verificationToken";module.ACCOUNT_ID="accountId";module.logSessionId=uuid();module.poiOrderList={"Hosted-404":-404,"Hosted-Landing-Show":-100,"Hosted-Worker-Show-Scans":-50,"Hosted-Worker-Show-Form":-52,"Hosted-Worker-Show-Returning-User":-54,HandleStartSuccess:10,showBiometricCapture:20,ProcessOverview:100,DocumentSelection:200,DocumentCaptureStartup:300,"DocumentCapture-Front-Smart":400,"DocumentCapture-Front-Manual":440,"DocumentCapture-Front-FileUpload":460,"DocumentCapture-Front-Review":500,"DocumentCapture-Front-TripleScan":550,"DocumentCapture-Back-Smart":700,"DocumentCapture-Back-Manual":740,"DocumentCapture-Back-FileUpload":760,"DocumentCapture-Back-Review":800,"DocumentCapture-Back-TripleScan":850,"DocumentCapture-Selfie-Manual":1e3,"DocumentCapture-Selfie-FileUpload":1040,"DocumentCapture-Selfie-Liveness":1060,"DocumentCapture-Selfie-Unavailable":1100,"DocumentCapture-Selfie-Review":1200,"DocumentCapture-Selfie-TripleScan":1250,"OCRConfirmation-Loading":1500,"OCRConfirmation-FirstPage":1600,"OCRConfirmation-SecondPage":1700,"OCRConfirmation-Register":1800,"greenID-Web-Complete":9999,"Hosted-Exit-Show":10100,"Hosted-Error-Exit-Show":10150,"Hosted-Exit-Redirect":10200,"Hosted-Cancel-Show":10300};module.getPOIorder=function(poiName){if(module.poiOrderList[poiName]){return module.poiOrderList[poiName]}return 0};module.rlog=function(level,messageObject,enableLocal,enableRemote){var outMessage={};var strMessage="";if(staticconfig.get("host")==="NULLHOST"){enableRemote=false;if(enableLocal){staticconfig.log("WARN: No remote log host configured")}}if(module.verificationToken!==""){strMessage="verificationToken="+module.verificationToken+" "}if(typeof messageObject==="string"){outMessage.message=messageObject;strMessage=messageObject}else{for(var key in messageObject){if(messageObject.hasOwnProperty(key)){strMessage+=key+"="+messageObject[key]+" ";outMessage[key]=""+messageObject[key]}}}strMessage+=" logSessionId="+module.logSessionId;if(enableLocal){if(shouldLog(level,staticconfig.logLevel())){staticconfig.log(level+": "+strMessage)}}if(enableRemote){if(shouldLog(level,staticconfig.remoteLogLevel())){outMessage.verificationId=module.verificationId;outMessage.verificationToken=module.verificationToken;outMessage.accountId=module.accountId;outMessage.version=module.version;outMessage.logId=module.logid;outMessage.level=level;outMessage.logSessionId=module.logSessionId;outMessage.datetime=getDateTime();if(logCache.length<numToCache){logCache.push(outMessage)}if(logCache.length>=numToCache||level===ERROR){module.flushRemoteLogs()}}}};module.flushRemoteLogs=function(object){var packet=JSON.stringify(logCache);$.ajax({type:"POST",url:staticconfig.get("host")+LOG_URL,async:async,data:packet,cache:false,contentType:contentType,dataType:dataType,processData:false});logCache=[]};module.local=function(object){module.rlog(INFO,object,true,false)};module.l=function(sourceName,message){var event=module.createEvent(sourceName,message);module.local(event)};module.info=function(object){module.rlog(INFO,object,true,true)};module.i=function(sourceName,message){var event=module.createEvent(sourceName,message);module.info(event)};module.trace=function(object){module.rlog(TRACE,object,true,true)};module.t=function(sourceName,message){var event=module.createEvent(sourceName,message);module.trace(event)};module.debug=function(object){module.rlog(DEBUG,object,true,true)};module.d=function(sourceName,message){var event=module.createEvent(sourceName,message);module.debug(event)};module.error=function(object){module.rlog(ERROR,object,true,true)};module.e=function(sourceName,message){var event=module.createEvent(sourceName,message);module.error(event)};module.warn=function(object){module.rlog(WARN,object,true,true)};module.w=function(sourceName,message){var event=module.createEvent(sourceName,message);module.warn(event)};module.setAccount=function(account){module.accountId=account};module.setVersion=function(theVersion){module.version=theVersion};module.setToken=function(token){module.verificationToken=token};module.createEvent=function(sourceName,message){var event={};if(sourceName!==""){event[module.SOURCE]=sourceName}event[module.MESSAGE]=message;return event};module.getPlatformFromUserAgent=function(agent){if(agent){if(agent.indexOf("Windows")>=0){return"Windows"}else if(agent.indexOf("iOS")>=0||agent.indexOf("iPhone OS")>=0||agent.indexOf("iPad OS")>=0){return"iOS"}else if(agent.indexOf("Android")>=0){return"Android"}else if(agent.indexOf("macOS")>=0||agent.indexOf("Mac OS X")>=0){return"macOS"}}return"unknown"};module.earlyLogPointOfInterest=function(envir,poi,accId,verifT,attId){greenidStaticConfig.setEnvironment(envir);module.accountId=accId;if(verifT){module.verificationToken=verifT}module.logPointOfInterest(poi,accId,verifT,attId);module.flushRemoteLogs()};module.logPointOfInterest=function(poi,accId,verifT,attId){if(poi!=module.currentPOI){var event={};event[module.ACCOUNT_ID]=accId;event[module.VERIFICATION_TOKEN]=verifT;event["attemptId"]=attId;event["userAgent"]=navigator.userAgent;event["platform"]=module.getPlatformFromUserAgent(navigator.userAgent);if(module.currentPOI!=""){var timeNow=(new Date).getTime();var timeSpent=timeNow-module.poiLastTime;event[module.MESSAGE]="greenID Web - End workflow point";event["pointOfInterest"]=module.currentPOI;event["poiOrder"]=module.getPOIorder(module.currentPOI);event["timeTakenSeconds"]=Math.round(timeSpent/10)/100;module.info(event);delete event.timeTakenSeconds}event[module.MESSAGE]="greenID Web - Start workflow point";event["pointOfInterest"]=poi;event["poiOrder"]=module.getPOIorder(poi);module.info(event);module.poiLastTime=(new Date).getTime();module.currentPOI=poi}};return module}(greenidJQuery,greenidStaticConfig)}
if(!window.greenidMobileLogLoaded){window.greenidMobileLogLoaded=true;var greenidMobileLog=function(log){"use strict";var module={};var AJAX_METHOD="ajaxMethod";var AJAX_RESULT="ajaxResult";var CURRENT_STEP="currentStep";var ATTEMPT_ID="attemptId";var VERIFICATION_TOKEN="verificationToken";var TOTAL_TIME="totalTime";var TOTAL_STEP="totalNumberOfSteps";var TIME_STAMP="time";const GET_VERIFICATION_TOKEN="getVerificationToken";const GET_DYNAMIC_CONFIG="getDynamicConfig";const RETURN_USER_SET_UP="returnUserSetup";const SHOULD_CAPTURE_BACK_OF_DOCUMENT="shouldCaptureBackOfDocument";const HAS_REGISTRATION="mobileVerificationHasRegistration";const GET_SOURCES="getSources";const BUILD_DOC_SELECT_CONTEXT="buildDocSelectContext";const LOAD_CARD_TYPE="#greenid-so-doc-select";const INTRO_TO_TAKE_PHOTO_OF_DOC="#greenid-so-ocr-intro";const TAKE_PHOTO_OF_DOC="takePhotoOfDoc";const UPLOAD_PHOTO_OF_DOC="uploadPhotoOfDoc";const OCR_PHOTO_OF_DOC="ocrPhotoOfDoc";const INTRO_TO_TAKE_SELFIE="#greenid-so-selfie-intro";const TAKE_SELFIE="takeSelfie";const UPLOAD_SELFIE="uploadSelfie";const OCR_SELFIE="ocrSelfie";const EXTRACT_OCR_DATA="doExtractOCRData";const SHOW_CONFIRMATION_PAGE="#greenid-so-confirm-details";const SHOW_ADDITIONAL_CONFIRMATION_PAGE="#greenid-so-verify";const CONFIRMATION_FIELD_PRE_VALIDATION="validateConfirmationFormAndStartTransition";const SUBMIT_REGISTRATION="submitRegistration";const SET_FIELDS="setFields";const EXTRACT_FINISH_AUTH_DETAILS="extractFinishAuthDetails";const GET_SUMMARY_DATA="getSummaryDataAndShowTemplate";const APP_FINISH="#app-finish-details";module.GET_VERIFICATION_TOKEN=GET_VERIFICATION_TOKEN;module.GET_DYNAMIC_CONFIG=GET_DYNAMIC_CONFIG;module.RETURN_USER_SET_UP=RETURN_USER_SET_UP;module.SHOULD_CAPTURE_BACK_OF_DOCUMENT=SHOULD_CAPTURE_BACK_OF_DOCUMENT;module.HAS_REGISTRATION=HAS_REGISTRATION;module.BUILD_DOC_SELECT_CONTEXT=BUILD_DOC_SELECT_CONTEXT;module.LOAD_CARD_TYPE=LOAD_CARD_TYPE;module.INTRO_TO_TAKE_PHOTO_OF_DOC=INTRO_TO_TAKE_PHOTO_OF_DOC;module.TAKE_PHOTO_OF_DOC=TAKE_PHOTO_OF_DOC;module.UPLOAD_PHOTO_OF_DOC=UPLOAD_PHOTO_OF_DOC;module.OCR_PHOTO_OF_DOC=OCR_PHOTO_OF_DOC;module.INTRO_TO_TAKE_SELFIE=INTRO_TO_TAKE_SELFIE;module.TAKE_SELFIE=TAKE_SELFIE;module.UPLOAD_SELFIE=UPLOAD_SELFIE;module.OCR_SELFIE=OCR_SELFIE;module.EXTRACT_OCR_DATA=EXTRACT_OCR_DATA;module.SHOW_CONFIRMATION_PAGE=SHOW_CONFIRMATION_PAGE;module.SHOW_ADDITIONAL_CONFIRMATION_PAGE=SHOW_ADDITIONAL_CONFIRMATION_PAGE;module.CONFIRMATION_FIELD_PRE_VALIDATION=CONFIRMATION_FIELD_PRE_VALIDATION;module.SUBMIT_REGISTRATION=SUBMIT_REGISTRATION;module.SET_FIELDS=SET_FIELDS;module.EXTRACT_FINISH_AUTH_DETAILS=EXTRACT_FINISH_AUTH_DETAILS;module.GET_SUMMARY_DATA=GET_SUMMARY_DATA;module.APP_FINISH=APP_FINISH;module.GET_SOURCES=GET_SOURCES;var ERROR_MODAL_HEADING="errorModalHeading";var ERROR_MODAL_TEXT="errorModalText";var ERROR_MODAL_BUTTON="errorModalButton";var SHOW_ERROR_MODAL_PREFIX="show.error.modal";var SHOW_ERROR_MODAL="showErrorModal";var HAND_OFF="handoff";module.stepsEnum={};module.stepsEnum[GET_VERIFICATION_TOKEN]=1;module.stepsEnum[GET_DYNAMIC_CONFIG]=2;module.stepsEnum[RETURN_USER_SET_UP]=3;module.stepsEnum[SHOULD_CAPTURE_BACK_OF_DOCUMENT]=4;module.stepsEnum[HAS_REGISTRATION]=5;module.stepsEnum[GET_SOURCES]=6;module.stepsEnum[BUILD_DOC_SELECT_CONTEXT]=7;module.stepsEnum[LOAD_CARD_TYPE]=8;module.stepsEnum[INTRO_TO_TAKE_PHOTO_OF_DOC]=9;module.stepsEnum[TAKE_PHOTO_OF_DOC]=10;module.stepsEnum[UPLOAD_PHOTO_OF_DOC]=11;module.stepsEnum[OCR_PHOTO_OF_DOC]=12;module.stepsEnum[INTRO_TO_TAKE_SELFIE]=13;module.stepsEnum[TAKE_SELFIE]=14;module.stepsEnum[UPLOAD_SELFIE]=15;module.stepsEnum[OCR_SELFIE]=16;module.stepsEnum[EXTRACT_OCR_DATA]=17;module.stepsEnum[SHOW_CONFIRMATION_PAGE]=18;module.stepsEnum[SHOW_ADDITIONAL_CONFIRMATION_PAGE]=19;module.stepsEnum[CONFIRMATION_FIELD_PRE_VALIDATION]=20;module.stepsEnum[SUBMIT_REGISTRATION]=21;module.stepsEnum[SET_FIELDS]=22;module.stepsEnum[EXTRACT_FINISH_AUTH_DETAILS]=23;module.stepsEnum[GET_SUMMARY_DATA]=24;module.stepsEnum[APP_FINISH]=25;Object.freeze(module.stepsEnum);module.stepTotal=Object.keys(module.stepsEnum).length;module.currentStep="getVerificationToken";var FAULT_DATA="faultData";var faultFields=[FAULT_DATA];module.logInfo=function(functionName,method,customerId,verificationToken,attemptId,message){var logData=getStandardLogObject(functionName,method,customerId,verificationToken,attemptId,true);logData[log.MESSAGE]=message;log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logStartAjaxCall=function(functionName,method,customerId,verificationToken,attemptId,extraData){var logData=getStandardLogObject(functionName,method,customerId,verificationToken,attemptId,true);logData[log.MESSAGE]="Start Ajax Call "+functionName;for(var _len=arguments.length,args=Array(_len>6?_len-6:0),_key=6;_key<_len;_key++){args[_key-6]=arguments[_key]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logEndAjaxCall=function(functionName,method,customerId,verificationToken,attemptId,totalTime,extraData){var logData=getStandardLogObject(functionName,method,customerId,verificationToken,attemptId,false);logData[log.MESSAGE]="End Ajax Call "+functionName;logData[TOTAL_TIME]=totalTime;for(var _len2=arguments.length,args=Array(_len2>7?_len2-7:0),_key2=7;_key2<_len2;_key2++){args[_key2-7]=arguments[_key2]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logAjaxCallResponse=function(functionName,method,customerId,verificationToken,attemptId,result,extraData){var logData=getStandardLogObject(functionName,method,customerId,verificationToken,attemptId,false);logData[AJAX_RESULT]=result;if(result){logData[log.MESSAGE]=functionName+" Ajax Call GOOD "}else{logData[log.MESSAGE]=functionName+" Ajax Call return fault"}if(extraData){if(!result){for(var i=0;i<faultFields.length;i++){if(extraData.hasOwnProperty(faultFields[i])){logData[faultFields[i]]=extraData[faultFields[i]]}}}}log.setAccount(customerId);log.setToken(verificationToken);if(result){log.info(logData)}else{log.error(logData)}};module.logError=function(functionName,customerId,verificationToken,attemptId,error,errorConfig,extraData){var logData=getStandardLogObject(functionName,null,customerId,verificationToken,attemptId,false);if(error){logData["errorType"]=error.errorType;logData["errorDescription"]=error.errorDescription;logData["errorDescriptionCode"]=error.errorDescriptionCode}if(errorConfig){logData[SHOW_ERROR_MODAL]=errorConfig[SHOW_ERROR_MODAL];logData[HAND_OFF]=errorConfig[HAND_OFF];logData[ERROR_MODAL_HEADING]=errorConfig[ERROR_MODAL_HEADING];logData[ERROR_MODAL_TEXT]=errorConfig[ERROR_MODAL_TEXT];logData[ERROR_MODAL_BUTTON]=errorConfig[ERROR_MODAL_BUTTON]}log.setAccount(customerId);log.setToken(verificationToken);log.error(logData)};module.logStartTransitionStep=function(functionName,customerId,verificationToken,attemptId){var logData=getStandardLogObject(functionName,null,customerId,verificationToken,attemptId,true);logData[log.MESSAGE]="Start "+functionName;for(var _len3=arguments.length,args=Array(_len3>4?_len3-4:0),_key3=4;_key3<_len3;_key3++){args[_key3-4]=arguments[_key3]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logEndTransitionStep=function(functionName,customerId,verificationToken,attemptId){var logData=getStandardLogObject(functionName,null,customerId,verificationToken,attemptId,false);logData[log.MESSAGE]="End "+functionName;for(var _len4=arguments.length,args=Array(_len4>4?_len4-4:0),_key4=4;_key4<_len4;_key4++){args[_key4-4]=arguments[_key4]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logStartFunctionCall=function(functionName,customerId,verificationToken,attemptId){var logData=getStandardLogObject(functionName,null,customerId,verificationToken,attemptId,true);logData[log.MESSAGE]="Start Function Call "+functionName;for(var _len5=arguments.length,args=Array(_len5>4?_len5-4:0),_key5=4;_key5<_len5;_key5++){args[_key5-4]=arguments[_key5]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logEndFunctionCall=function(functionName,customerId,verificationToken,attemptId){var logData=getStandardLogObject(functionName,null,customerId,verificationToken,attemptId,false);logData[log.MESSAGE]="End Function Call "+functionName;for(var _len6=arguments.length,args=Array(_len6>4?_len6-4:0),_key6=4;_key6<_len6;_key6++){args[_key6-4]=arguments[_key6]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};module.logCacheCall=function(functionName,customerId,verificationToken,attemptId){var logData=getStandardLogObject(functionName,null,customerId,verificationToken,attemptId,false);logData[log.MESSAGE]="Load cache data for "+functionName;logData[CURRENT_STEP]=module.stepsEnum[module.currentStep];for(var _len7=arguments.length,args=Array(_len7>4?_len7-4:0),_key7=4;_key7<_len7;_key7++){args[_key7-4]=arguments[_key7]}logData=addArgsToLogObject(functionName,logData,args);log.setAccount(customerId);log.setToken(verificationToken);log.info(logData)};function getStandardLogObject(functionName,method,customerId,verificationToken,attemptId,updateCurrentStep){var logData={};logData[log.ACCOUNT_ID]=customerId;logData[log.FUNCTION]=functionName;if(method){logData[AJAX_METHOD]=method}logData[CURRENT_STEP]=module.stepsEnum[functionName];logData[TOTAL_STEP]=module.stepTotal;logData[VERIFICATION_TOKEN]=verificationToken;logData[ATTEMPT_ID]=attemptId;if(updateCurrentStep){module.currentStep=functionName}return logData}function addArgsToLogObject(functionName,logData,args){if(args){for(var i=0;i<args.length;i++){if(args.length%2===0){logData[args[i]]=args[i+1];i++}else{logData[functionName+"_extraData_"+i]=args[i]}}}return logData}return module}(greenidLog)}
if(!window.greenidErrorHandlerLoaded){window.greenidErrorHandlerLoaded=true;var greenidErrorHandler=function(mobilelog){"use strict";var module={};const STATUS_TEXT="statusText";const STATUS="status";const RESPONSE_TEXT="responseText";const UNKNOWN="unknownError";const TIMEOUT="timeout";const INTERNAL_SERVER_ERROR="Internal Server Error";const SERVICE_UNAVAILABLE="Service Unavailable";const FIELDVALIDATIONFAULT="FieldValidationFault";const USERIDINUSEFAULT="UserIdInUseFault";const CLIENTIDINUSEFAULT="ClientIdInUseFault";const INVALIDCUSTOMERIDFAULT="InvalidCustomerIdFault";const INVALIDACCOUNTIDFAULT="InvalidAccountIdFault";const INVALIDRULEIDFAULT="InvalidRuleIdFault";const SYSTEMFAULT="SystemFault";const CERTIFICATEFAULT="InvalidCertificateFault";const PASSWORDFAULT="InvalidPasswordFault";const USERIDNOTFOUNDFAULT="UserIdNotFoundFault";const CLIENTIDNOTFOUNDFAULT="ClientIdNotFoundFault";const CHECK_NAME_NOT_FOUND_FAULT="CheckNameNotFoundFault";const INVALID_TOKEN_FAULT="InvalidTokenFault";const INVALID_SOURCE_FAULT="InvalidSourceIdFault";const VERIFICATION_ID_NOT_FOUND_FAULT="VerificationIdNotFoundFault";const TOKEN_TIMEOUT_FAULT="TokenTimeoutFault";const LOCK_TIMEOUT_FAULT="LockTimeoutFault";const VERIFICATION_FAULT="VerificationFault";const INVALID_IP_ADDRESS_FAULT="InvalidIPAddressFault";const INVALID_MOBILE_RETURNING_USER_CODE_FAULT="InvalidMobileReturningUserCodeFault";const OCR_FAILED_FAULT="OcrFailedFault";module.handleStepError=function(stepName,error){var errorToReturn=handleError(error);errorToReturn.step=stepName;return errorToReturn};function handleError(error){var standardError={};if(error){var errorType=error[STATUS_TEXT];switch(errorType){case TIMEOUT:standardError.errorType=errorType;break;case INTERNAL_SERVER_ERROR:var errorResponse=error[RESPONSE_TEXT];if(errorResponse){try{var errorResponseJson=JSON.parse(errorResponse);if(errorResponseJson&&errorResponseJson.isFault){standardError.errorType=errorResponseJson.faultData.code;standardError.errorDescription=errorResponseJson.faultData.faultString;if(errorResponseJson.faultData.details){if(errorResponseJson.faultData.details.length>standardError.errorDescription.length){standardError.errorDescription=errorResponseJson.faultData.details}}}}catch(e){standardError.errorType=SYSTEMFAULT;standardError.errorDescription=INTERNAL_SERVER_ERROR+" http status code :"+error[STATUS]}break}case SERVICE_UNAVAILABLE:standardError.errorType=SYSTEMFAULT;standardError.errorDescription=SERVICE_UNAVAILABLE+" http status code :"+error[STATUS];break;default:standardError.errorType=UNKNOWN;try{standardError.errorDescription=JSON.stringify(error)}catch(e){standardError.errorDescription=error[STATUS_TEXT]+" http status code :"+error[STATUS]}}if(standardError.errorDescription){standardError.errorDescriptionCode=standardError.errorDescription.replace(/[:,#.()!]/g,"").replace(/\s+/g,"-").toLowerCase()}}return standardError}return module}(greenidMobileLog)}
if(!window.greenidClientLoaded){window.greenidClientLoaded=true;greenidClientContext=function(log){"use strict";var module={};module.currentSourceName="";module.sourceSwitchAnimationCompleted=false;module.nextSourceSwitchAnimationCompleted=false;module.modalTemplateLoadCompleted=false;module.postIntroAdded=false;module.introAlertAdded=false;module.nextSourceLoading=false;module.firstSourceLoading=false;module.sourceFieldsLoaded=false;module.dlStateSwitched=false;module.modalContainer="";module.allowFieldsFormReveal=true;module.waitingContentIsReady=false;module.simpleuiIsReady=false;module.greenidMobileNavIsReady=false;module.backButtonCurrentPage="";module.backButtonPreviousPage="";module.customCssAlreadyLoaded=false;module.enableCancelButton="";module.isSourceSwitchAnimationCompleted=function(){return module.sourceSwitchAnimationCompleted};module.isNextSourceSwitchAnimationCompleted=function(){return module.nextSourceSwitchAnimationCompleted};module.isModalTemplateLoadCompleted=function(){return module.modalTemplateLoadCompleted};module.isPostIntroAdded=function(){return module.postIntroAdded};module.hasIntroAlertJustBeenAdded=function(){return module.introAlertAdded};module.isNextSourceLoading=function(){return module.nextSourceLoading};module.isFirstSourceLoading=function(){return module.firstSourceLoading};module.isUsableContentInDom=function(){return module.sourceFieldsLoaded};module.setFirstSourceLoading=function(firstSourceLoading){module.firstSourceLoading=firstSourceLoading};module.areSourceFieldsLoaded=function(){return module.sourceFieldsLoaded};module.wasDlStateSwitched=function(){return module.dlStateSwitched};module.setDlStateSwitched=function(dlStateSwitched){module.dlStateSwitched=dlStateSwitched};module.isWaitingContentReady=function(){return module.waitingContentIsReady};module.setWaitingContentReady=function(){module.waitingContentIsReady=true};module.isSimpleuiReady=function(){return module.simpleuiIsReady};module.setSimpleuiReady=function(){module.simpleuiIsReady=true};module.isGreenidMobileNavReady=function(){return module.greenidMobileNavIsReady};module.setGreenidMobileNavReady=function(){module.greenidMobileNavIsReady=true};module.isCustomCssAlreadyLoaded=function(){return module.customCssAlreadyLoaded};return module}(greenidLog)}
if(!window.greenidValidatorLoaded){window.greenidValidatorLoaded=true;var greenidValidator=function($,log){"use strict";var customerId="";var sourceName="";var hasErrorClass="greenid-has-error";var requiredMessage="This is a required field. ";var invalidDobMessage="Invalid date of birth. ";var invalidDobOver18Message="Please check your date of birth. You are required to be 18 years or older to register. ";var dateAutoCorrectionMessage="We have auto-corrected the date to the required format. Please check the value and submit again. ";var invalidExpiryDateMessage="Invalid expiry date. ";var invalidIssueDateMessage="Invalid issue date. ";var invalidStreetnameMessage="Street name can only contain letters. ";var invalidNZAANumberMessage="Invalid membership number. ";var invalidZAPassportNumberMessage="Invalid passport number. ";var invalidMyKadNumberMessage="Invalid MyKad number. ";var invalidPassportNumberMessage="Passport number is invalid; it must contain either 1 or 2 alpha, then 7 numeric characters. ";var invalidNZPassportNumberMessage="Passport number is invalid; it must contain either 1 or 2 alpha, then 6 or 7 numeric characters. ";var invalidUKPassportNumberMessage="Passport number is invalid; it must contain 9 digits. ";var invalidPostcodeMessage="Invalid postcode. ";var invalidNameMessage="Invalid character in name, or name is too long";var invalidCharMessage="Please remove any < or & characters.";var invalidMiddleNameMessage="We can't accept more than 20 characters for your middle name. ";var invalidMedicareNumberMessage="Invalid Medicare number. Enter the 10 digit number without spaces.";var invalidMedicareReferenceNumberMessage="Invalid reference number. ";var invalidNZTADriversLicenceNumberMessage="Invalid licence number; it must contain 2 uppercase letters, then 6 digits. ";var invalidNZTADriversLicenceVersionNumberMessage="Invalid version number; it must contain 3 digits. ";var invalidAUSDriversLicenceNumberMessage="Invalid licence number. ";var invalidCardNumberDLMessage="Invalid card number. ";var invalidStateMessage="Invalid State or Territory. ";var invalidPastDateMessage="Date must be in the past. ";var invalidImmicardNumberMessage="Must be 3 letters followed by 6 digits. ";var invalidUSZipCodeMessage="Invalid zip code. ";var invalidCanadianPostcodeMessage="Invalid postcode. ";var invalidSocialSecurityNumberMessage="Invalid social security number. ";var invalidPhoneNumberMessage="Invalid phone number. ";var invalidEmailMessage="Invalid email address. ";var invalidPercentageMessage="This field should contain a number between 0 and 100. Don't include the percentage sign.";var invalidSouthAfricanIdNumberMessage="Invalid ID number; it must be 13 digits long and be a valid ID number (as determined by a luhn check).";var invalidVietnamIdNumberMessage="Invalid ID number; it must be either 9 or 12 digits long.";var invalidNRICNumberMessage="Invalid NRIC number. ";var invalidBusinessNumberMessage="Input must be a number which has a length of 11 digits.";var nonNumericMessage="Only numbers are allowed; no letters or other characters can be used.";var invalidDvsDriverLicenceGivenNameMessage="Invalid given name; it must contain between 1 and 20 characters";var invalidDvsDriverLicenceMiddleNameMessage="Invalid middle name; it could be empty or contain between 1 and 20 alphanumeric characters";var invalidDvsDriverLicenceSurnameMessage="Invalid surname; it must contain between 1 and 40 characters";var invalidNZTADriverLicenceNameMessage="Invalid name; it must contain between 1 and 30 characters";var invalidDvsCentrelinkNameMessage="Invalid name; it must contain between 1 and 32 characters";var invalidDvsPassportSurnameMessage="Invalid surname; it must contain between 1 and 31 alphabetic characters, dashes, apostrophes or single quotes";var invalidDvsPassportGivenNameMessage="Invalid name; it must contain between 1 and 31 alphabetic characters, dashes, apostrophes or single quotes";var invalidDvsMedicareName1Message="Invalid name; it must contain between 1 and 27 characters";var invalidDvsMedicareName2Message="Invalid name; it must contain between 1 and 25 characters";var invalidDvsMedicareName3Message="Invalid name; it must contain between 1 and 23 characters";var invalidDvsMedicareName4Message="Invalid name; it must contain between 1 and 21 characters";var invalidCentrelinkNumberMessage="Customer Reference Number is invalid; it must be 9 digits followed by 1 letter. ";var invalidVisaNumberMessage="Passport number is invalid; it must contain between 1 and 14 characters. ";var invalidDvsVisaNameMessage="Invalid name; it must contain between 1 and 49 characters. ";var securityValidationMessage="Contains invalid characters. ";var invalidDvsImmiCardNameMessage="Invalid name; it can not contain more than 49 characters. ";var invalidSingaporeIDNumner="Invalid NRIC number. It must be 9 characters containing both letters and numbers";var invalidCdbClientIdMessage="Input must be a number which has a length of 11 digits.";var invalidCbdRegisterNoMessage="Input must be a number which has a maximum length of 4 digits.";var invalidCbdEntryNoMessage="Input must be a number which has a maximum length of 5 digits.";var topLevelDomainList=["aero","asia","biz","cat","com","coop","info","jobs","mobi","museum","name","net","org","pro","tel","travel","gov","edu","mil","int"];var infrastructureTopLevelDomainList=["arpa","root"];var countryTopLevelDomainList=["ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","yu","za","zm","zw"];var newTopLevelDomainList=["academy","bid","biz","buzz","capital","cash","care","center","ceo","cheap","club","college","computer","condos","construction","consulting","contractors","date","dating","diamonds","education","domains","email","engineering","enterprises","equipment","estate","exchange","expert","financial","flights","foo","fund","holdings","holiday","international","investments","land","lease","management","marketing","media","partners","post","properties","rentals","solutions","systems","tax","technology","university"];const territoryAbbreviationArray=["NSW","VIC","QLD","WA","SA","TAS","ACT","NT"];var module={};function buildErrorSpan(inputId,msg){return'<span class="help-block" id="error-'+inputId+'" data-cucumber="error-'+inputId+'">'+msg+"</span>"}module.handleValidationError=function(inputId,msg){var element=$("#"+inputId);msg=element.data("validation-message")||msg;var errEvent={};errEvent[log.MESSAGE]="form validation error";errEvent["errorFieldName"]=inputId;errEvent["errorMessage"]=msg;errEvent[log.SOURCE]=module.sourceName;if(module.customerId){log.accountId=module.customerId}log.info(errEvent);if(element.attr("type")=="checkbox"){log.trace("error on checkbox or date field");var parentDiv=element.closest(".checkbox")}else{log.trace("error on non-checkbox field");var parentDiv=element.closest(".form-group")}parentDiv.addClass(hasErrorClass);parentDiv.append(buildErrorSpan(inputId,msg));element.attr({"aria-invalid":true,"aria-describedby":"error-"+inputId}).focus()};module.clearError=function(inputId){if($("#"+inputId).hasClass("clear-error-ignore")){return}else{if($("#"+inputId).attr("type")=="checkbox"){var parentDiv=$("#"+inputId).closest(".checkbox")}else{var parentDiv=$("#"+inputId).closest(".form-group")}parentDiv.removeClass(hasErrorClass);parentDiv.children(".help-block").remove();$("#"+inputId).attr("aria-invalid",false).removeAttr("aria-describedby")}};function handleValidation(element,isValidCallback,msg,extraArgs){var valid=isValidCallback(element,extraArgs);if(!valid){module.handleValidationError(element.attr("id"),msg)}return valid}module.securityValidation=function(element){var isInvalid=false;if(element.attr("aria-invalid")!=="undefined"){isInvalid=element.attr("aria-invalid")==="true"}if(!isInvalid&&(module.atSymbolSpecificValidation(element)||module.isGeneralInjection(element)||module.isCSVInjection(element)||module.isCSSInjection(element))){return false}return true};module.atSymbolSpecificValidation=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/^.*\@.*[\+\-\=\@\<\>\|\%\(\)].*$/.test(value)};module.isGeneralInjection=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/.*[\=\<\>\|\%].*$/.test(value)};module.isCSVInjection=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/^[\+\-\=\<\>\|\%]..*/.test(value)&&value.length>1};module.isCSSInjection=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/^.*\/\/.*$/.test(value)};module.isNotEmpty=function(element){var valid=true;if(element.is("input")){var type=element.attr("type");if(type==="text"||type==="file"){var value=element.val();if(!value||$.trim(value)===""){valid=false}}else if(type==="checkbox"){valid=element.prop("checked")}else if(type==="radio"){var radiosValid=false;var name=element.attr("name");var group=$("[name='"+name+"']");var i=0;while(!radiosValid&&i<group.length){if(group[i].checked)radiosValid=true;i++}if(!radiosValid){valid=false}}}else if(element.is("select")){var value=element.val();if(!value||$.trim(value)===""){valid=false}}else if(element.is("textarea")){var value=element.val();if(!value||$.trim(value)===""){valid=false}}return valid};module.isbadChars=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var result=/[&|<]/.test(value);return!result};module.isZAPassportNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/(^[a-zA-Z]\d{8}$)|(^\d{9}$)/.test(value)};module.isPostcodeValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/^\d{4}$/.test(value)};module.isUSZipCodeValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/^\d{5}$/.test(value)};module.isCanadianPostcodeValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return/^[a-zA-Z\d]{6}$/.test(value)};module.convertYear=function(yearValue,assumeThisCentury){var year;if(typeof yearValue==="string"){year=parseInt(yearValue)}else{year=yearValue}if(year<100){var newYear=year;if(assumeThisCentury){newYear=year+2e3}else{var currentYear=(new Date).getFullYear();currentYear+=20;currentYear-=2e3;if(year<currentYear){newYear=year+2e3}else{newYear=year+1900}}return newYear}return year};module.convertDate=function(date){var splitDate=date.split("/");var month=splitDate[1]-1;var year=module.convertYear(splitDate[2],false);var convertedDate=new Date(year,month,splitDate[0]);return convertedDate};module.buildValidDate=function(day,month,year){var result={};result.dateIsValid=false;var date=new Date(year,month-1,day);if(Object.prototype.toString.call(date)!=="[object Date]"){return result}if(isNaN(date.getTime())){return result}if(month-1!=date.getMonth()){return result}if(day!=date.getDate()){return result}if(date.getYear()<0){return result}result.dateIsValid=true;result.date=date;return result};function genericIsDobValid(element,isUSStyleDate){var value=element;if(typeof element.val=="function"){value=element.val()}var classStr=element.attr("class");if(classStr.indexOf("required")<0){if(value.length==0){return true}}var now=new Date;var data=value.split("/");if(data.length!=3){return false}var builtDate;if(isUSStyleDate){builtDate=module.buildValidDate(data[1],data[0],data[2])}else{builtDate=module.buildValidDate(data[0],data[1],data[2])}if(!builtDate.dateIsValid){return false}var now=new Date;if(builtDate.date>now){return false}return true}module.isDobValid=function(element){return genericIsDobValid(element,false)};module.isUSStyleDobValid=function(element){return genericIsDobValid(element,true)};function formatDate(x,y){var greenidDatepicker=$(this).parent().datepicker;var offset=x.getTimezoneOffset();var newDateObj=new Date(x.getTime()-offset*6e4);return greenidDatepicker.DPGlobal.formatDate(newDateObj,y,"en")}function checkDate(x){var dates=$(this).parent().datepicker.dates;var matched=0;for(var i=0;i<12;i++){var regexShortMonth=new RegExp(dates.en.monthsShort[i],"g");var matchedMonthShort=x.match(regexShortMonth);if(matchedMonthShort){matched=matched+matchedMonthShort.length}}if(matched>1){return false}return true}module.isPastDateValidNew=function(element){var pastDate=module.getStandardDate(element);if(pastDate===null){return false}var now=new Date;if(pastDate>now){return false}return true};module.isFutureDateValidNew=function(element){var futureDate=module.getStandardDate(element);if(futureDate===null){return false}futureDate=futureDate.setDate(futureDate.getDate()+1);var now=new Date;if(futureDate<now){return false}return true};module.isPastDateOver18ValidNew=function(element){var pastDate=module.getStandardDate(element);if(pastDate===null){return false}var now=new Date;var over18=new Date(now.getFullYear()-18,now.getMonth(),now.getDate());if(pastDate>over18){return false}return true};module.getStandardDate=function(element){var value=element.val();var dateFormat=element.attr("data-date-format");if(value.length==0){return null}if(!dateFormat){dateFormat="dd/mm/yyyy"}var greenidDatepicker=$(this).parent().datepicker;var delimiters=/,|-|\//g;var separators=value.replace(delimiters,"\0").split("\0");if(separators.length===1){separators=value.split(" ")}var greenidDatepicker=$(this).parent().datepicker;var parsedFormat=greenidDatepicker.DPGlobal.parseFormat(dateFormat);var newDateString="";if(separators&&parsedFormat){if(separators.length===parsedFormat.parts.length){var monthReg=/mm?|MM?/g;var yearReg=/yyyy/g;var monthIndex=-1;var yearIndex=-1;var dayIndex=-1;var monthValueInt=-1;for(var i=0;i<parsedFormat.parts.length;i++){var individulPart=parsedFormat.parts[i];if(individulPart.match(monthReg)){var monthValue=separators[i];monthValueInt=parseInt(monthValue);var dates=$(this).parent().datepicker.dates;if(!isNaN(monthValueInt)){if(monthValueInt>12||monthValueInt<1){return null}else{separators[i]=dates.en.monthsShort[monthValueInt-1]}}else{var indexShort=dates.en.monthsShort.indexOf(monthValue);if(indexShort===-1){var index=dates.en.months.indexOf(monthValue);if(index===-1){return null}monthValueInt=index+1}else{monthValueInt=indexShort+1}}monthIndex=i}else if(individulPart.match(yearReg)){var yearValue=separators[i];if(!yearValue.match(/^\d{4}$/)){return null}yearIndex=i}else{dayIndex=i}}}if(monthIndex!=-1&&yearIndex!=-1){var yearValueInt=parseInt(separators[yearIndex]);var numberDaysForTheMonth=greenidDatepicker.DPGlobal.getDaysInMonth(yearValueInt,monthValueInt-1);if(dayIndex!=-1){var dayValueInt=parseInt(separators[dayIndex]);if(!isNaN(dayValueInt)&&numberDaysForTheMonth){if(dayValueInt<0||dayValueInt>numberDaysForTheMonth){return null}}else{return null}}}}for(var i=0;i<separators.length;i++){newDateString=newDateString+separators[i]+" "}if(!checkDate(newDateString.trim())){return null}var originDate=new Date(newDateString.trim());if(Object.prototype.toString.call(originDate)==="[object Date]"){if(isNaN(originDate.valueOf())){return null}}return originDate};module.dateAutoCorrection=function(element,extraData){var value=element.val();if(value.length==0){return true}try{if(!checkDate(value)){return true}var originValue=module.getStandardDate(element);if(Object.prototype.toString.call(originValue)==="[object Date]"){if(isNaN(originValue.valueOf())){return true}}if(!extraData.dateFormat){extraData.dateFormat="dd/mm/yyyy"}var correctedValue=formatDate(originValue,extraData.dateFormat);if(value===correctedValue){return true}log.trace("current value: "+element.val()+" new value: "+correctedValue);element.val(correctedValue);log.trace("new current value: "+element.val())}catch(err){return true}if(extraData.needConfirmation){return false}return true};module.isPassportNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var trimmedValue=value.trim();if(trimmedValue.length>9){return false}return trimmedValue.match("^[A-Za-z]{1,2}[0-9]{7}$")};module.isNZPassportNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var trimmedValue=value.trim();if(trimmedValue.length>9){return false}return trimmedValue.match("^[A-Za-z]{1,2}[0-9]{6,7}$")};module.isUKPassportNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var trimmedValue=value.trim();if(trimmedValue.length>9){return false}return trimmedValue.match("^[0-9]{9}$")};module.isNRICNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value.length!=9){return false}if(value.charAt(0)!="S"&&value.charAt(0)!="T"&&value.charAt(0)!="F"&&value.charAt(0)!="G"){return false}var middle=value.substring(1,8);if(!middle.match("^[0-9]{7}$")){return false}var total=0;var multipliers=[2,7,6,5,4,3,2];for(var i=0;i<7;i++){total+=multipliers[i]*parseInt(middle.charAt(i))}if(value.charAt(0)=="T"||value.charAt(0)=="G"){total+=4}var checksumDigit=[];if(value.charAt(0)=="S"||value.charAt(0)=="T"){checksumDigit=["J","Z","I","H","G","F","E","D","C","B","A"]}else{checksumDigit=["X","W","U","T","R","Q","P","N","M","L","K"]}return checksumDigit[total%11]==value.charAt(8)};module.isFutureDateValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var now=new Date;var data=value.split("/");if(data.length!=3){return false}if(isNaN(Number(data[0]))||isNaN(Number(data[1]))||isNaN(Number(data[2]))){return false}var builtDate=module.buildValidDate(data[0],data[1],module.convertYear(data[2],true));if(!builtDate.dateIsValid){return false}if(builtDate.date<now){return false}return true};module.isPastDateValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var data=value.split("/");if(data.length!=3){return false}var builtDate=module.buildValidDate(data[0],data[1],data[2]);if(!builtDate.dateIsValid){return false}var now=new Date;if(builtDate.date>now){return false}return true};module.isPastDateOver18Valid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var data=value.split("/");if(data.length!=3){return false}var builtDate=module.buildValidDate(data[0],data[1],data[2]);if(!builtDate.dateIsValid){return false}var now=new Date;var over18=new Date(now.getFullYear()-18,now.getMonth(),now.getDate());if(builtDate.date>over18){return false}return true};module.isNZAANumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^\\s*(\\d{4}\\s?){4}\\s*$");return match};module.replaceSpecialChar=function(element){var value=element;if(typeof element.val=="function"){value=element.val();if(value){var newValue=value.replace(/[\`\u00b4\u0060\u2018\u2019]/g,"'");element.val(newValue)}}return true};module.isMyKadNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match(/^\d{2}[0-1][0-9][0-3][0-9]-{0,1}\d{2}-{0,1}\d{4}$/);return match};module.isSouthAfricaIdNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match(/^[\d]{10}[01]{1}[\d]{2}$/);if(match){match=valid_luhn(value)}return match};module.isVietnamIdNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match(/^([\d]{9}|[\d]{12})$/);return!!match};module.isGreenMedicareExpiryDateValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var now=new Date;var data=value.split("/");if(data.length!=2){return false}if(isNaN(Number(data[0]))||isNaN(Number(data[1]))){return false}if(!(Number(data[0])>=1&&Number(data[0])<=12)){return false}if(data[1].length!=4||data[0].length!=2){return false}var month=parseInt(data[0]);var d=new Date(data[1],month+"","1");if(Object.prototype.toString.call(d)!=="[object Date]"){return false}if(isNaN(d.getTime())){return false}if(d<now){return false}return true};module.isBlueYellowMedicareExpiryDateValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var now=new Date;var data=value.split("/");if(data.length!=3){return false}if(isNaN(Number(data[0]))||isNaN(Number(data[1]))||isNaN(Number(data[2]))){return false}if(data[0].length!=2||data[1].length!=2||data[2].length!=2){return false}var builtDate=module.buildValidDate(data[0],data[1],module.convertYear(data[2],true));if(!builtDate.dateIsValid){return false}if(builtDate.date<now){return false}return true};module.isMedicareNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var trimmedValue=value.trim();if(trimmedValue.length!=10){return false}var checksum=medicareChecksum(trimmedValue);if(checksum!=Number(trimmedValue.charAt(8))){return false}return true};module.isStateValid=function(s){return territoryAbbreviationArray.includes(s)};function medicareChecksum(medicareNumber){if(Number(medicareNumber.charAt(0))<2||Number(medicareNumber.charAt(0))>6){return-1}var total=0;for(var i=0;i<8;i++){var ch=medicareNumber.charAt(i);var value=0;value=Number(ch);if(value<0||value>9){return-1}if(i==1||i==5){value=value*3}else if(i==2||i==6){value=value*7}else if(i==3||i==7){value=value*9}total+=value}return total%10}module.isMedicareReferenceNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var trimmedValue=value.trim();if(trimmedValue.length!=1){return false}var refNum=Number(trimmedValue);if(refNum>=1&&refNum<=9){return true}return false};module.isStreetnameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return module.hasNoNumbers(value)};module.isNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[a-zA-Z0-9-\\s.']*$")&&value.length<250};module.isNameValidAllowSlash=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[a-zA-Z0-9-\\s.'/]*$")&&value.length<250};module.isDvsDriverLicenceGivenNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[a-zA-Z0-9-\\s.']*$")&&value.length<21};module.isDvsDriverLicenceMiddleNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.length<21};module.isDvsDriverLicenceSurnameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[a-zA-Z0-9-\\s.']*$")&&value.length<41};module.isNZTADriverLicenceNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[a-zA-Z0-9-'\\s]*$")&&value.length<31};module.isDvsCentrelinkNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z0-9-'\\s]*$")&&value.length<33};module.isDvsPassportSurnameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z-'\\s]*$")&&value.length<32};module.isDvsPassportGivenNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z-'\\s]*$")&&value.length<32};module.isDvsMedicareName1Valid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z0-9-'\\s]*$")&&value.length<28};module.isDvsMedicareName2Valid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z0-9-'\\s]*$")&&value.length<26};module.isDvsMedicareName3Valid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z0-9-'\\s]*$")&&value.length<24};module.isDvsMedicareName4Valid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z0-9-'\\s]*$")&&value.length<22};module.isDvsCentrelinkNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[0-9]{9}[A-Za-z]{1}$")||value.match("^[0-9]{3}-[0-9]{3}-[0-9]{3}[A-Za-z]{1}$")};module.isDvsVisaNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z0-9]{1,14}$")};module.isDvsVisaNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z-'\\s]{1,49}$")};module.isDvsImmiCardNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.match("^[A-Za-z-'\\s]{0,49}$")};module.isMiddleNameValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return value.length<21};module.isNameValidLoose=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}return module.hasNoNumbers(value)&&module.hasNoQuotes(value)&&value.length<250};module.hasNoNumbers=function(value){return/^([^0-9]*)$/.test(value)};module.isPercentage=function(element){var value=element.val();if(value!=""){return/^[1-9][0-9]?$|^100$/.test(value)}else{return true}};module.dependsOn=function(elem){var valid=true;var notEmpty=module.isNotEmpty(elem);var parentClass=elem.data("validation-parent");if(!notEmpty){elem.closest("."+parentClass).find(".dependson-validation").not(elem).each(function(){if(module.isNotEmpty($(this))){valid=false}})}return valid};module.hasNoQuotes=function(value){if(value.indexOf('"')>=0||value.indexOf("&quot;")>=0){return false}return true};module.hasNoSlashes=function(value){if(value.indexOf("\\")>=0||value.indexOf("/")>=0){return false}return true};module.isNZTADriversLicenceNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^[A-Z]{2}[0-9]{6}$")||"11111111"===value||"33333333"===value||"44444444"===value;return match};module.isNZTADriversLicenceVersionNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^[0-9]{3}$");return match};module.isAUSDriversLicenceNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^[A-Za-z0-9]{1,10}$");return match};module.isCardNumberDL10alphaNumericValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value.length==0){return true}var match=value.match("^[A-Za-z0-9]{1,10}$");return match};module.isCardNumberDL9alphaNumericValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value.length==0){return true}var match=value.match("^[A-Za-z0-9]{1,9}$");return match};module.isCardNumberDL10NumericValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value.length==0){return true}var match=value.match("^[0-9]{1,10}$");return match};module.isCardNumberDL8NumericValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value.length==0){return true}var match=value.match("^[0-9]{1,8}$");return match};module.isImmicardNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^[A-Za-z]{3}[0-9]{6}$");return match};module.isSocialSecurityNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value===""){return true}var match=value.match("^[0-9]{3}-[0-9]{2}-[0-9]{4}$");return match};module.isPhoneNumberValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}value=value.replace(/\s/g,"").replace(/\+/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/-/g,"");var match=value.match("^[0-9]{8,15}$");return match};module.isEmailValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$");if(match!==undefined&&match!==null){if(match.length>=1){var matchTLD=value.substring(value.lastIndexOf(".")+1,value.length);var topLevelDomainMatch=$.inArray(matchTLD,topLevelDomainList);var countryTopLevelDomainMatch=$.inArray(matchTLD,countryTopLevelDomainList);var infrastructureTopLevelDomainMatch=$.inArray(matchTLD,infrastructureTopLevelDomainList);var newTopLevelDomainMatch=$.inArray(matchTLD,newTopLevelDomainList);if(topLevelDomainMatch!==-1||countryTopLevelDomainMatch!==-1||infrastructureTopLevelDomainMatch!==-1||newTopLevelDomainMatch!==-1){match=true}else{match=false}}}else{match=false}if(match){var list=value.split("@");if(list!=null&&list!=undefined){for(var i=0;i<list.length;i++){var start=list[i].match("^[.]");var end=list[i].match("[.]$");var double=list[i].match("[.]{2,}");if(start||end||double){match=false;break}}}}return match};module.isSgPostcodeValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}var match=value.match("^[0-9]{6}$");return match};module.isUsPostcodeValid=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value==null||value==""){return true}var match=value.match("^[0-9]{5}$");return match};module.isUkPostcodeValid=function(element){var vaildTemplates=["A1 1AA","A11 1AA","AA1 1AA","AA11 1AA","A1A 1AA","AA1A 1AA","A11AA","A111AA","AA11AA","AA111AA","A1A1AA","AA1A1AA"];var value=element;if(typeof element.val=="function"){value=element.val()}var match=false;if(value!=null){var temp=value.replace(/[A-Za-z]/g,"A");temp=temp.replace(/[0-9]/g,"1");for(var i=0;i<vaildTemplates.length;i++){if(vaildTemplates[i]===temp){match=true;break}}}return match};module.isMaxLengthValid=function(element,maxLength){var value=element;if(typeof element.val=="function"){value=element.val()}if(!value){return true}return value.length<=maxLength};module.businessNumberValidation=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(!value){return false}value=value.replace(/ /g,"");var expectedLength=$(element).data("validation-length");if(expectedLength!=8&&/\D+/.test(value)){return false}return value.length==expectedLength};module.numericEmptyValidation=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(value.length==0){return true}if(value.indexOf(" ")!=-1){return false}if(isNaN(value)){return false}return true};module.numericValidation=function(element){var value=element;if(typeof element.val=="function"){value=element.val()}if(!value){return false}value=value.replace(/ /g,"");if(isNaN(value)){return false}return true};module.cbdStockNumberValidation=function(element,length){var value=element;if(typeof element.val=="function"){value=element.val()}if(!value){return false}value=value.trim();if(/ /g.test(value)){return false}if(length==11){if(value.length!==length){return false}}else{if(value.length>length){return false}}if(/\D+/.test(value)){return false}return true};function handleSecurityValidation(element){return handleValidation(element,module.securityValidation,securityValidationMessage)}function handleBusinessNumberValidation(element){return handleValidation(element,module.businessNumberValidation,invalidBusinessNumberMessage)}function handleNumericEmptyValidation(element){return handleValidation(element,module.numericEmptyValidation,nonNumericMessage)}function handleNumericValidation(element){return handleValidation(element,module.numericValidation,nonNumericMessage)}function handleCbdClientIdValidation(element){return handleValidation(element,module.cbdStockNumberValidation,invalidCdbClientIdMessage,11)}function handleCbdRegisterNoValidation(element){return handleValidation(element,module.cbdStockNumberValidation,invalidCbdRegisterNoMessage,4)}function handleCbdEntryNoValidation(element){return handleValidation(element,module.cbdStockNumberValidation,invalidCbdEntryNoMessage,5)}function handleGreenMedicareExpiryDateValidation(element){return handleValidation(element,module.isGreenMedicareExpiryDateValid,invalidExpiryDateMessage)}function handleBlueYellowMedicareExpiryDateValidation(element){return handleValidation(element,module.isBlueYellowMedicareExpiryDateValid,invalidExpiryDateMessage)}function handleMedicareNumberValidation(element){return handleValidation(element,module.isMedicareNumberValid,invalidMedicareNumberMessage)}function handleMedicareReferenceNumberValidation(element){return handleValidation(element,module.isMedicareReferenceNumberValid,invalidMedicareReferenceNumberMessage)}function handleZAPassportNumberValidation(element){return handleValidation(element,module.isZAPassportNumberValid,invalidZAPassportNumberMessage)}function handleRequiredValidation(element){return handleValidation(element,module.isNotEmpty,requiredMessage)}function handleBadCharsValidation(element){return handleValidation(element,module.isbadChars,invalidCharMessage)}function handlePostcodeValidation(element){return handleValidation(element,module.isPostcodeValid,invalidPostcodeMessage)}function handleUSZipCodeValidation(element){return handleValidation(element,module.isUSZipCodeValid,invalidUSZipCodeMessage)}function handleCanadianPostcodeValidation(element){return handleValidation(element,module.isCanadianPostcodeValid,invalidCanadianPostcodeMessage)}function handleDobValidation(element){return handleValidation(element,module.isDobValid,invalidDobMessage)}function handleNewDobValidation(element){return handleValidation(element,module.isPastDateValidNew,invalidDobMessage)}function handleDobOver18Validation(element){return handleValidation(element,module.isPastDateOver18Valid,invalidDobOver18Message)}function handleNewDobOver18Validation(element){return handleValidation(element,module.isPastDateOver18ValidNew,invalidDobOver18Message)}function handleNewIssueDateValidation(element){return handleValidation(element,module.isPastDateValidNew,invalidIssueDateMessage)}function handleNewFutureDateValidation(element){return handleValidation(element,module.isFutureDateValidNew,invalidExpiryDateMessage)}function handleDateAutoCorrectionValidation(element,needConfirmation){var extraData={};extraData.dateFormat=element.attr("data-date-format");extraData.needConfirmation=needConfirmation;return handleValidation(element,module.dateAutoCorrection,dateAutoCorrectionMessage,extraData)}function handleReplaceSpecialChar(element){return handleValidation(element,module.replaceSpecialChar,"")}function handleUSStyleDobValidation(element){return handleValidation(element,module.isUSStyleDobValid,invalidDobMessage)}function handleIssueDateValidation(element){return handleValidation(element,module.isPastDateValid,invalidIssueDateMessage)}function handlePastDateValidation(element){return handleValidation(element,module.isPastDateValid,invalidPastDateMessage)}function handleNZAANumberValidation(element){return handleValidation(element,module.isNZAANumberValid,invalidNZAANumberMessage)}function handleMyKadNumberValidation(element){return handleValidation(element,module.isMyKadNumberValid,invalidMyKadNumberMessage)}function handleSouthAfricanIdNumberValidation(element){return handleValidation(element,module.isSouthAfricaIdNumberValid,invalidSouthAfricanIdNumberMessage)}function handleVietnamIdNumberValidation(element){return handleValidation(element,module.isVietnamIdNumberValid,invalidVietnamIdNumberMessage)}function handleFutureDateValidation(element){return handleValidation(element,module.isFutureDateValid,invalidExpiryDateMessage)}function handleStreetnameValidation(element){return handleValidation(element,module.isStreetnameValid,invalidStreetnameMessage)}function handlePassportNumberValidation(element){return handleValidation(element,module.isPassportNumberValid,invalidPassportNumberMessage)}function handleNZPassportNumberValidation(element){return handleValidation(element,module.isNZPassportNumberValid,invalidNZPassportNumberMessage)}function handleUKPassportNumberValidation(element){return handleValidation(element,module.isUKPassportNumberValid,invalidUKPassportNumberMessage)}function handleNRICNumberValidation(element){return handleValidation(element,module.isNRICNumberValid,invalidNRICNumberMessage)}function handleNameValidation(element){return handleValidation(element,module.isNameValid,invalidNameMessage)}function handleNameValidationAllowSlash(element){return handleValidation(element,module.isNameValidAllowSlash,invalidNameMessage)}function handleDvsDriverLicenceGivenNameValidation(element){return handleValidation(element,module.isDvsDriverLicenceGivenNameValid,invalidDvsDriverLicenceGivenNameMessage)}function handleDvsDriverLicenceMiddleNameValidation(element){return handleValidation(element,module.isDvsDriverLicenceMiddleNameValid,invalidDvsDriverLicenceMiddleNameMessage)}function handleDvsDriverLicenceSurnameValidation(element){return handleValidation(element,module.isDvsDriverLicenceSurnameValid,invalidDvsDriverLicenceSurnameMessage)}function handleNZTADriverLicenceNameValidation(element){return handleValidation(element,module.isNZTADriverLicenceNameValid,invalidNZTADriverLicenceNameMessage)}function handleDvsCentrelinkNameValidation(element){return handleValidation(element,module.isDvsCentrelinkNameValid,invalidDvsCentrelinkNameMessage)}function handleDvsPassportSurnameValidation(element){return handleValidation(element,module.isDvsPassportSurnameValid,invalidDvsPassportSurnameMessage)}function handleDvsPassportGivenNameValidation(element){return handleValidation(element,module.isDvsPassportGivenNameValid,invalidDvsPassportGivenNameMessage)}function handleDvsMedicareName1Validation(element){return handleValidation(element,module.isDvsMedicareName1Valid,invalidDvsMedicareName1Message)}function handleDvsMedicareName2Validation(element){return handleValidation(element,module.isDvsMedicareName2Valid,invalidDvsMedicareName2Message)}function handleDvsMedicareName3Validation(element){return handleValidation(element,module.isDvsMedicareName3Valid,invalidDvsMedicareName3Message)}function handleDvsMedicareName4Validation(element){return handleValidation(element,module.isDvsMedicareName4Valid,invalidDvsMedicareName4Message)}function handleDvsCentrelinkNumberValidation(element){return handleValidation(element,module.isDvsCentrelinkNumberValid,invalidCentrelinkNumberMessage)}function handleDvsVisaNumberValidation(element){return handleValidation(element,module.isDvsVisaNumberValid,invalidVisaNumberMessage)}function handleDvsVisaNameValidation(element){return handleValidation(element,module.isDvsVisaNameValid,invalidDvsVisaNameMessage)}function handleDvsImmiCardNameValidation(element){return handleValidation(element,module.isDvsImmiCardNameValid,invalidDvsImmiCardNameMessage)}function handleMiddleNameValidation(element){return handleValidation(element,module.isMiddleNameValid,invalidMiddleNameMessage)}function handleLooseNameValidation(element){return handleValidation(element,module.isNameValidLoose,invalidNameMessage)}function handleNZTADriversLicenceNumberValidation(element){return handleValidation(element,module.isNZTADriversLicenceNumberValid,invalidNZTADriversLicenceNumberMessage)}function handleNZTADriversLicenceVersionNumberValidation(element){return handleValidation(element,module.isNZTADriversLicenceVersionNumberValid,invalidNZTADriversLicenceVersionNumberMessage)}function handleAUSDriversLicenceNumberValidation(element){return handleValidation(element,module.isAUSDriversLicenceNumberValid,invalidAUSDriversLicenceNumberMessage)}function handleSpecialRegoDVSCardNumberValidation(element,state){if(module.isStateValid(state)){if(state=="ACT"||state=="QLD"||state=="VIC"||state=="WA"){return handleValidation(element,module.isCardNumberDL10alphaNumericValid,invalidCardNumberDLMessage)}else if(state=="NSW"){return handleValidation(element,module.isCardNumberDL10NumericValid,invalidCardNumberDLMessage)}else if(state=="NT"){return handleValidation(element,module.isCardNumberDL8NumericValid,invalidCardNumberDLMessage)}else if(state=="TAS"||state=="SA"){return handleValidation(element,module.isCardNumberDL9alphaNumericValid,invalidCardNumberDLMessage)}}else{module.handleValidationError(element.attr("id"),invalidStateMessage);return false}}function handleCardNumberDL10alphaNumericValidation(element){return handleValidation(element,module.isCardNumberDL10alphaNumericValid,invalidCardNumberDLMessage)}function handleCardNumberDL9alphaNumericValidation(element){return handleValidation(element,module.isCardNumberDL9alphaNumericValid,invalidCardNumberDLMessage)}function handleCardNumberDL10NumericValidation(element){return handleValidation(element,module.isCardNumberDL10NumericValid,invalidCardNumberDLMessage)}function handleCardNumberDL8NumericValidation(element){return handleValidation(element,module.isCardNumberDL8NumericValid,invalidCardNumberDLMessage)}function handleImmicardNumberValidation(element){return handleValidation(element,module.isImmicardNumberValid,invalidImmicardNumberMessage)}function handleSocialSecurityNumberValidation(element){return handleValidation(element,module.isSocialSecurityNumberValid,invalidSocialSecurityNumberMessage)}function handlePhoneNumberValidation(element){return handleValidation(element,module.isPhoneNumberValid,invalidPhoneNumberMessage)}function handleEmailValidation(element){return handleValidation(element,module.isEmailValid,invalidEmailMessage)}function handleSgPostcodeValidation(element){return handleValidation(element,module.isSgPostcodeValid,invalidPostcodeMessage)}function handleUsPostcodeValidation(element){return handleValidation(element,module.isUsPostcodeValid,invalidPostcodeMessage)}function handleUkPostcodeValidation(element){return handleValidation(element,module.isUkPostcodeValid,invalidPostcodeMessage)}function handlePercentageValidation(element){return handleValidation(element,module.isPercentage,invalidPercentageMessage)}function handleDependsOnValidation(element){return handleValidation(element,module.dependsOn,requiredMessage,element)}function handleMaxLengthValidation(element,validationClass){if(!validationClass){return true}var splits=validationClass.split("_");if(splits.length<2){return true}var maxLength=parseInt(splits[1]);if(isNaN(maxLength)){return true}var message="This field must not contain more than "+maxLength+" characters.";return handleValidation(element,module.isMaxLengthValid,message,maxLength)}function handleRegexValidation(element){var regex=element.attr("data-regex");var errorMsg=element.attr("data-error");var value=element.val();var valid=!value||$.trim(value)===""||value.match(regex);if(!valid){module.handleValidationError(element.attr("id"),errorMsg)}return valid}function valid_luhn(value){if(/[^0-9-\s]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n),nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9}nCheck+=nDigit;bEven=!bEven}return nCheck%10==0}module.validateAllFields=function(sourceName,formId,checkSourceHeight,customerId){var allValid=true;if(customerId){module.customerId=customerId}module.sourceName=sourceName;log.trace("VALIDATOR -> formId: "+formId+" / sourceName:"+sourceName);var $f=$("#"+formId);var data=$("#"+formId+" :input").serializeArray();$("#"+formId+" :input:visible").each(function(index,data){var elem=$(this);module.clearError(elem.attr("id"));var classStr=elem.attr("class");if(classStr){var classList=classStr.split(/\s+/);if(classList){$.each(classList,function(index,item){if(item==="required"){if(!handleRequiredValidation(elem)){allValid=false}}if(item==="badcharsvalidation"){if(!handleBadCharsValidation(elem)){allValid=false}}if(item==="regexvalidation"){if(!handleRegexValidation(elem)){allValid=false}}if(item=="dateAutoCorrectionWithConfirmation"){if(!handleDateAutoCorrectionValidation(elem,true)){allValid=false}}if(item=="dateAutoCorrectionNoConfirmation"){if(!handleDateAutoCorrectionValidation(elem,false)){allValid=false}}if(item=="dobvalidationnew"){if(!handleNewDobValidation(elem)){allValid=false}}if(item=="dobvalidation"){if(!handleDobValidation(elem)){allValid=false}}if(item=="dobover18validationnew"){if(!handleNewDobOver18Validation(elem)){allValid=false}}if(item=="dobover18validation"){if(!handleDobOver18Validation(elem)){allValid=false}}if(item=="usstyledobvalidation"){if(!handleUSStyleDobValidation(elem)){allValid=false}}if(item=="postcodevalidation"){if(!handlePostcodeValidation(elem)){allValid=false}}if(item=="streetnamevalidation"){if(!handleStreetnameValidation(elem)){allValid=false}}if(item=="namevalidation"){if(!handleNameValidation(elem)){allValid=false}}if(item=="namevalidationallowslash"){if(!handleNameValidationAllowSlash(elem)){allValid=false}}if(item=="dvsdriverlicencegivennamevalidation"){if(!handleDvsDriverLicenceGivenNameValidation(elem)){allValid=false}}if(item=="dvsdriverlicencemiddlenamevalidation"){if(!handleDvsDriverLicenceMiddleNameValidation(elem)){allValid=false}}if(item=="dvsdriverdicencesurnamevalidation"){if(!handleDvsDriverLicenceSurnameValidation(elem)){allValid=false}}if(item=="nztanamevalidation"){if(!handleNZTADriverLicenceNameValidation(elem)){allValid=false}}if(item=="centrelinkdvsnamevalidation"){if(!handleDvsCentrelinkNameValidation(elem)){allValid=false}}if(item=="dvspassportsurnamevalidation"){if(!handleDvsPassportSurnameValidation(elem)){allValid=false}}if(item=="dvspassportgivennamevalidation"){if(!handleDvsPassportGivenNameValidation(elem)){allValid=false}}if(item=="dvsmedicarename1validation"){if(!handleDvsMedicareName1Validation(elem)){allValid=false}}if(item=="dvsmedicarename2validation"){if(!handleDvsMedicareName2Validation(elem)){allValid=false}}if(item=="dvsmedicarename3validation"){if(!handleDvsMedicareName3Validation(elem)){allValid=false}}if(item=="dvsmedicarename4validation"){if(!handleDvsMedicareName4Validation(elem)){allValid=false}}if(item=="dvscentrelinknumbervalidation"){if(!handleDvsCentrelinkNumberValidation(elem)){allValid=false}}if(item=="dvsvisanumbervalidation"){if(!handleDvsVisaNumberValidation(elem)){allValid=false}}if(item=="dvsvisanamevalidation"){if(!handleDvsVisaNameValidation(elem)){allValid=false}}if(item=="dvsimmicardnamevalidation"){if(!handleDvsImmiCardNameValidation(elem)){allValid=false}}if(item=="middlenamevalidation"){if(!handleMiddleNameValidation(elem)){allValid=false}}if(item=="expirydatevalidation"){if(!handleFutureDateValidation(elem)){allValid=false}}if(item=="expirydatevalidationnew"){if(!handleNewFutureDateValidation(elem)){allValid=false}}if(item=="issuedatevalidation"){if(!handleIssueDateValidation(elem)){allValid=false}}if(item=="issuedatevalidationnew"){if(!handleNewIssueDateValidation(elem)){allValid=false}}if(item=="pastdatevalidation"){if(!handlePastDateValidation(elem)){allValid=false}}if(item=="nzaanumbervalidation"){if(!handleNZAANumberValidation(elem)){allValid=false}}if(item=="singaporeidnumbervalidation"){if(!handleNRICNumberValidation(elem)){allValid=false}}if(item=="mykadnumbervalidation"){if(!handleMyKadNumberValidation(elem)){allValid=false}}if(item=="vietnamIdNumberValidation"){if(!handleVietnamIdNumberValidation(elem)){allValid=false}}if(item=="southafricanidnumbervalidation"){if(!handleSouthAfricanIdNumberValidation(elem)){allValid=false}}if(item=="passportdvsvalidation"||item=="passportnumbervalidation"){if(!handlePassportNumberValidation(elem)){allValid=false}}if(item=="nzpassportnumbervalidation"){if(!handleNZPassportNumberValidation(elem)){allValid=false}}if(item=="medicaredvsvalidation"){if(!handleMedicareNumberValidation(elem)){allValid=false}}if(item=="medicaredvsrefnumvalidation"){if(!handleMedicareReferenceNumberValidation(elem)){allValid=false}}if(item=="nztadriverslicencenumbervalidation"){if(!handleNZTADriversLicenceNumberValidation(elem)){allValid=false}}if(item=="nztadriverslicenceversionnumbervalidation"){if(!handleNZTADriversLicenceVersionNumberValidation(elem)){allValid=false}}if(item=="ausdriverslicencenumbervalidation"){if(!handleAUSDriversLicenceNumberValidation(elem)){allValid=false}}if(item=="specialRegoDVSCardNumberValidation"){var stateVal=$("#greenid_regodvs_state_of_issue").val()||$("select[name='greenid_regodvs_state_of_issue']").val();if(!handleSpecialRegoDVSCardNumberValidation(elem,stateVal)){allValid=false}}if(item=="cardNumberDL10alphaNumericValidation"){if(!handleCardNumberDL10alphaNumericValidation(elem)){allValid=false}}if(item=="cardNumberDL9alphaNumericValidation"){if(!handleCardNumberDL9alphaNumericValidation(elem)){allValid=false}}if(item=="cardNumberDL10NumericValidation"){if(!handleCardNumberDL10NumericValidation(elem)){allValid=false}}if(item=="cardNumberDL8NumericValidation"){if(!handleCardNumberDL8NumericValidation(elem)){allValid=false}}if(item=="immicardnumber"){if(!handleImmicardNumberValidation(elem)){allValid=false}}if(item=="uszipcodevalidation"){if(!handleUSZipCodeValidation(elem)){allValid=false}}if(item=="canadianpostcodevalidation"){if(!handleCanadianPostcodeValidation(elem)){allValid=false}}if(item=="socialsecuritynumbervalidation"){if(!handleSocialSecurityNumberValidation(elem)){allValid=false}}if(item=="phonenumbervalidation"){if(!handlePhoneNumberValidation(elem)){allValid=false}}if(item=="emailvalidation"){if(!handleEmailValidation(elem)){allValid=false}}if(item=="loosenamevalidation"){if(!handleLooseNameValidation(elem)){allValid=false}}if(item.indexOf("maxlengthvalidation_")==0){if(!handleMaxLengthValidation(elem,item)){allValid=false}}if(item=="sg_postcodevalidation"){if(!handleSgPostcodeValidation(elem)){allValid=false}}if(item=="zapassportvalidation"){if(!handleZAPassportNumberValidation(elem)){allValid=false}}if(item=="ukpassportvalidation"){if(!handleUKPassportNumberValidation(elem)){allValid=false}}if(item=="us_postcodevalidation"||item=="my_postcodevalidation"){if(!handleUsPostcodeValidation(elem)){allValid=false}}if(item=="uk_postcodevalidation"){if(!handleUkPostcodeValidation(elem)){allValid=false}}if(item=="percentagevalidation"){if(!handlePercentageValidation(elem)){allValid=false}}if(item=="dependson-validation"){if(!handleDependsOnValidation(elem)){allValid=false}}if(item=="businessNumberValidation"){if(!handleBusinessNumberValidation(elem)){allValid=false}}if(item=="numericEmptyValidation"){if(!handleNumericEmptyValidation(elem)){allValid=false}}if(item=="numericValidation"){if(!handleNumericValidation(elem)){allValid=false}}if(item=="replaceSpecialChar"){handleReplaceSpecialChar(elem)}if(item=="cbdClientidValidation"){if(!handleCbdClientIdValidation(elem)){allValid=false}}if(item=="cbdRegisterNoValidation"){if(!handleCbdRegisterNoValidation(elem)){allValid=false}}if(item=="cbdEntryNoValidation"){if(!handleCbdEntryNoValidation(elem)){allValid=false}}})}}if(!handleSecurityValidation(elem)){allValid=false}});if(sourceName==="medicaredvs"){var card_color=$("input[name='greenid_medicaredvs_cardColour']").val();if(typeof card_color==="undefined"){card_color=$("[name='cardColour']").val()}var elem=$("#greenid_medicaredvs_expiry");if(typeof elem.val()==="undefined"){elem=$("#documentExpiryDate")}if(card_color.toUpperCase()==="Green".toUpperCase()){if(!handleGreenMedicareExpiryDateValidation(elem)){allValid=false}}else{if(!handleBlueYellowMedicareExpiryDateValidation(elem)){allValid=false}}}if(allValid){$("#"+formId+" :input:visible").each(function(index,data){var elem=$(this);var classStr=elem.attr("class");if(classStr){var classList=classStr.split(/\s+/);if(classList){$.each(classList,function(index,item){if(item=="dobvalidationnew"){var standardDate=module.getStandardDate(elem);elem.val(formatDate(standardDate,"dd/mm/yyyy"))}else if(item=="dobover18validationnew"){var standardDate=module.getStandardDate(elem);elem.val(formatDate(standardDate,"dd/mm/yyyy"))}else if(item=="expirydatevalidationnew"){var standardDate=module.getStandardDate(elem);elem.val(formatDate(standardDate,"dd/mm/yyyy"))}else if(item=="issuedatevalidationnew"){var standardDate=module.getStandardDate(elem);elem.val(formatDate(standardDate,"dd/mm/yyyy"))}})}}})}var event={};event[log.SOURCE]=sourceName;event["allValid"]=allValid;event[log.MESSAGE]="Validation completed";log.info(event);log.flushRemoteLogs();if(checkSourceHeight){greenidUiBehaviours.checkSourceHeight()}return allValid};return module}(greenidJQuery,greenidLog)}
if(!window.greenidUtilsLoaded){window.greenidUtilsLoaded=true;var greenidUtils=function($,staticconfig,log){"use strict";var module={};module.isSupportedBrowser=function(agent){if(agent.indexOf("Windows NT")>=0&&agent.indexOf("Trident")>=0&&agent.indexOf("rv:11")>=0){return false}return true};module.isLocalOrDevServer=function(baseUrl){return baseUrl.startsWith("https://local.vixverify.com")||baseUrl.startsWith("http://localhost")||baseUrl.startsWith("https://dev1.vixverify.com")||baseUrl.startsWith("https://simpleui-dev1.vixverify.com")||baseUrl.startsWith("https://dev2.vixverify.com")||baseUrl.startsWith("https://simpleui-dev2.vixverify.com")||baseUrl.startsWith("https://dev3.vixverify.com")||baseUrl.startsWith("https://simpleui-dev3.vixverify.com")};module.extractHostPrefixFromHost=function(baseUrl){if(baseUrl.indexOf("simpleui-test-au.vixverify.com")>-1){return"test-au"}else if(baseUrl.indexOf("test-au.vixverify.com")>-1){return"test-au"}else if(baseUrl.indexOf("simpleui-au.vixverify.com")>-1){return"au"}else if(baseUrl.indexOf("au.vixverify.com")>-1){return"au"}else if(baseUrl.indexOf("simpleui-staging.vixverify.com")>-1){return"staging"}else if(baseUrl.indexOf("staging.vixverify.com")>-1){return"staging"}else if(baseUrl.indexOf("simpleui-staging2.vixverify.com")>-1){return"staging2"}else if(baseUrl.indexOf("staging2.vixverify.com")>-1){return"staging2"}else if(baseUrl.indexOf("simpleui-dev1.vixverify.com")>-1){return"dev1"}else if(baseUrl.indexOf("simpleui-dev2.vixverify.com")>-1){return"dev2"}else if(baseUrl.indexOf("simpleui-dev3.vixverify.com")>-1){return"dev3"}else if(baseUrl.indexOf("dev1.vixverify.com")>-1){return"dev1"}else if(baseUrl.indexOf("dev2.vixverify.com")>-1){return"dev2"}else if(baseUrl.indexOf("dev3.vixverify.com")>-1){return"dev3"}else if(baseUrl.indexOf("local.vixverify.com")>-1){return"local"}return"au"};module.extractDisabledFieldNameList=function(sourceName){var disabledFieldList=[];$("form."+sourceName+" [disabled='disabled']").each(function(){if($(this).parent().hasClass("input-group")){var disabledFieldId=$(this).parent().prev(".control-label").attr("for")}else{var disabledFieldId=$(this).prev(".control-label").attr("for")}var disabledFieldName=disabledFieldId.split(/[_ ]+/).pop();disabledFieldList.push(disabledFieldName)});return disabledFieldList};module.makeFieldReadOnly=function(usableFieldId){$("#"+usableFieldId).attr({disabled:"disabled",readonly:"readonly"});if($("#"+usableFieldId).parent().hasClass("date")){$("#"+usableFieldId).parent().find(".greenid-datepicker").addClass("greenid-disabled")}return};module.toBoolean=function(value){if(module.isEmpty(value)){return false}var lower=value.toLowerCase();var isTrueSet=lower==="true";return isTrueSet};module.toInteger=function(value){if(module.isEmpty(value)){return 0}var i=parseInt(value);if(i!=NaN){return i}return 0};module.isBooleanValue=function(value){if(module.isEmpty(value)){return false}var lower=value.toLowerCase();var isTrueOrFalse=lower==="true"||lower==="false";return isTrueOrFalse};module.isEmpty=function(value){return typeof value==="undefined"||value===null||value===""};module.isEmptyObject=function(obj){if(module.isEmpty(obj)){return true}for(var prop in obj){if(obj.hasOwnProperty(prop))return false}return JSON.stringify(obj)===JSON.stringify({})};module.formatDate=function(x,y){var greenidDatepicker=$(this).parent().datepicker;var offset=x.getTimezoneOffset();var newDateObj=new Date(x.getTime()-offset*6e4);return greenidDatepicker.DPGlobal.formatDate(newDateObj,y,"en")};module.formatSubmitDate=function(x,y){var greenidDatepicker=$(this).parent().datepicker;return greenidDatepicker.DPGlobal.formatDate(x,y,"en")};module.parseDate=function(x,y){var greenidDatepicker=$(this).parent().datepicker;return greenidDatepicker.DPGlobal.parseDate(x,y,"en")};module.isPending=function(state){return state==="PENDING"};module.isVerified=function(state){return state==="VERIFIED"||state==="VERIFIED_WITH_CHANGES"||state==="VERIFIED_ADMIN"};module.isPassed=function(state){return this.isPending(state)||this.isVerified(state)};module.isLockedOut=function(state){return state==="LOCKED_OUT"};module.isFailed=function(state){return state==="FAILED"};module.isNotContributing=function(state){return state==="NOT_CONTRIBUTING"};module.isCompleted=function(state){return module.isPending(state)||module.isVerified(state)||module.isLockedOut(state)||module.isFailed(state)||module.isNotContributing(state)};module.getSourceFromStatus=function(currentStatus,sourcename){for(var key in currentStatus.sources){var source=currentStatus.sources[key];if(source.name===sourcename){return source}}return null};module.isDocumentScanSource=function(source){var sourceName=source;if(typeof source==="object"){sourceName=source.name}var substring="+scan";return sourceName.indexOf(substring)>-1};module.extractDocumentIdentifierFromMethodName=function(methodName){return methodName.substring(0,methodName.indexOf("+"))};module.waitUntil=function(condition,waitTime,totalWaitTime,maxTime,callback,conditionParameter){if(condition(conditionParameter)){callback()}else{totalWaitTime+=waitTime;if(totalWaitTime>maxTime){callback()}else{setTimeout(function(){module.waitUntil(condition,waitTime,totalWaitTime,maxTime,callback,conditionParameter)},waitTime)}}};module.isElementReady=function(element){if($(element).length>0){return true}else{return false}};module.createObject=function(accountId,apiCode,verificationToken,origin,sourceName){var obj={accountId:accountId,apiCode:apiCode,verificationToken:verificationToken,origin:origin};if(!module.isEmpty(sourceName)){obj["sourceName"]=sourceName}return obj};module.buildJSONStr=function(accountId,apiCode,verificationTokem,origin,sourceName){var obj=module.createObject(accountId,apiCode,verificationTokem,origin,sourceName);var retStr=JSON.stringify(obj);return retStr};module.getNextSourceName=function(currentStatus){var nextSourceName="";var rank=1e4;for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];if(source.visible&&source.onesourceleft){if(source.order<rank){nextSourceName=source.name;rank=source.order}}}}if(nextSourceName===""){for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];if(source.hasOwnProperty("oneSourceLeft")&&source.visible){if(source.order<rank){nextSourceName=source.name;rank=source.order}}}}}log.info(nextSourceName+" is the next source, with order "+rank);return nextSourceName};module.extractSourceFromAugmentedName=function(name){if(name.indexOf("+")>1){var res=name.split("+");return res[0]}return name};module.extractDocumentTypeFromCombinationSourceName=function(name){if(name.indexOf(".")>1){var res=name.split(".");return res[0]}return name};module.extractDocumentRegionFromCombinationSourceName=function(name){if(name.indexOf(".")>1){var res=name.split(".");return res[1]}return name};module.buildPropertyBaseNameForCombinationSource=function(sourceName){if(sourceName===null||sourceName===""){return""}return"combinationsource_"+module.extractSourceFromAugmentedName(sourceName).replace(/\./g,"_").replace(/-/g,"_").toLowerCase()};module.tweakCurrentStatus=function(currentStatus,dlHelper,config){var newSources={};var newOneSourceLeftSources=[];var newOtherSources=[];var dlSource={};var numPassedSources=0;var foundDL=false;dlSource.name="dl";dlSource.available=false;dlSource.notRequired=true;dlSource.oneSourceLeft=false;dlSource.order=1;dlSource.passed=false;dlSource.state="EMPTY";dlSource.isCombo=true;dlSource.suborders=[];dlSource.subnames=[];dlSource.subattributes={};var onesourceleftCount=0;var otherCount=0;var namesCounter=0;var hasOnlyCombinationSources=true;var hasCompletedMobileRegoSource=false;if(!module.isEmpty(currentStatus.overallVerificationStatus)){currentStatus.outcome=currentStatus.overallVerificationStatus}if(currentStatus.outcome!="LOCKED_OUT"){for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];var totalCompletedAttempts=0;var hasComboSourceParent=false;var parentState="";for(var attribute in source.attributes){if(source.attributes.hasOwnProperty(attribute)){if(source.attributes[attribute].name==="totalCompletedAttemptsTowardsLockOut"){totalCompletedAttempts=parseInt(source.attributes[attribute].value)}if(source.attributes[attribute].name==="hasComboSourceParent"){hasComboSourceParent=source.attributes[attribute].value==="true"}if(source.attributes[attribute].name==="parentState"){parentState=source.attributes[attribute].value}}}if(module.isDocumentScanSource(source.name)){var sourcePropertyName=module.buildPropertyBaseNameForCombinationSource(source.name)+"_short_title";if(config.get(sourcePropertyName)){source.title=config.get(sourcePropertyName)}else if(source.name.indexOf(".")>0){var splits=module.extractSourceFromAugmentedName(source.name).split(".");source.title=splits[0]+" ("+splits[1]+")"}else{source.title=module.extractSourceFromAugmentedName(source.name)}var attemptLimit=-1;attemptLimit=parseInt(module.getAttemptLimitForComboSourceUsingConfig(currentStatus,source.name,config));source.visible=!source.passed&&module.checkSourceStateCanDoMoreAttempts(source.state);if(!source.visible&&hasComboSourceParent&&parentState==="FAILED"){source.visible=true;source.passed=false}if(dlHelper.isMobileRegoSource(source.name)&&!source.visible){hasCompletedMobileRegoSource=true}if(Number.isInteger(totalCompletedAttempts)&&Number.isInteger(attemptLimit)){if(attemptLimit!==-1){source.visible=source.visible&&!(totalCompletedAttempts>=attemptLimit)}}source.visible=source.visible&&source.available&&!source.notRequired;if(source.passed){numPassedSources++}if(source.oneSourceLeft){newOneSourceLeftSources[onesourceleftCount++]=source}else{newOtherSources[otherCount++]=source}}else{hasOnlyCombinationSources=false;if(config.get(source.name+"_short_title")!=null){source.title=config.get(source.name+"_short_title")}else{source.title=source.name}if(dlHelper.isRego(source.name)){if(source.available){foundDL=true;source.hasComboSourceParent=hasComboSourceParent;source.parentState=parentState;dlHelper.applyDLSource(source,dlSource)}}else{source.visible=!source.passed&&module.checkSourceStateCanDoMoreAttempts(source.state);if(!source.visible&&hasComboSourceParent&&parentState==="FAILED"){source.visible=true;source.passed=false}source.visible=source.visible&&source.available&&!source.notRequired;if(source.oneSourceLeft){newOneSourceLeftSources[onesourceleftCount++]=source}else{newOtherSources[otherCount++]=source}}if(source.passed){numPassedSources++}}}}}if(hasCompletedMobileRegoSource){for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];if(module.isDocumentScanSource(source.name)&&dlHelper.isMobileRegoSource(source.name)){source.visible=false}}}}if(foundDL){dlSource.title=config.get(dlSource.name+"_short_title");dlSource.visible=!dlSource.passed&&module.checkSourceStateCanDoMoreAttempts(dlSource.state);dlSource.visible=dlSource.visible&&dlSource.available&&!dlSource.notRequired;if(dlSource.oneSourceLeft){newOneSourceLeftSources[onesourceleftCount++]=dlSource}else{newOtherSources[otherCount++]=dlSource}}if(module.toBoolean(staticconfig.properties["showUploadDocument"])){if(module.toInteger(staticconfig.properties["group.A.choices"])>0){var uploadSource={};uploadSource.name="upload";uploadSource.title=config.get(uploadSource.name+"_short_title");uploadSource.available=true;uploadSource.visible=true;uploadSource.notRequired=false;uploadSource.oneSourceLeft=false;uploadSource.order=400;uploadSource.passed=false;uploadSource.state="EMPTY";uploadSource.isCombo=false;newOtherSources[otherCount++]=uploadSource}}newOtherSources.sort(function(a,b){return a.order-b.order});newOneSourceLeftSources.sort(function(a,b){return a.order-b.order});var i=0;for(var key in newOneSourceLeftSources){if(newOneSourceLeftSources.hasOwnProperty(key)){var source=newOneSourceLeftSources[key];source.order=i;newSources[i++]=source}}for(var key2 in newOtherSources){if(newOtherSources.hasOwnProperty(key2)){var source=newOtherSources[key2];source.order=i;newSources[i++]=source}}currentStatus.showAuspost=module.toBoolean(staticconfig.properties["showPostOfficeForm"])&&!currentStatus.hasPostOffice;currentStatus.showCompleteLater=config.get("enable_save_and_complete_later");currentStatus.sources=newSources;currentStatus.numPassedSources=numPassedSources;currentStatus.showCancelInDropDown=false;if(staticconfig.getHostedMode()){currentStatus.showCompleteLater=false;currentStatus.showCancelInDropDown=true}currentStatus.showManualOptionDiv=currentStatus.showAuspost||currentStatus.showCompleteLater||currentStatus.showCancelInDropDown;currentStatus.hasOnlyCombinationSources=hasOnlyCombinationSources;return currentStatus};module.checkSourceStateCanDoMoreAttempts=function(state){return state!="PENDING"&&state!="LOCKED_OUT"&&state!="FAILED"&&state!="NOT_CONTRIBUTING"};module.extractWebServiceName=function(currentStatus,sourceName,dlHelper){if(currentStatus){var isDLSource=dlHelper.isRego(sourceName);var attributes;for(var key in currentStatus.sources){var source=currentStatus.sources[key];if(source.name===sourceName){attributes=source.attributes;break}else if(isDLSource&&source.name==="dl"){attributes=source.subattributes[sourceName];break}}if(attributes){for(var attributeKey in attributes){if(attributes.hasOwnProperty(attributeKey)){var attribute=attributes[attributeKey];if(attribute.name==="webServiceName"){return attribute.value}}}}}return sourceName};module.accessibleClick=function(event){if(event.type==="click"){return true}else if(event.type==="keypress"){var code=event.charCode||event.keyCode;if(code===32||code===13){return true}}else{return false}};function getComboSourceResult(currentStatus,sourceIdentifier){var sourceToGet;for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];if(source.name.includes(sourceIdentifier)){sourceToGet=source;break}}}return sourceToGet}function getComboSourceResultAttributeValue(sourceResult,attributeName){if(sourceResult!==undefined){for(var attribute in sourceResult.attributes){if(sourceResult.attributes.hasOwnProperty(attribute)){if(sourceResult.attributes[attribute].name===attributeName){return sourceResult.attributes[attribute].value}}}}return undefined}module.getNumOfAttemptsForComboSource=function(currentStatus,sourceIdentifier){var totalCompletedAttempts=0;var sourceToGet=getComboSourceResult(currentStatus,sourceIdentifier);var tmp=getComboSourceResultAttributeValue(sourceToGet,"totalCompletedAttemptsTowardsLockOut");if(tmp!=undefined){totalCompletedAttempts=tmp}return totalCompletedAttempts};module.getLockOutReasonForComboSource=function(currentStatus,sourceIdentifier){var sourceToGet=getComboSourceResult(currentStatus,sourceIdentifier);return getComboSourceResultAttributeValue(sourceToGet,"lockOutReason")};module.getAttemptLimitForComboSource=function(currentStatus,sourceIdentifier){var tempIdentifier=sourceIdentifier;if(tempIdentifier.indexOf("+")>-1){tempIdentifier=sourceIdentifier.substr(0,sourceIdentifier.indexOf("+"))}var attemptLimit=-1;if(greenidSimpleOnBoard.getMobileConfigParam("so.simpleui.allowed.combo.source.attempts")!==undefined){attemptLimit=greenidSimpleOnBoard.getMobileConfigParam("so.simpleui.allowed.combo.source.attempts")}if(greenidSimpleOnBoard.getMobileConfigParam("so.simpleui.allowed.combo.source.attempts."+tempIdentifier)!==undefined){attemptLimit=greenidSimpleOnBoard.getMobileConfigParam("so.simpleui.allowed.combo.source.attempts."+tempIdentifier)}return attemptLimit};module.getAttemptLimitForComboSourceWithSOConfig=function(currentStatus,sourceIdentifier,soConfig){var tempIdentifier=sourceIdentifier;if(tempIdentifier.indexOf("+")>-1){tempIdentifier=sourceIdentifier.substr(0,sourceIdentifier.indexOf("+"))}var attemptLimit=-1;if(soConfig["so.simpleui.allowed.combo.source.attempts"]!==undefined){attemptLimit=soConfig["so.simpleui.allowed.combo.source.attempts"]}if(soConfig["so.simpleui.allowed.combo.source.attempts."+tempIdentifier]!==undefined){attemptLimit=soConfig["so.simpleui.allowed.combo.source.attempts."+tempIdentifier]}return attemptLimit};module.getAttemptLimitForComboSourceUsingConfig=function(currentStatus,sourceIdentifier,config){var tempIdentifier=sourceIdentifier;if(tempIdentifier.indexOf("+")>-1){tempIdentifier=sourceIdentifier.substr(0,sourceIdentifier.indexOf("+"))}var attemptLimit=-1;if(config.get("allowed.combo.source.attempts")){attemptLimit=config.get("allowed.combo.source.attempts")}if(config.get("allowed.combo.source.attempts."+tempIdentifier)){attemptLimit=config.get("allowed.combo.source.attempts."+tempIdentifier)}return attemptLimit};module.wasLastComboSourceAttemptWithConfig=function(currentStatus,sourceIdentifier,config){var attempts=parseInt(module.getNumOfAttemptsForComboSource(currentStatus,sourceIdentifier));var attemptLimit=parseInt(module.getAttemptLimitForComboSourceWithSOConfig(currentStatus,sourceIdentifier,config));var wasLastAttempt=false;if(Number.isInteger(attemptLimit)&&Number.isInteger(attempts)){if(attemptLimit!==-1){wasLastAttempt=attempts>=attemptLimit}}else{var event={};event[log.MESSAGE]="wasLastComboSourceAttemptWithConfig - could not parse integer from config";event[log.ACCOUNT_ID]=config.gidAccountId;event[log.VERIFICATION_TOKEN]=config.gidVerificationToken;event["attemptLimit"]=attemptLimit;event["attempts"]=attempts;log.info(event)}return wasLastAttempt};module.wasLastComboSourceAttemptLocked=function(currentStatus,sourceIdentifier){for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];if(source.name===sourceIdentifier+"+scan+face"){if(source.state==="LOCKED_OUT"){return true}return false}}}return false};module.wasLastComboSourceAttempt=function(currentStatus,sourceIdentifier){var attempts=parseInt(module.getNumOfAttemptsForComboSource(currentStatus,sourceIdentifier));var attemptLimit=parseInt(module.getAttemptLimitForComboSource(currentStatus,sourceIdentifier));var wasLastAttempt=false;if(Number.isInteger(attemptLimit)&&Number.isInteger(attempts)){if(attemptLimit!==-1){wasLastAttempt=attempts>=attemptLimit}}else{var event={};event[log.MESSAGE]="wasLastComboSourceAttempt - could not parse integer from config";event["attemptLimit"]=attemptLimit;event["attempts"]=attempts;log.info(event)}return wasLastAttempt};module.handlebarsCompareHelper=function(lvalue,operator,rvalue,options){var operators,result;if(arguments.length<3){throw new Error("Handlerbars Helper 'compare' needs 2 parameters")}if(options===undefined){options=rvalue;rvalue=operator;operator="==="}operators={"==":function(l,r){return l==r},"===":function(l,r){return l===r},"!=":function(l,r){return l!=r},"!==":function(l,r){return l!==r},"<":function(l,r){return l<r},">":function(l,r){return l>r},"<=":function(l,r){return l<=r},">=":function(l,r){return l>=r},typeof:function(l,r){return typeof l==r}};if(!operators[operator]){throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+operator)}result=operators[operator](lvalue,rvalue);if(result){return options.fn(this)}else{return options.inverse(this)}};module.removePIIFromJSONString=function(jsonString){var keysToRemove=["dob","address","documentNumber","secondaryNumber","tertiaryNumber","MRZ"];return module.removePIIFromJSONStringWithKeys(jsonString,keysToRemove)};module.removePIIFromJSONStringWithKeys=function(jsonString,keysToRemove){for(var i=0;i<keysToRemove.length;i++){var str1='"'+keysToRemove[i]+'":"[^"]*"';var re=new RegExp(str1,"g");jsonString=jsonString.replace(re,'"'+keysToRemove[i]+'":"XXX"')}return jsonString};module.sourcesContainCombinationSource=function(sources){let result=false;for(var key in sources){if(sources.hasOwnProperty(key)){if(module.isDocumentScanSource(sources[key])){result=true;break}}}return result};module.encodeURIString=function(s){return encodeURIComponent(s).replace(/'/g,"%27")};module.sourcesListContainsDocument=function(sourcesList,documentIdentifier){if(!(sourcesList&&documentIdentifier)){return false}for(var key in sourcesList){if(sourcesList.hasOwnProperty(key)){var source=sourcesList[key];if(source===documentIdentifier){return true}}}return false};var checkNestedDocSelectNames=function(nestedKey,checkMatch,config){if(config["so.doc.select.nestedoption."+nestedKey+".1"]){var i=1;while(config["so.doc.select.nestedoption."+nestedKey+"."+i]){var documentIdentifier=config["so.doc.select.nestedoption."+nestedKey+"."+i];if(checkMatch.indexOf(documentIdentifier)>=0){return config["so.doc.select."+documentIdentifier+".documentName"]}i++}}return null};module.webBuildDocSelectAlertContext=function(currentStatus,comboSourceContext,context,config){if(comboSourceContext==="error"){context.docSelectTitle=config["biometrics_docselect_heading_error"];context.docSelectInstructions=config["biometrics_docselect_instructions_error"];context.displayDocSelectAlert=true;context.docSelectAlertClass="failed";context.docSelectAlertText=config["biometrics_docselect_alert_error"]}else if(comboSourceContext==="authenticityFail"){context.docSelectTitle=config["biometrics_docselect_heading_auth"];context.docSelectInstructions=config["biometrics_docselect_instructions_auth"];context.displayDocSelectAlert=true;context.docSelectAlertClass="failed";context.docSelectAlertText=config["biometrics_docselect_alert_auth"]}else{var mostRecentComboSourceOutcome=comboSourceContext.mostRecentComboSourceOutcome;var mostRecentComboSourceName="document";var i=1;while(config["so.doc.select.option."+i]){var documentIdentifier=config["so.doc.select.option."+i];if(documentIdentifier!==null&&comboSourceContext.mostRecentComboSource!==null){if(comboSourceContext.mostRecentComboSource.indexOf(documentIdentifier)>=0){mostRecentComboSourceName=config["so.doc.select."+documentIdentifier+".documentName"]}else if(config["so.doc.select."+documentIdentifier+".aidDocumentType"]=="nestedoption"){var childMatch=checkNestedDocSelectNames(config["so.doc.select."+documentIdentifier+".documentName"],comboSourceContext.mostRecentComboSource,config);if(childMatch!=null){mostRecentComboSourceName=childMatch}}}i++}var errorAlertText="We were unable to process your "+mostRecentComboSourceName+" using the photos you took, and <strong>we need you to try again</strong>.";var wasLastAttempt=module.wasLastComboSourceAttemptWithConfig(currentStatus,comboSourceContext.mostRecentComboSource,config);var lastAttemptWasLocked=module.wasLastComboSourceAttemptLocked(currentStatus,comboSourceContext.mostRecentComboSource);if(mostRecentComboSourceOutcome.indexOf("verified")>-1||mostRecentComboSourceOutcome==="pending"){context.docSelectTitle=config["biometrics_docselect_heading_success"];context.docSelectInstructions=config["biometrics_docselect_instructions_success"]}if(mostRecentComboSourceOutcome==="in_progress"||mostRecentComboSourceOutcome==="failed"){if(module.toBoolean(config["so.doc.select.fail.use.error.text"])){context.docSelectTitle=config["biometrics_docselect_heading_error"];context.docSelectAlertText=errorAlertText}else{context.docSelectTitle=config["biometrics_docselect_heading_fail"];context.docSelectAlertText="We couldn't verify you using the data you submitted from your "+mostRecentComboSourceName+", so <strong>we need you to try again</strong>."}if(wasLastAttempt||lastAttemptWasLocked){context.docSelectTitle=config["biometrics_docselect_heading_lockout_limit"];context.docSelectInstructions=config["biometrics_docselect_instructions_lockout"];context.docSelectAlertClass="lockout";context.docSelectAlertText="You've been <strong>locked out of the "+mostRecentComboSourceName+" source</strong> because you've tried it too many times without success."}else{context.docSelectInstructions=config["biometrics_docselect_instructions_fail"];context.docSelectAlertClass="failed"}context.displayDocSelectAlert=true}if(mostRecentComboSourceOutcome==="not_contributing"){context.docSelectTitle=config["biometrics_docselect_heading_not_contributing"];context.docSelectAlertText="Your "+mostRecentComboSourceName+" may no longer be valid.";context.displayDocSelectAlert=true;context.docSelectAlertClass="failed";context.docSelectInstructions=config["biometrics_docselect_instructions_not_contributing"]}if(mostRecentComboSourceOutcome==="error"){context.docSelectTitle=config["biometrics_docselect_heading_error"];if(wasLastAttempt){context.docSelectInstructions=config["biometrics_docselect_instructions_error_final_attempt"]}else{context.docSelectInstructions=config["biometrics_docselect_instructions_error"]}context.displayDocSelectAlert=true;context.docSelectAlertClass="failed";context.docSelectAlertText=errorAlertText}}return context};module.webFilterSourcesList=function(currentStatus){if(currentStatus){var sourcesList=[];for(var key in currentStatus.sources){if(currentStatus.sources.hasOwnProperty(key)){var source=currentStatus.sources[key];if(source.visible){var comboSourceIdentifier=module.extractDocumentIdentifierFromMethodName(source.name);sourcesList.push(comboSourceIdentifier)}}}return sourcesList}return null};module.filterDocSources=function(config,sourcesList,theCurrentStatus){if(config["so.doc.select.option.1"]){var docs=[];var i=1;while(config["so.doc.select.option."+i]){var doc={};var documentIdentifier=config["so.doc.select.option."+i];var splitDocumentIdentifier=documentIdentifier.split(".");doc.name=config["so.doc.select."+documentIdentifier+".name"];doc.description=config["so.doc.select."+documentIdentifier+".description"];doc.documentName=module.encodeURIString(config["so.doc.select."+documentIdentifier+".documentName"]);doc.documentType=module.encodeURIString(splitDocumentIdentifier[0]);doc.documentNumber=i;if(splitDocumentIdentifier.length>1){doc.documentRegion=module.encodeURIString(splitDocumentIdentifier[1])}doc.aidDocumentType=module.encodeURIString(config["so.doc.select."+documentIdentifier+".aidDocumentType"]);doc.cssClass=config["so.doc.select."+documentIdentifier+".cssClass"];doc.backOfCard=module.encodeURIString(config["so.doc.select."+documentIdentifier+".backOfCard"]);doc.customJourneyDefinition=config["so.doc.select."+documentIdentifier+".customJourneyDefinition"];if(doc.aidDocumentType==="nestedoption"){doc.isNestedOption=true;doc.nestedChildren=module.buildNestedDocSelectChildren(config,doc.documentName,sourcesList,i,theCurrentStatus);doc.nestedIndex=i}if(!module.isEmpty(doc.documentRegion)){doc.documentType+="."+doc.documentRegion}if(sourcesList){if(module.sourcesListContainsDocument(sourcesList,doc.documentType)){if(theCurrentStatus.mostRecentOCRAttemptOutcome==="not_contributing"&&theCurrentStatus.mostRecentOCRAttemptDocumentIdentifier===doc.documentType){i++;continue}docs.push(doc)}else if(doc.aidDocumentType=="nestedoption"){docs.push(doc)}}else{docs.push(doc)}i++}return docs}};module.buildNestedDocSelectChildren=function(config,nestedKey,sourcesList,nestedIndex,theCurrentStatus){var docs=[];if(config["so.doc.select.nestedoption."+nestedKey+".1"]){var i=1;while(config["so.doc.select.nestedoption."+nestedKey+"."+i]){var doc={};var documentIdentifier=config["so.doc.select.nestedoption."+nestedKey+"."+i];var splitDocumentIdentifier=documentIdentifier.split(".");doc.name=config["so.doc.select."+documentIdentifier+".name"];doc.description=config["so.doc.select."+documentIdentifier+".description"];doc.documentName=module.encodeURIString(config["so.doc.select."+documentIdentifier+".documentName"]);doc.documentType=module.encodeURIString(splitDocumentIdentifier[0]);doc.documentNumber=i;doc.nestedParentIndex=nestedIndex;if(splitDocumentIdentifier.length>1){doc.documentRegion=module.encodeURIString(splitDocumentIdentifier[1])}doc.aidDocumentType=module.encodeURIString(config["so.doc.select."+documentIdentifier+".aidDocumentType"]);doc.cssClass=config["so.doc.select."+documentIdentifier+".cssClass"];doc.backOfCard=module.encodeURIString(config["so.doc.select."+documentIdentifier+".backOfCard"]);if(!greenidUtils.isEmpty(doc.documentRegion)){doc.documentType+="."+doc.documentRegion}if(sourcesList){if(module.sourcesListContainsDocument(sourcesList,doc.documentType)){if(theCurrentStatus.mostRecentOCRAttemptOutcome==="not_contributing"&&theCurrentStatus.mostRecentOCRAttemptDocumentIdentifier===doc.documentType){i++;continue}docs.push(doc)}}else{docs.push(doc)}i++}}return docs};module.webGetPropertyName=function(configuration,cardType,fieldName){var cardSpecificPropertyValue="so.confirmation.field."+cardType+"."+fieldName;var propertyValueToReturn=configuration[cardSpecificPropertyValue];if(module.isEmpty(propertyValueToReturn)){var defaultValue="so.confirmation.field."+fieldName;propertyValueToReturn=configuration[defaultValue]}return propertyValueToReturn};module.webAddFieldTypeSpecificSetting=function(configuration,selectedDocumentType,confirmationFieldsConfig){var FIELD_VALUE="fieldValue";var FIELD_NAME="fieldName";var OPTION_VALUE="optionValue";var OPTION_LABEL="optionLabel";for(var i=0;i<confirmationFieldsConfig.length;i++){var fieldConfig=confirmationFieldsConfig[i];var fieldType=fieldConfig["fieldType"];if(fieldType==="text"){fieldConfig["textFieldType"]=true;fieldConfig["textOrMultiline"]=true}else if(fieldType==="multiLineText"){fieldConfig["multiLineTextFieldType"]=true;fieldConfig["textOrMultiline"]=true}else if(fieldType==="date"){fieldConfig["dateTypeField"]=true;optionConfigString=module.webGetPropertyName(configuration,selectedDocumentType,fieldConfig[FIELD_NAME]+"."+"dateFormat");confirmationFieldsConfig[i]["dateFormat"]=optionConfigString;if(fieldConfig[FIELD_VALUE]==="null"){fieldConfig[FIELD_VALUE]=undefined;continue}if(!module.isEmpty(optionConfigString)){if(fieldConfig[FIELD_VALUE]&&fieldConfig[FIELD_VALUE].day){fieldConfig[FIELD_VALUE]=greenidValidator.buildValidDate(fieldConfig[FIELD_VALUE].day,fieldConfig[FIELD_VALUE].month,fieldConfig[FIELD_VALUE].year).date}if(!(fieldConfig[FIELD_VALUE]instanceof Date)&&fieldConfig[FIELD_VALUE]&&!module.isEmpty(optionConfigString)){try{var originalDateAsString=module.padDateWithZeros(fieldConfig[FIELD_VALUE]);var parsedDate=module.parseDate(fieldConfig[FIELD_VALUE],"dd/mm/yyyy");var offset=parsedDate.getTimezoneOffset();fieldConfig[FIELD_VALUE]=new Date(parsedDate.getTime()+offset*6e4);var newDateAsString=module.padDateWithZeros(module.formatDate(new Date(fieldConfig[FIELD_VALUE].getFullYear(),fieldConfig[FIELD_VALUE].getMonth(),fieldConfig[FIELD_VALUE].getDate(),12,0,0),"dd/mm/yyyy"));if(originalDateAsString!=newDateAsString){fieldConfig[FIELD_VALUE]=undefined;continue}}catch(error){fieldConfig[FIELD_VALUE]=undefined;continue}}if(fieldConfig[FIELD_VALUE]instanceof Date&&!isNaN(fieldConfig[FIELD_VALUE].valueOf())){fieldConfig[FIELD_VALUE]=module.formatDate(new Date(fieldConfig[FIELD_VALUE].getFullYear(),fieldConfig[FIELD_VALUE].getMonth(),fieldConfig[FIELD_VALUE].getDate()),optionConfigString)}else{fieldConfig[FIELD_VALUE]=undefined}}}else if(fieldType==="dropdown"){fieldConfig["dropdownFieldType"]=true;fieldConfig["defaultFieldLabel"]=fieldConfig["fieldLabel"].toLowerCase();var optionConfigString=module.webGetPropertyName(configuration,selectedDocumentType,fieldConfig[FIELD_NAME]+"."+"fieldOptions");if(!module.isEmpty(optionConfigString)){var optionList=optionConfigString.split("~");var options=[];for(var j=0;j<optionList.length;j++){var option=[];option[OPTION_LABEL]=optionList[j];var optionValue=module.webGetPropertyName(configuration,selectedDocumentType,fieldConfig[FIELD_NAME]+".option."+option[OPTION_LABEL]+"."+OPTION_VALUE);if(module.isEmpty(optionValue)){optionValue=optionList[j]}option[OPTION_VALUE]=optionValue;options.push(option);if(!module.isEmpty(option[OPTION_VALUE])&&fieldConfig[FIELD_VALUE]){if(option[OPTION_VALUE].toLowerCase()===fieldConfig[FIELD_VALUE].toLowerCase()){fieldConfig["selectedOptionIndex"]=j}}}fieldConfig["fieldOptions"]=options}}else if(fieldType==="vueComponent"){fieldConfig["vueComponentFieldType"]=true}}};module.webGetConfirmationFieldValueFromData=function(fieldName,defaultValue,data){var key=fieldName;var value;if(!module.isEmpty(data)&&data.hasOwnProperty(key)){value=data[key]}else if(data.hasOwnProperty(key)){value=data[key]}else if(!module.isEmpty(data.address)&&data.address.hasOwnProperty(key)){value=data.address[key]}else if(!module.isEmpty(data.name)&&data.name.hasOwnProperty(key)){value=data.name[key]}if(module.isEmpty(value)){value=defaultValue}return value};module.webUpdateConfirmationFieldItemsValue=function(confirmationFieldsConfig,data){for(var i=0;i<confirmationFieldsConfig.length;i++){confirmationFieldsConfig[i]["fieldValue"]=module.webGetConfirmationFieldValueFromData(confirmationFieldsConfig[i]["fieldName"],confirmationFieldsConfig[i]["default"],data)}};module.webSetPlaceholderText=function(fieldConfig,data){if(typeof fieldConfig.fieldRequired!=="boolean"){fieldConfig.fieldRequired=module.toBoolean(fieldConfig.fieldRequired)}if(data.result==="UNREADABLE_DOCUMENT"&&!fieldConfig.fieldRequired){fieldConfig.placeholderText="Optional";if(fieldConfig.fieldType==="dropdown"){fieldConfig.placeholderText=" (optional)"}}else if(data.result!=="UNREADABLE_DOCUMENT"&&fieldConfig.fieldRequired){fieldConfig.placeholderText="Required";if(fieldConfig.fieldType==="dropdown"){fieldConfig.placeholderText=" (required)"}}else{fieldConfig.placeholderText=""}fieldConfig.docUnreadable=false;if(data.result==="UNREADABLE_DOCUMENT"){fieldConfig.docUnreadable=true}return fieldConfig};module.webGetFieldConfig=function(configuration,selectedDocumentType,fieldName){var fieldConfig={};var fieldConfigs=["fieldType","fieldLabel","fieldClass","fieldRequired","helpText","default","fieldRegex","fieldRegexError","vueComponentName","vueComponentEmit","containerClass","useHarmony"];fieldConfig["fieldName"]=fieldName;for(var i=0;i<fieldConfigs.length;i++){var cardSpecificValue="so.confirmation.field."+selectedDocumentType+"."+fieldName+"."+fieldConfigs[i];if(configuration[cardSpecificValue]){fieldConfig[fieldConfigs[i]]=configuration[cardSpecificValue]}else{var defaultValue="so.confirmation.field."+fieldName+"."+fieldConfigs[i];fieldConfig[fieldConfigs[i]]=configuration[defaultValue]}}return fieldConfig};module.webPopulateConfirmationFieldItems=function(configuration,selectedDocumentType,data){var confirmationFieldsConfig=[];var confFieldsEntry="so."+selectedDocumentType+".confirmationfields";if(configuration[confFieldsEntry]){configuration["mobileExtraDataListForRegistration"]=configuration["so."+selectedDocumentType+".confirmationfields"];var confirmationFields=configuration[confFieldsEntry].replace(/\s*,\s*/g,",").split(",");for(var i=0;i<confirmationFields.length;i++){var field=confirmationFields[i];var fieldConfig=module.webGetFieldConfig(configuration,selectedDocumentType,field);module.webSetPlaceholderText(fieldConfig,data);confirmationFieldsConfig.push(fieldConfig)}module.webUpdateConfirmationFieldItemsValue(confirmationFieldsConfig,data);module.webAddFieldTypeSpecificSetting(configuration,selectedDocumentType,confirmationFieldsConfig);module.webFixFieldNamesToCustomerSetup(configuration,confirmationFieldsConfig)}return confirmationFieldsConfig};module.webPopulateExtraDataFieldItems=function(configuration,selectedDocumentType,data){var confirmationFieldsConfig=[];var confFieldsEntry="so."+selectedDocumentType+".extrafields";if(configuration[confFieldsEntry]){var confirmationFields=configuration[confFieldsEntry].replace(/\s*,\s*/g,",").split(",");for(var i=0;i<confirmationFields.length;i++){var field=confirmationFields[i];var fieldConfig=module.webGetFieldConfig(configuration,selectedDocumentType,field);module.webSetPlaceholderText(fieldConfig,data);confirmationFieldsConfig.push(fieldConfig)}module.webUpdateConfirmationFieldItemsValue(confirmationFieldsConfig,data);module.webAddFieldTypeSpecificSetting(configuration,selectedDocumentType,confirmationFieldsConfig);module.webFixFieldNamesToCustomerSetup(configuration,confirmationFieldsConfig)}return confirmationFieldsConfig};module.webGetHarmonyHiddenFields=function(configuration,confirmDetails){var harmonyHiddenFields=[];var confirmationFieldsConfig=confirmDetails.extraDataItems;for(var i=0;i<confirmationFieldsConfig.length;i++){var extraDataItem=confirmationFieldsConfig[i];if(extraDataItem.useHarmony==="true"){var items=module.webConfigHarmony(confirmDetails,configuration);harmonyHiddenFields.push.apply(harmonyHiddenFields,items)}}return harmonyHiddenFields};module.webFixFieldNamesToCustomerSetup=function(configuration,confirmationFieldsConfig){for(var i=0;i<confirmationFieldsConfig.length;i++){var fieldName=confirmationFieldsConfig[i]["fieldName"];if(fieldName=="givenName"){fieldName="givenNames"}if(!module.isEmpty(configuration["gidFormIds"][fieldName])){confirmationFieldsConfig[i]["fieldName"]=configuration["gidFormIds"][fieldName]}}};module.webCheckIfAllFieldsAreRequired=function(configuration,selectedDocumentType){var allFieldsRequired=true;if(configuration["so."+selectedDocumentType+".confirmationfields"]){var confirmationFields=configuration["so."+selectedDocumentType+".confirmationfields"].replace(/\s*,\s*/g,",").split(",");for(var i=0;i<confirmationFields.length;i++){var field=confirmationFields[i];var fieldConfig=module.webGetFieldConfig(configuration,selectedDocumentType,field);var fieldRequired=module.toBoolean(fieldConfig.fieldRequired);if(!fieldRequired){allFieldsRequired=false}}}return allFieldsRequired};module.webConfigHarmony=function(context,config){try{var result=config["harmony.user.password"].split(":");context.HarmonyUser=result[0];context.HarmonyPassword=result[1]}catch(err){return}var countryConfig=module.webHarmonyCountryMapping(context.country);if(countryConfig.code===Harmony.NEW_ZEALAND){context.HarmonySOT=Harmony.NZPAF;if(config["harmony.use.nzad.source"]=="true"){context.HarmonySOT=Harmony.NZAD}if(!greenidUtils.isEmpty(config["harmony.nz.source"])){context.HarmonySOT=config["harmony.nz.source"]}}else{context.HarmonySOT=Harmony.AUPAF;if(config["harmony.use.gnaf.source"]=="true"){context.HarmonySOT=Harmony.GNAF}if(!greenidUtils.isEmpty(config["harmony.au.source"])){context.HarmonySOT=config["harmony.au.source"]}}context.HarmonyCode=countryConfig.code;var items=[];countryConfig.fields.forEach(function(field){var item={};item.fieldName=field.name;items.push(item)});return items};module.webHarmonyCountryMapping=function(country){var countryMapping={AU:{code:Harmony.AUSTRALIA,sot:Harmony.AUPAF,fields:[{name:"flatNumber",harmonyCode:Harmony.FLAT_UNIT_NUMBER,required:false},{name:"streetNumber",harmonyCode:Harmony.STREET_NUMBER,required:false},{name:"streetName",harmonyCode:Harmony.STREET_NAME,required:true},{name:"streetType",harmonyCode:Harmony.STREET_TYPE,required:false},{name:"suburb",harmonyCode:Harmony.LOCALITY,required:true},{name:"state",harmonyCode:Harmony.STATE,required:true},{name:"postcode",harmonyCode:Harmony.POSTCODE,required:true}]},NZ:{code:Harmony.NEW_ZEALAND,sot:Harmony.NZPAF,fields:[{name:"flatNumber",harmonyCode:Harmony.FLAT_UNIT_NUMBER,required:false},{name:"streetNumber",harmonyCode:Harmony.STREET_NUMBER,required:false},{name:"streetName",harmonyCode:Harmony.STREET_NAME,required:true},{name:"streetType",harmonyCode:Harmony.STREET_TYPE,required:false},{name:"suburb",harmonyCode:Harmony.SUBURB,required:false},{name:"townCity",harmonyCode:Harmony.TOWN_CITY,required:false},{name:"postcode",harmonyCode:Harmony.POSTCODE,required:true}]}};return countryMapping[country]};module.webInitHarmony=function(config,country){var harmonyConfig={};harmonyConfig.country=country;var items=module.webConfigHarmony(harmonyConfig,config);var user=harmonyConfig.HarmonyUser;var pword=harmonyConfig.HarmonyPassword;var code=harmonyConfig.HarmonyCode;var sot=harmonyConfig.HarmonySOT;if(user&&pword){Harmony.init(user,pword,code);Harmony.UI.addressLookup($("#fullAddress"),sot);var countryConfig=module.webHarmonyCountryMapping(country);countryConfig.fields.forEach(function(field){Harmony.UI.addField(field.harmonyCode,$("#"+field.name))})}};module.webShowExtraDataItems=function(configuration,selectedDocumentType){var extraFieldKey="so."+selectedDocumentType+".extrafields";if(configuration[extraFieldKey]&&configuration[extraFieldKey].split(",").length>0){return true}return false};module.webCreateConfirmDetails=function(configuration,selectedDocumentType,data,attemptId,accountId,apiCode){log.info(data.confirmationData);var confirmDetails={};confirmDetails.country="AU";var dataEn=data.lang.en;confirmDetails.showNavButton=true;greenidClientContext.modalContainer="#greenid-so-content-confirm-details";if(data.result==="UNREADABLE_DOCUMENT"){confirmDetails.unreadable=true}if(!module.isEmpty(dataEn.issueDate)){if(dataEn.issueDate.day!=0&&dataEn.issueDate.month!=0&&dataEn.issueDate.year!=0){confirmDetails["documentIssueDate"]=module.addLeadingZerosIfNeeded(dataEn.issueDate.day,2)+"/"+module.addLeadingZerosIfNeeded(dataEn.issueDate.month,2)+"/"+module.addLeadingZerosIfNeeded(dataEn.issueDate.year,4)}}if(!module.isEmpty(dataEn.expiryDate)){if(dataEn.expiryDate.day!=0&&dataEn.expiryDate.month!=0&&dataEn.expiryDate.year!=0){confirmDetails["documentExpiryDate"]=module.addLeadingZerosIfNeeded(dataEn.expiryDate.day,2)+"/"+module.addLeadingZerosIfNeeded(dataEn.expiryDate.month,2)+"/"+module.addLeadingZerosIfNeeded(dataEn.expiryDate.year,4)}}if(!module.isEmpty(dataEn.confirmationData)&&!module.isEmpty(dataEn.confirmationData.defaultCountry)){confirmDetails.country=dataEn.confirmationData.defaultCountry}if(!module.isEmpty(dataEn.address)&&!module.isEmpty(dataEn.address.country)){confirmDetails.country=dataEn.address.country}confirmDetails.ruleId="default";confirmDetails.imageCode=attemptId;confirmDetails.attemptId=attemptId;confirmDetails.documentType=dataEn.documentType;confirmDetails.accountId=accountId;confirmDetails.apiCode=apiCode;if(confirmDetails.showPostcodeOnly){confirmDetails.showHiddenCountry=true}confirmDetails.showExtraDataItems=false;confirmDetails.confirmationFieldItems=module.webPopulateConfirmationFieldItems(dataEn);confirmDetails.allFieldsRequired=module.webCheckIfAllFieldsAreRequired(configuration,selectedDocumentType);var extraFieldData=[];if(module.webShowExtraDataItems(configuration,selectedDocumentType)){confirmDetails.showExtraDataItems=true;var extraDataItems=[];var harmonyHiddenFields=[];var extraFieldKey="so."+selectedDocumentType+".extrafields";var extraFieldList=configuration[extraFieldKey].split(",");confirmDetails.extraDataItems=module.webPopulateExtraDataFieldItems(configuration,selectedDocumentType,dataEn);confirmDetails.harmonyHiddenFields=module.webGetHarmonyHiddenFields(configuration,confirmDetails)}if(extraFieldData.length>0&&module.isEmpty(configuration["mobileExtraDataListForRegistration"])){confirmDetails.mobileExtraDataListForRegistration=extraFieldData.toString()}else if(extraFieldData.length>0&&!module.isEmpty(configuration["mobileExtraDataListForRegistration"])){confirmDetails.mobileExtraDataListForRegistration=configuration["mobileExtraDataListForRegistration"].concat(",",extraFieldData.toString())}else{confirmDetails.mobileExtraDataListForRegistration=configuration["mobileExtraDataListForRegistration"]}confirmDetails.showConsents;var documentIdentifier=selectedDocumentType;var systemSourceName=configuration["so.doc.select."+documentIdentifier+".sourceName"];if(module.toBoolean(configuration["so.doc.select."+documentIdentifier+".freeform.consent"])){confirmDetails.intro=configuration["so.doc.select."+documentIdentifier+".freeform.consent.intro"];confirmDetails.consents=[];i=1;while(configuration["so.doc.select."+documentIdentifier+".freeform.consent."+i+".name"]){var consent={};consent.name=configuration["so.doc.select."+documentIdentifier+".freeform.consent."+i+".name"];consent.label=configuration["so.doc.select."+documentIdentifier+".freeform.consent."+i+".label"];consent.number=i;consent.showConsentModal=false;if(configuration["so.doc.select."+documentIdentifier+".freeform.consent."+i+".modal.body"]){consent.modalHeading=configuration["so.doc.select."+documentIdentifier+".freeform.consent."+i+".modal.heading"];consent.modalBody=configuration["so.doc.select."+documentIdentifier+".freeform.consent."+i+".modal.body"];greenidClientContext.modalContainer="#"+CONFIRM_DETAILS_CONTENT;consent.showConsentModal=true}confirmDetails.consents.push(consent);i++}confirmDetails.showConsents=true}else if(configuration["so.doc.select."+documentIdentifier+".consent.label"]){confirmDetails.consents=[];var consent={};consent.name="greenid-so-agree-item-"+documentIdentifier.toLowerCase().replace(".","-");consent.label=configuration["so.doc.select."+documentIdentifier+".consent.label"];confirmDetails.consents.push(consent);confirmDetails.showConsents=true}else if(!module.isEmpty(configuration[systemSourceName+"_tandc_label"])){confirmDetails.consents=[];var consent={};consent.name="greenid-so-agree-item-"+documentIdentifier.toLowerCase().replace(".","-").replace("_","-");consent.label=configuration[systemSourceName+"_tandc_label"];confirmDetails.consents.push(consent);confirmDetails.showConsents=true}else{confirmDetails.showConsents=false}module.addDemoValues(configuration,attemptId,confirmDetails);log.info(confirmDetails);return confirmDetails};module.webRecurseExtractOCRData=function(accountid,apicode,attemptid,verificationToken,docType){var needsRetryError=false;var extractOCRDataTimeout=15e3;var input={};input.apiCode=apicode;input.accountId=accountid;input.attemptId=attemptid;input.verificationToken=verificationToken;input.documentType=docType;input.origin="webBiometrics";var inputStr=JSON.stringify(input);var event={};event[log.MESSAGE]="BiometricCapture - getOCRData event";event[log.ACCOUNT_ID]=accountid;event[log.VERIFICATION_TOKEN]=verificationToken;event["attemptID"]=attemptid;var returnData={};$.ajax({type:"POST",url:staticconfig.get("host")+"/mobile/getOCRData",async:false,data:inputStr,cache:false,contentType:"application/json",dataType:"json",processData:false,timeout:extractOCRDataTimeout,success:function(data){log.info(event);if(data.result==="OCR_NOT_READY_YET"){needsRetryError=true;event[log.MESSAGE]="OCR results were not available yet, re-checking soon";log.info(event)}else if(data.result==="OCR_NO_IMAGES_YET"){needsRetryError=true;event[log.MESSAGE]="OCR images were not uploaded yet, re-checking soon";log.info(event)}else{returnData=data}},error:function(error,errorType,errorThrown){if(errorType=="timeout"){event[log.MESSAGE]="OCR call timed out, re-checking soon";log.warn(event);needsRetryError=true}else{event[log.MESSAGE]="OCR call error";event[log.ERROR]=error;log.warn(event);returnData.lang={en:{}}}},failure:function(error){event[log.MESSAGE]="OCR call failure";event[log.ERROR]=error;log.warn(event);returnData.lang={en:{}}},complete:function(error){event[log.MESSAGE]="OCR call complete";event[log.ERROR]=error;log.info(event)}});return returnData};module.addLeadingZerosIfNeeded=function(number,minDigits){var returnVal="0";if(number&&minDigits){returnVal=number+"";while(returnVal.length<minDigits){returnVal="0"+returnVal}}return returnVal};module.padDateWithZeros=function(dateString){if(dateString.indexOf("/")>=0){var splitDate=dateString.split("/");if(splitDate.length===3){return module.addLeadingZerosIfNeeded(splitDate[0],2)+"/"+module.addLeadingZerosIfNeeded(splitDate[1],2)+"/"+splitDate[2]}}return dateString};module.addDemoValues=function(configuration,attemptId,context){var i=1;while(configuration["so.demo.value."+attemptId+"."+i+".name"]){var key=configuration["so.demo.value."+attemptId+"."+i+".name"];var val=configuration["so.demo.value."+attemptId+"."+i+".value"];context[key]=val;i++}};return module}(greenidJQuery,greenidStaticConfig,greenidLog)}
if(!window.greenidHostedLoaded){window.greenidHostedLoaded=true;var greenidHosted=function($,staticconfig,log){"use strict";var module={};var hostedModeReturningUser="returning user";var hostedModeScansFirst="scans first";var gSetupValues={};var gStoredErrorDetails={};module.landingPageReady=function(environment,account){var returningToken=module.getParameterByName("verificationToken");log.earlyLogPointOfInterest(environment,"Hosted-Landing-Show",account,returningToken?returningToken:"","none");if(returningToken){var event={};event[log.FUNCTION]="landingPageReady";event["message"]="Hosted landing page has a returning user verificationToken";event["verificationToken"]=returningToken;event["account"]=account;log.info(event);log.flushRemoteLogs()}};module.fourOhFourPageReady=function(envir){log.earlyLogPointOfInterest(envir,"Hosted-404","","","none");var event={};event[log.FUNCTION]="fourOhFourPageReady";event["message"]="Hosted 404 error page ";event["verificationToken"]="";event["account"]="";event["userAgent"]=navigator.userAgent;event["url"]=window.location;log.info(event);log.flushRemoteLogs()};module.landingPageGetStarted=function(){var cbox=document.getElementById("bio-first-consent");var returningToken=module.getParameterByName("verificationToken");if(cbox.checked){var params="";if(returningToken){params="?verificationToken="+returningToken}location.href="./hosted-worker-page"+params}else{$("#tab [data-behaviour='validation-checkbox']").closest("[data-behaviour='greenid-validation']").addClass("greenid-has-error").find(".help-block").show();return false}};module.clearWorkerForm=function(){$("#tab-register-first #theform input").val("");$("#tab-register-first #theform select").val("")};module.validateAndSubmitWorker=function(){setRuleId();return validateWorkerForm("theform")};module.workerPageReady=function(setupVals){gSetupValues=setupVals;gStoredErrorDetails={};var returningToken=module.getParameterByName("verificationToken");if(returningToken){gSetupValues.returningToken=returningToken;gSetupValues.hostedMode=hostedModeReturningUser}if(gSetupValues.hostedMode===hostedModeReturningUser){greenidLog.earlyLogPointOfInterest(gSetupValues.environment,"Hosted-Worker-Show-Returning-User",gSetupValues.account,returningToken?returningToken:"","none");greenidStaticConfig.setHostedModeReturningUser()}else if(gSetupValues.hostedMode===hostedModeScansFirst){greenidLog.earlyLogPointOfInterest(gSetupValues.environment,"Hosted-Worker-Show-Scans",gSetupValues.account,"","none");greenidStaticConfig.setHostedModeScansFirst()}else{greenidLog.earlyLogPointOfInterest(gSetupValues.environment,"Hosted-Worker-Show-Form",gSetupValues.account,"","none");greenidStaticConfig.setHostedModeFormFirst()}greenidUI.setup({environment:gSetupValues.environment,frameId:"greenid-div",formId:"theform",country:"country",debug:gSetupValues.debug,errorCallback:onWorkerError,sessionCompleteCallback:onWorkerSessionComplete,sessionCancelledCallback:onWorkerSessionCancel,submitCallback:onWorkerSubmitCallback,preSubmitValidationCallback:preSubmitWorkerValidationCallback});greenidUI.setForceAllErrorsToCompletion(true);var customErrorMessages=greenidConfig.get("error_messages");customErrorMessages["TokenTimeoutFault"]="Unfortunately the link you have used has now expired, and you will not be able to use this to complete your verification";customErrorMessages["InvalidTokenFault"]="Unfortunately the link you have used has now expired, and you will not be able to use this to complete your verification";greenidConfig.setOverrides({error_messages:customErrorMessages});setupWorkerForm();doScansOrFormFirstOrReturningUser()};module.completedPageReady=function(environment,account){greenidLog.earlyLogPointOfInterest(environment,"Hosted-Exit-Show",account,"","none")};module.errorPageReady=function(environment,account){greenidLog.earlyLogPointOfInterest(environment,"Hosted-Error-Exit-Show",account,"","none");var errorName=module.getParameterByName("errorName");var errorMessage=friendlyErrorMessage(errorName);$("#hosted-error-message-details").html(errorMessage);var event={};event[log.FUNCTION]="errorPageReady";event["message"]="Hosted error page";event["verificationToken"]="";event["account"]=account;event["userAgent"]=navigator.userAgent;event["url"]=window.location;event["errorName"]=errorName;log.info(event);log.flushRemoteLogs()};module.cancelPageReady=function(environment,account){greenidLog.earlyLogPointOfInterest(environment,"Hosted-Cancel-Show",account,"","none")};function friendlyErrorMessage(errorName){var errorMessages=greenidConfig.get("error_messages");errorMessages["TokenTimeoutFault"]="Unfortunately the link you have used has now expired, and you will not be able to use this to complete your verification";errorMessages["InvalidTokenFault"]="Unfortunately the link you have used has now expired, and you will not be able to use this to complete your verification";if(errorMessages[errorName]){return"Details: "+errorMessages[errorName]}return""}function doScansOrFormFirstOrReturningUser(){if(gSetupValues.hostedMode===hostedModeReturningUser){$("#register-form-mode").hide();greenidUI.show(gSetupValues.account,gSetupValues.api,gSetupValues.returningToken)}else if(gSetupValues.hostedMode===hostedModeScansFirst){$("#register-form-mode").hide();greenidUI.showBiometricCapture(gSetupValues.account,gSetupValues.api,gSetupValues.rule)}else{$("#register-form-mode").show()}}function setupWorkerForm(){if(gSetupValues.account){$("#accountId").val(gSetupValues.account)}if(gSetupValues.api){$("#apiCode").val(gSetupValues.api)}if(gSetupValues.preFillForm===true){var prefills={givenNames:"Manuel",middleNames:"T",surname:"Esta",streetNumber:"34",streetName:"Fluvial",suburb:"Burbville",postcode:"1234",dob:"01/01/2001",email:"man.t@esta.com"};Object.keys(prefills).forEach(key=>{$("#"+key).val(prefills[key])});$("#country").val("AU");$("#streetType").val("TCE");$("#state").val("ACT")}if(gSetupValues.showClearForm===true){$("#clearOnboardingForm").show()}if(gSetupValues.autoPrivacy===true){$(".consentCheckboxes").prop("checked",true)}$("#country").change(function(){if($("#country option:selected").val()=="NZ"){$(".hide-if-nz").hide();$("#tab-register-first #theform .hide-if-nz input").val("");$("#tab-register-first #theform .hide-if-nz select").val("")}else{$(".hide-if-nz").show()}})}function preSubmitWorkerValidationCallback(){return true}function setRuleId(){$("#tab-register-first #ruleId").val("default")}function validateWorkerForm(form){return greenidValidator.validateAllFields("hostedDataEntry",form,false)}function onWorkerError(verificationToken,errorName,code,error){if(errorName){gStoredErrorDetails.errorName=errorName}else{gStoredErrorDetails.errorName="UnexpectedError"}}function onWorkerSubmitCallback(){}function onWorkerSessionCancel(verificationToken,overallState){$(window).off("beforeunload");window.onbeforeunload=null;if(gStoredErrorDetails.errorName){location.href="./hosted-error-page?errorName="+gStoredErrorDetails.errorName}else if(gSetupValues.hostedMode===hostedModeReturningUser){location.href="./hosted-cancel-page-return-user-mode"}else{location.href="./hosted-cancel-page-onboarding-mode"}}function onWorkerSessionComplete(verificationToken,overallCurrentState,args){$(window).off("beforeunload");window.onbeforeunload=null;if(gStoredErrorDetails.errorName){location.href="./hosted-error-page?&errorName="+gStoredErrorDetails.errorName}else{location.href="./hosted-complete-page"}}function setupCompletedPage(){var param=module.getParameterByName("accountId");var elem=document.getElementById("1");if(param!==null){elem.innerHTML=param;document.getElementById("accDiv").style.display="block"}param=module.getParameterByName("verificationState");elem=document.getElementById("2");if(param!==null){elem.innerHTML=param;document.getElementById("statusDiv").style.display="block"}param=module.getParameterByName("ruleId");elem=document.getElementById("4");if(param!==null){elem.innerHTML=param;document.getElementById("ruleDiv").style.display="block"}param=module.getParameterByName("message");elem=document.getElementById("msg");if(param!==null){elem.innerHTML=param;document.getElementById("msgDiv").style.display="block"}}module.getParameterByName=function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(window.location.href);return results===null?"":decodeURIComponent(results[1].replace(/\+/g," "))};return module}(greenidJQuery,greenidStaticConfig,greenidLog)}
if(!window.greenidDLHelperLoaded){window.greenidDLHelperLoaded=true;var greenidDLHelper=function($,utils){"use strict";var prop={};prop.driversLicenceSourceName="dl";prop.regoGroup=new Array;prop.regoGroup[0]=prop.driversLicenceSourceName;prop.regoGroup[1]="actrego";prop.regoGroup[2]="nswrego";prop.regoGroup[3]="qldrego";prop.regoGroup[4]="sarego";prop.regoGroup[5]="warego";prop.regoGroup[6]="vicrego";prop.regoGroup[7]="actregodvs";prop.regoGroup[8]="nswregodvs";prop.regoGroup[9]="qldregodvs";prop.regoGroup[10]="saregodvs";prop.regoGroup[11]="waregodvs";prop.regoGroup[12]="vicregodvs";prop.regoGroup[13]="tasregodvs";prop.regoGroup[14]="ntregodvs";prop.regoGroup[15]="vicrego_old";function isRegoForState(regoName,state){if(!utils.isEmpty(state)){statePartOfRego=regoName.substr(0,state.length);if(statePartOfRego.toUpperCase()===state.toUpperCase()){return true}}return false}var module={};module.isRego=function(name){return $.inArray(name,prop.regoGroup)>-1};module.isMobileRegoSource=function(name){return name.indexOf("DRIVERS_LICENCE.AU")>-1};module.driversLicenceName=function(){return prop.driversLicenceSourceName};module.getAddressStateMatchingSourceName=function(dlSource,addressState){var matchingSources=[];if(addressState==="ACT"){matchingSources=["actrego","actregodvs"]}if(addressState==="QLD"){matchingSources=["qldrego","qldregodvs"]}if(addressState==="NSW"){matchingSources=["nswrego","nswregodvs"]}if(addressState==="TAS"){matchingSources=["tasregodvs"]}if(addressState==="NT"){matchingSources=["ntregodvs"]}if(addressState==="VIC"){matchingSources=["vicregodvs","vicrego","vicrego_old"]}if(addressState==="WA"){matchingSources=["waregodvs","warego"]}if(addressState==="SA"){matchingSources=["saregodvs","sarego"]}for(var key in dlSource.subnames){var subname=dlSource.subnames[key];if($.inArray(subname,matchingSources)>-1){return subname}}return dlSource.subnames[0]};module.applyDLSource=function(source,dlSource,addressState){if(utils.isPassed(source.state)){if(!utils.isPassed(dlSource.state)){if(!source.hasComboSourceParent||source.parentState!=="FAILED"){dlSource.state=source.state;dlSource.passed=utils.isPassed(dlSource.state);dlSource.name=source.name;dlSource.isCombo=source.isCombo=false}}}if(utils.isLockedOut(source.state)||utils.isFailed(source.state)||utils.isNotContributing(source.state)){dlSource.state=source.state;dlSource.passed=utils.isPassed(dlSource.state);dlSource.name=source.name;dlSource.isCombo=source.isCombo=false}dlSource.suborders.push(source.order);dlSource.subnames.push(source.name);dlSource.subattributes[source.name]=source.attributes;if(source.order<dlSource.order){dlSource.order=source.order;dlSource.firstOrderName=source.name}if(!dlSource.available){dlSource.available=source.available}if(dlSource.notRequired&&!source.notRequired){dlSource.notRequired=false}if(source.oneSourceLeft){dlSource.oneSourceLeft=true}};module.buildStateDropDownContext=function(currentStatus,sourceName,utils,config){if(!module.isRego(sourceName)){return{}}var source=utils.getSourceFromStatus(currentStatus,prop.driversLicenceSourceName);if(!source){return{}}var dllist=[];var i=0;for(var key in source.subnames){if(source.subnames.hasOwnProperty(key)){var subname=source.subnames[key];var title=config.get(subname+"_short_title");if(config.get(subname+"_short_title")!=null){title=config.get(subname+"_short_title")}else{title=sourceName}dllist[i]={};dllist[i].name=subname;dllist[i].title=title;dllist[i].selected="";if(sourceName===subname){dllist[i].selected="selected"}i++}}var showDLList=i>0;var context={showDList:showDLList,dllist:dllist};return context};return module}(greenidJQuery,greenidUtils)}
if(!window.greenidAjaxLoaded){window.greenidAjaxLoaded=true;var greenidAjax=function($,Handlebars,config,staticconfig,utils,dlHelper,clientContext,log){"use strict";var localCache={data:{},remove:function(key){delete localCache.data[key]},exist:function(key){return localCache.data.hasOwnProperty(key)&&localCache.data[key]!==null},get:function(key){return localCache.data[key]},set:function(key,cachedData){localCache.remove(key);localCache.data[key]=cachedData}};$.ajaxPrefilter(function(options,originalOptions,jqXHR){if(greenidLog.logSessionId&&options&&originalOptions&&originalOptions.hasOwnProperty("url")&&originalOptions.url.includes("vixverify.com")&&originalOptions.hasOwnProperty("data")&&originalOptions.data){var originalData=originalOptions.data;if(typeof originalOptions.data=="string"){try{originalData=JSON.parse(originalOptions.data)}catch(err){log.warn("ajaxPrefilter unable to parse originalOptions data"+originalOptions.data)}}if(originalData&&originalData.hasOwnProperty("extraData")){originalData.extraData["logSessionId"]=greenidLog.logSessionId;options.data=JSON.stringify(originalData)}else if(originalData&&originalData.hasOwnProperty("extradata")){originalData.extradata["logSessionId"]=greenidLog.logSessionId;options.data=JSON.stringify(originalData)}}if(options.cache){var complete=originalOptions.complete||$.noop,url=originalOptions.url;options.cache=false;options.beforeSend=function(){if(localCache.exist(url)){var responseText=localCache.get(url);options.success(null,null,responseText);return false}return true};options.complete=function(data,textStatus){localCache.set(url,data)}}});var REGISTER_WITH_DOCUMENT_AND_DETAILS_URL="/registerWithDocumentAndDetails";var REGISTER_URL="/register";var GET_SOURCES_URL="/getsources";var async=true;var contentType="text/plain";var jsonType="application/json";var dataType="json";function isRegisterCallback(url){return url===REGISTER_URL||url===REGISTER_WITH_DOCUMENT_AND_DETAILS_URL||url===GET_SOURCES_URL}function doSimplePost(url,inputStr,sourceName,accountId,updateStatusCallback,successCallback,errorCallback,registerCallback){var ctype=contentType;$.ajax({type:"POST",url:staticconfig.get("host")+url,async:async,data:inputStr,cache:false,contentType:ctype,dataType:dataType,processData:false,success:function(data){log.trace("Success calling "+url);if(isRegisterCallback(url)){staticconfig.setServerProperties(data.properties)}var currentStatus=utils.tweakCurrentStatus(data,dlHelper,config);if(updateStatusCallback){updateStatusCallback(currentStatus)}if((url===REGISTER_URL||url===REGISTER_WITH_DOCUMENT_AND_DETAILS_URL)&&registerCallback){var user={};user.verificationToken=currentStatus.verificationToken;registerCallback(currentStatus.verificationId,user)}successCallback(currentStatus,sourceName,accountId)},error:function(error,textStatus,errorThrown){log.warn("Error calling "+url+":"+JSON.stringify(error));if(errorCallback){var onStartUp=false;if(isRegisterCallback(url)){onStartUp=true}errorCallback(error,onStartUp,{error:error,errorText:textStatus,errorThrown:errorThrown})}},failure:function(error){log.error("Failure calling "+url+":"+JSON.stringify(error));if(errorCallback){var onStartUp=false;if(isRegsterCallback(url)){onStartUp=true}errorCallback(error,onStartUp)}}})}function getTemplate(name,idName,currentStatus,extraContext,getFieldsCallback,submitSourceFormCallback,errorCallback,sourceListClickCallback){clientContext.sourceFieldsLoaded=false;$.ajax({type:"GET",url:staticconfig.get("host")+"/assets/templates/"+name,dataType:"html",cache:true,success:function(inData,status,response){log.trace("Success calling getTemplate: "+name);try{var template=Handlebars.compile(response.responseText);var context={currentStatus:currentStatus};if(extraContext!=null){$.extend(context,extraContext)}if($("#"+idName).length){$("#"+idName).append(template(context))}else{log.warn("Element "+idName+" does not exist!")}}catch(e){log.error("Error loading template: "+name+", "+JSON.stringify(extraContext));log.error("Error loading template: "+name+", "+JSON.stringify(e));if(errorCallback){errorCallback(e)}}if(context.selectid!=null){$("#"+context.selectid).on("click keypress",function(event){if(utils.accessibleClick(event)===true){sourceListClickCallback();if(getFieldsCallback){var modalText=greenidConfig.get("modal_loading_source");var sourceTarget=$(this).attr("data-target").substring(1);getFieldsCallback(currentStatus,sourceTarget,modalText,1,true)}else{log.warn("WARNING: selectid has been set with no getFields callback: "+name+", "+idName)}}});if(utils.toBoolean(staticconfig.showPostOffice())){$("#"+staticconfig.divNames.postofficeSourceDiv).on("click keypress",function(event){if(utils.accessibleClick(event)===true){if(getFieldsCallback){var modalText=greenidConfig.get("modal_loading_source");var sourceTarget=$(this).attr("data-target").substring(1);getFieldsCallback(currentStatus,sourceTarget,modalText)}else{log.warn("WARNING: selectid has been set with no getFields callback: "+name+", "+idName)}}})}}if(context.submitButton!=null){if(submitSourceFormCallback){$("#"+context.fieldsformid).submit(function(e){e.preventDefault();utils.getSourceFromStatus(currentStatus);submitSourceFormCallback(context.fieldsformid,context.sourceName,currentStatus,context.sourceName)})}else{log.warn("WARNING: submitButton has been set with no submit callback: "+name+", "+idName)}if(clientContext.allowFieldsFormReveal&&!greenidUsableFormsConfig.displayTheUsableForm(extraContext.sourceName)){clientContext.sourceFieldsLoaded=true}}$("#"+context.dlStateSelectId).on("change",function(){clientContext.dlStateSwitched=true;var modalText=greenidConfig.get("modal_loading_source");getFieldsCallback(currentStatus,this.value,modalText,1,true)})},error:function(error){log.error("Error loading template: "+JSON.stringify(error));if(errorCallback){errorCallback(error)}},failure:function(error){log.error("Failure loading template: "+JSON.stringify(error));if(errorCallback){errorCallback(error)}}})}var module={};module.registerRemote=function(inputStr,accountId,updateStatusCallback,successCallback,errorCallback,registerCallback){log.trace("Calling register remote");contentType=contentType+";charset=UTF-8";doSimplePost(REGISTER_URL,inputStr,"",accountId,updateStatusCallback,successCallback,errorCallback,registerCallback)};module.registerWithDetailsRemote=function(inputStr,accountId,updateStatusCallback,successCallback,errorCallback,registerCallback){log.trace("Calling registerWithDetails remote");contentType=contentType+";charset=UTF-16";doSimplePost(REGISTER_WITH_DOCUMENT_AND_DETAILS_URL,inputStr,"",accountId,updateStatusCallback,successCallback,errorCallback,registerCallback)};module.getFieldsRemote=function(inputStr,sourceName,accountId,updateStatusCallback,successCallback,errorCallback){log.trace("Calling getfields remote: "+sourceName);doSimplePost("/getfields",inputStr,sourceName,accountId,updateStatusCallback,successCallback,errorCallback,null)};module.setFieldsRemote=function(inputStr,sourceName,accountId,updateStatusCallback,successCallback,errorCallback){log.trace("Calling setfields remote: "+sourceName);if(sourceName==="ocrdocument"){contentType=contentType+";charset=UTF-16"}doSimplePost("/setfields",inputStr,sourceName,accountId,updateStatusCallback,successCallback,errorCallback,null)};module.getSourcesRemote=function(inputStr,accountId,updateStatusCallback,successCallback,errorCallback){log.trace("Calling getSources remote: "+inputStr);doSimplePost(GET_SOURCES_URL,inputStr,"",accountId,updateStatusCallback,successCallback,errorCallback,null)};module.getIntro=function(introDiv,extraContext){log.trace("Loading intro template");getTemplate("intro.hb",introDiv,null,extraContext,null,null,null)};module.addSourceHeader=function(sourceTitleDiv,currentStatus,extraContext){log.trace("Loading source header template");getTemplate("sourceheader.hb",sourceTitleDiv,currentStatus,extraContext,null,null,null)};module.addSourceFields=function(sourceBodyDiv,currentStatus,extraContext,getFieldsCallBack,submitSourceCallback){log.trace("Loading fieldsform template");getTemplate("fieldsform.hb",sourceBodyDiv,currentStatus,extraContext,getFieldsCallBack,submitSourceCallback,null)};module.getSourceList=function(sourceListDiv,currentStatus,extraContext,getFields,sourceListClickCallback){log.trace("Loading sourcelist template");getTemplate("sourcelist.hb",sourceListDiv,currentStatus,extraContext,getFields,null,null,sourceListClickCallback)};module.getTemplateSimple=function(name,elementName,extraContext,callback){log.trace("loading getTemplateSimple: "+name);$.ajax({type:"GET",url:staticconfig.get("host")+"/assets/templates/"+name,dataType:"html",cache:true,success:function(inData,status,response){log.trace("Success loading getTemplateSimple: "+name);try{var template=Handlebars.compile(response.responseText);if($(elementName).length){$(elementName).append(template(extraContext));if(callback){callback()}}else{log.warn("Element "+elementName+" does not exist!")}}catch(e){log.error("Error: getting template for "+name)}},error:function(error){log.error("Error loading template: "+error)},failure:function(error){log.error("Failure loading template: "+error)}})};module.doActionNotification=function(action,verificationToken,apiCode,accountId,extraData,overrides){log.trace("sending action notification. action: "+action+" verificationToken: "+verificationToken);var dataInput=new Object;dataInput.action=action;dataInput.verificationToken=verificationToken;dataInput.accountId=accountId;dataInput.apiCode=apiCode;var dataInputJson=JSON.stringify(dataInput);var options={type:"POST",url:staticconfig.get("host")+"/actionNotification",async:false,data:dataInputJson,contentType:"application/json"};$.extend(options,overrides);$.ajax(options).done(function(){log.debug("Successful response to actionNotification: "+options.url)}).fail(function(error){log.error("Error completing actionNotification: "+error.responseText)})};return module}(greenidJQuery,greenidHandlebars,greenidConfig,greenidStaticConfig,greenidUtils,greenidDLHelper,greenidClientContext,greenidLog)}
if(!window.greenidUsableFormsConfigLoaded){window.greenidUsableFormsConfigLoaded=true;var greenidUsableFormsConfig=function($){"use strict";var module={};module.usableFormSourceList=["citizenshipcertificatedvs"];module.getUsableFormSourceList=function(sourceName){if($.inArray(sourceName,module.usableFormSourceList)!==-1){return true}else{return false}};module.displayTheUsableForm=function(sourceName){var usableFormsEnabled=greenidUtils.toBoolean(greenidStaticConfig.properties["showUsableForms"]);if(module.getUsableFormSourceList(sourceName)){if(usableFormsEnabled){return true}else{return false}}else{return false}};module.usableFormPrefix="greenid-u";module.defaultparams={usableFormPrefix:module.usableFormPrefix,termsDivId:module.usableFormPrefix+"-agree",termsCheckboxId:module.usableFormPrefix+"-agree-checkbox",submitButtonId:module.usableFormPrefix+"-submit",submitButtonText:greenidConfig.get("submit_button_text"),sourceCancelButtonId:"greenid-u-cancel-btn"};var citizenshipcertificatedvsContext={certs:["cert1","cert2","cert3","cert4","cert5","cert6","cert7","cert8"],prepop:["givenname","middlename","surname","dob"],fields:["givenname","middlename","surname","dob","stock_number","register_number","entry_number","acquisition_date"],staticparams:{certChooserLabel:"_certificate_type_chooser_label",givennameLabel:"_givenname_label",middlenameLabel:"_middlename_label",surnameLabel:"_surname_label",dobLabel:"_dob_label",stocknoLabel:"_stock_number_label",stocknoLocationTitle:"_stock_number_location_title",clientidLabel:"_client_id_label",clientidLocationTitle:"_client_id_location_title",registernoLabel:"_register_number_label",registernoLocationTitle:"_register_number_location_title",entrynoLabel:"_entry_number_label",entrynoLocationTitle:"_entry_number_location_title",acqdateLabel:"_certification_date_label",acqdateLocationTitle:"_certification_date_location_title",mustAgreeText:"_tandc_label",tooltipModalLaunchText:"_tooltip_modal_launch_text"},dynamicparams:{certTitle:"_title_",stocknoLocationText:"_stock_number_location_text_",registernoLocationText:"_register_number_location_text_",entrynoLocationText:"_entry_number_location_text_",acqdateLocationText:"_certification_date_location_text_",dateofcertificateLabel:"_date_of_certificate_label_",dateofcertificateLocationTitle:"_date_of_certificate_location_title_"}};module.getSourceVars=function(sourceName){if(sourceName==="citizenshipcertificatedvs"){var sourceVars={certList:citizenshipcertificatedvsContext.certs,staticParamList:citizenshipcertificatedvsContext.staticparams,dynamicParamList:citizenshipcertificatedvsContext.dynamicparams,prepopList:citizenshipcertificatedvsContext.prepop,fieldList:citizenshipcertificatedvsContext.fields}}return sourceVars};return module}(greenidJQuery)}
if(!window.greenidUsableFormsLoaded){window.greenidUsableFormsLoaded=true;var greenidUsableForms=function($,ajax,utils,validator,clientContext,usableFormsConfig){"use strict";var module={};var usableFormPrefix=greenidUsableFormsConfig.usableFormPrefix;var defaultParams=greenidUsableFormsConfig.defaultparams;var disabledFieldList=[];module.prepareUsableForm=function(sourceName){clientContext.sourceFieldsLoaded=false;$("form."+sourceName).after("<div id='"+usableFormPrefix+"'></div>");disabledFieldList=utils.extractDisabledFieldNameList(sourceName);$("form."+sourceName).hide();var dynamicContext={};var staticContext={enableCancelButton:greenidClientContext.enableCancelButton,sourceCancelButtonText:greenidConfig.get("cancel_button_text")};var defaultContext=defaultParams;var sourceVars=usableFormsConfig.getSourceVars(sourceName);$.extend(staticContext,{usableElementId:usableFormPrefix+"-"+sourceName});$.each(sourceVars.certList,function(index,value){var currentCert=value;$.each(sourceVars.dynamicParamList,function(index,value){dynamicContext[index+currentCert]=greenidConfig.get(sourceName+value+currentCert)})});$.each(sourceVars.staticParamList,function(index,value){staticContext[index]=greenidConfig.get(sourceName+value)});$.extend(defaultContext,staticContext,dynamicContext);ajax.getTemplateSimple(sourceName+".hb","#"+usableFormPrefix,defaultContext,showCertFields(sourceName))};function waitForUsableContentInDom(element,totalWaitTime){var waitTime=100;var maxTime=3e4;if($(element).length>0){clientContext.sourceFieldsLoaded=true}else{totalWaitTime+=waitTime;if(totalWaitTime>maxTime){clientContext.sourceFieldsLoaded=true}else{setTimeout(function(){waitForUsableContentInDom(element,totalWaitTime)},waitTime)}}}function showCertFields(sourceName){waitForUsableContentInDom("."+usableFormPrefix+"-select",0);utils.waitUntil(clientContext.isUsableContentInDom,100,0,3e3,function(){$("."+usableFormPrefix+"-select").on("click keypress",function(event){if(utils.accessibleClick(event)===true){var requestedCertNo=$(this).attr("data-action").split("-")[4];$(this).closest("."+usableFormPrefix+"-select-option").find("."+usableFormPrefix+"-reset").fadeIn(500).focus();$(this).attr("disabled",true);$(".greenid-u-select").each(function(index){var currentButtonNo=$(this).attr("data-action").split("-")[4];if(currentButtonNo!=requestedCertNo){$(this).closest("."+usableFormPrefix+"-select-option").fadeOut()}});$("#"+usableFormPrefix+"-"+sourceName+"-"+requestedCertNo).fadeIn();$("#"+defaultParams.termsDivId).fadeIn();prepopFields(sourceName,requestedCertNo);applyDisabledFields(sourceName,requestedCertNo);submitForm(sourceName,requestedCertNo);hideCertFields(sourceName,requestedCertNo);if(greenidClientContext.enableCancelButton){cancelProcess()}setTimeout(function(){greenidUiBehaviours.checkSourceHeight()},500)}})})}function applyDisabledFields(sourceName,requestedCertNo){$.each(disabledFieldList,function(key,value){var usableFieldId=usableFormPrefix+"-"+sourceName+"-"+requestedCertNo+"-"+value;utils.makeFieldReadOnly(usableFieldId)})}function prepopFields(sourceName,requestedCertNo){var sourceVars=usableFormsConfig.getSourceVars(sourceName);$.each(sourceVars.prepopList,function(index,value){var hiddenFieldId="greenid_"+sourceName+"_"+value;var usableFieldId=usableFormPrefix+"-"+sourceName+"-"+requestedCertNo+"-"+value;var fieldVal=$("#"+hiddenFieldId).val();$("#"+usableFieldId).val(fieldVal)})}function hideCertFields(sourceName,requestedCertNo){$("."+usableFormPrefix+"-reset").on("click keypress",function(event){if(utils.accessibleClick(event)===true){$("#"+usableFormPrefix+"-form").off("submit");if(greenidClientContext.enableCancelButton){$("#"+greenidUsableFormsConfig.defaultparams.sourceCancelButtonId).off("click keypress")}var sourceVars=usableFormsConfig.getSourceVars(sourceName);$.each(sourceVars.fieldList,function(index,value){var usableFieldId=usableFormPrefix+"-"+sourceName+"-"+requestedCertNo+"-"+value;validator.clearError(usableFieldId)});validator.clearError(defaultParams.termsCheckboxId);$("."+usableFormPrefix+"-reset").fadeOut();$("."+usableFormPrefix+"-fields").fadeOut();$("#"+defaultParams.termsDivId).fadeOut();$(this).parents("."+usableFormPrefix+"-select-option").find("."+usableFormPrefix+"-select").attr("disabled",false).focus();$(".greenid-alert").fadeOut().remove();$("."+usableFormPrefix+"-select-option").fadeIn();$("."+usableFormPrefix+"-fields input").val("");setTimeout(function(){greenidUiBehaviours.checkSourceHeight()},500)}})}function submitForm(sourceName,requestedCertNo){var formId=usableFormPrefix+"-form";var sourceVars=usableFormsConfig.getSourceVars(sourceName);$("#"+formId).on("submit",function(){if(validator.validateAllFields(sourceName,formId,true)){$.each(sourceVars.fieldList,function(index,value){var hiddenFieldId="greenid_"+sourceName+"_"+value;var usableFieldId=usableFormPrefix+"-"+sourceName+"-"+requestedCertNo+"-"+value;var fieldVal=$("#"+usableFieldId).val();$("#"+hiddenFieldId).val(fieldVal)});$("#greenid_"+sourceName+"_tandc").prop("checked",true);$("#greenid-submit").click()}return false})}function cancelProcess(){greenidUiBehaviours.initiateCancelButton();$("#"+greenidUsableFormsConfig.defaultparams.sourceCancelButtonId).on("click keypress",function(event){if(utils.accessibleClick(event)===true){$("#"+greenidStaticConfig.divNames.idPrefix+"source-cancel").click()}})}return module}(greenidJQuery,greenidAjax,greenidUtils,greenidValidator,greenidClientContext,greenidUsableFormsConfig)}
if(!window.uibehavioursLoaded){window.uibehavioursLoaded=true;var greenidUiBehaviours=function($,staticconfig,utils,ajax,config,clientContext,log,usableForms){"use strict";var module={};module.showModal=function(modalContainer,modalText,useBackdrop,customModalClass,customBackdropClass,centreModal){clientContext.modalTemplateLoadCompleted=false;var divNames=staticconfig.divNames;var modalDiv=divNames.modalDiv;var modalDivClass=divNames.modalDivClass+" "+customModalClass;var modalTextDiv=divNames.modalTextDiv;var modalBackdropClass=divNames.modalBackdropDiv+" "+customBackdropClass;var host=staticconfig.get("host");if(useBackdrop&&modalContainer!="body"||!useBackdrop){var useDefaultBootstrapBackdrop=false}else{var useDefaultBootstrapBackdrop=true}var modal='<div class="'+modalDivClass+' fade" id="'+modalDiv+'" tabindex="-1" aria-hidden="true" style="position: absolute;">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-body">'+'<span class="greenid-loader-container"><img src="'+host+'/assets/images/loader.gif" width="32" height="32" alt=" " id="greenid-loader-gif" /></span>'+'<span id="'+modalTextDiv+'" tabindex="-1" class="greenid-no-visible-focus">'+modalText+"</span>"+"</div>"+"</div>"+"</div>"+"</div>";log.trace("Adding modal!");$(modalContainer).append(modal);$("#"+modalDiv).modal({backdrop:useDefaultBootstrapBackdrop,keyboard:false}).attr("aria-hidden",false);if(useBackdrop&&!useDefaultBootstrapBackdrop&&$("#"+divNames.modalBackdropDiv).length==0){$('<div id="'+divNames.modalBackdropDiv+'" class="'+modalBackdropClass+' fade in" tabindex="-1"></div>').appendTo(modalContainer).fadeIn(300)}if(centreModal){module.centreModal();window.addEventListener("orientationchange",module.centreModal,false);window.addEventListener("resize",module.centreModal,false)}$("#"+modalTextDiv).focus();clientContext.modalTemplateLoadCompleted=true};module.updateModalText=function(modalText){var divNames=staticconfig.divNames;$("#"+divNames.modalTextDiv).fadeOut("fast",function(){$("#"+divNames.modalTextDiv).html(modalText);$("#"+divNames.modalTextDiv).fadeIn("fast")})};module.centreModal=function(){var modalDiv=staticconfig.divNames.modalDiv;var fudgeFactor=-8;var modalHeight=$("#"+modalDiv+" .modal-dialog").outerHeight();var windowHeight=$(window).height();var marginTop=windowHeight/2-modalHeight/2+fudgeFactor;$("#"+modalDiv+" .modal-dialog").css("margin-top",marginTop+"px")};module.addModalBackdrop=function(emptyDivs,modalBackdropOpacity,removeErrorMessage){var divNames=staticconfig.divNames;log.trace("Entered addModalBackdrop!");$("#"+divNames.sourceContentDiv).css("overflow","hidden");module.checkSourceHeight();clientContext.sourceSwitchAnimationCompleted=false;clientContext.nextSourceSwitchAnimationCompleted=false;if($("#"+divNames.modalBackdropDiv).length==0){log.trace("Backdrop was not present... adding it");$('<div id="'+divNames.modalBackdropDiv+'" tabindex="-1"></div>').prependTo("#"+divNames.sourceContentDiv).fadeIn(300).animate({opacity:modalBackdropOpacity},300,function(){module.refreshDivs(emptyDivs);if(removeErrorMessage==true&&$("#"+divNames.sourceContentDiv+" ."+divNames.alertErrorClass).length>0){$("#"+divNames.sourceContentDiv+" ."+divNames.alertErrorClass).remove()}log.trace("sourceSwitchAnimationCompleted: true");clientContext.sourceSwitchAnimationCompleted=true})}else{log.trace("Backdrop was already present");$("#"+divNames.modalBackdropDiv).animate({opacity:modalBackdropOpacity},300,function(){module.refreshDivs(emptyDivs);if($("#"+divNames.sourceContentDiv+" ."+divNames.alertErrorClass).length>0){$("#"+divNames.sourceContentDiv+" ."+divNames.alertErrorClass).remove()}clientContext.nextSourceSwitchAnimationCompleted=true})}log.trace("Leaving addModalBackdrop!")};module.modalHideActions=function(elem){var divNames=staticconfig.divNames;$(".greenid-modal-backdrop").animate({opacity:0},300).remove();$("."+divNames.modalDivClass).fadeOut().removeClass("in").attr("aria-hidden",true);$("body").removeClass("greenid-modal-open");$("."+divNames.modalDivClass).on("hidden.bs.modal",function(e){if($(this).attr("id")===divNames.completeLaterModal){var toggleElement=$("#"+divNames.optionListDiv+" .dropdown-toggle");$(this).prev().children(toggleElement).focus()}else if($(this).parents("#greenid-bdm-userfields").length){var toggleElement=".greenid-modal-launch-bdm";$(this).prev().children(toggleElement).focus();$(this).prev().prev(toggleElement).focus()}else if($(this).parents("#greenid-u").length){var toggleElement=".greenid-modal-launch";$(this).prev().children(toggleElement).focus()}else{var toggleElement=".greenid-modal-launch";$(this).prev(toggleElement).focus()}});var currentModal=$(elem.currentTarget).parents("."+divNames.modalDivClass);$(currentModal).trigger("hidden.bs.modal")};module.showHideInfoModals=function(preventDefault,selectorPrefix){selectorPrefix=selectorPrefix||"";$(selectorPrefix+" .greenid-modal-close").click(function(elem){module.modalHideActions(elem)});$(selectorPrefix+" .greenid-modal-launch").on("click keypress",function(event){if(utils.accessibleClick(event)===true){if(preventDefault){event.preventDefault()}$('.greenid-helpicon, [data-toggle="tooltip"]').tooltip("hide");var targetId=$(this).attr("data-target");module.showInfoModal(targetId)}})};module.showInfoModal=function(targetId){log.trace("enter showInfoModal: targetId="+targetId);var divNames=staticconfig.divNames;var modalContainer=clientContext.modalContainer;log.debug("showInfoModal: the modalContainer is "+modalContainer);if($(".modal-backdrop").length==0&&$("."+divNames.modalBackdropDiv).length==0){$('<div  id="'+divNames.modalBackdropDiv+'" class="'+divNames.modalBackdropDiv+" "+divNames.modalBackdropDiv+'-transparent fade in" tabindex="-1" style="display:none"></div>').appendTo(modalContainer).fadeIn(300)}$(targetId).fadeIn().addClass("in").attr("aria-hidden",false).find("[data-action='greenid-dialog-start']").focus();$("body").addClass("greenid-modal-open");$("[data-action='greenid-dialog-end']").on("blur",function(){$(targetId).find("[data-action='greenid-dialog-start']").focus()})};module.refreshDivs=function(emptyDivs){var divNames=staticconfig.divNames;var alertErrorClass=divNames.alertErrorClass;if($("#"+divNames.sourceContentDiv+" ."+alertErrorClass).length>0){log.trace("Removing error message");$("#"+divNames.sourceContentDiv+" ."+alertErrorClass).animate({opacity:0},100)}if(emptyDivs==true){log.trace("Emptying the content divs");$("#"+divNames.sourceTitleDiv).empty();$("#"+divNames.sourceBodyDiv).empty();$("#"+divNames.sourceListDiv).hide()}else{log.trace("Not emptying the content divs")}log.trace("leaving refreshDivs")};module.refreshElementQueryArray=function(){var ie=config.checkIEVersion();if(ie<9){log.debug("IE8 / don't use element queries")}else{if(typeof eqjs!=="undefined"){eqjs.query($("#greenid-container").toArray())}}};module.checkSourceHeight=function(callback){var divNames=staticconfig.divNames;var sourceContentDiv=divNames.sourceContentDiv;var sourceBodyDiv=divNames.sourceBodyDiv;var sourceHeaderDiv=divNames.sourceHeaderDiv;var alertSelector="#"+sourceContentDiv+" ."+divNames.alertErrorClass;if(greenidJQuery("#greenid_aecnonaml_captchaImage").length>0&&greenidJQuery("#greenid_aecnonaml_captchaImage").height()<20){var heightPadding=75}else{var heightPadding=10}var alertHeight=$(alertSelector).outerHeight(true);var alertHeightValue;if(alertHeight!=undefined){alertHeightValue=alertHeight}else{alertHeightValue=0}var currentSourceHeight=$("#"+sourceBodyDiv).outerHeight(true)+$("#"+sourceHeaderDiv).outerHeight(true)+alertHeightValue+parseInt($("#"+sourceContentDiv).css("padding-top"))+parseInt($("#"+sourceContentDiv).css("padding-bottom"))+heightPadding;if($("#"+sourceContentDiv).height()!=currentSourceHeight){$("#"+sourceContentDiv).animate({height:currentSourceHeight},300)}if(callback){callback()}log.trace("leaving checkSourceHeight")};module.checkSourceHeightOnWindowResize=function(){$(window).resize(function(){module.checkSourceHeight()})};module.hideModal=function(modalBackdropElementName,showSourceListDiv,callback){var divNames=staticconfig.divNames;$(modalBackdropElementName).animate({opacity:0},300,function(){log.trace("Hiding the modal");$("#"+divNames.modalDiv).modal("hide").remove();$("body").removeClass("greenid-modal-open");$(this).remove();if(showSourceListDiv==true){$("#"+divNames.sourceListDiv).show()}if(clientContext.wasDlStateSwitched()===true){$("#"+divNames.dlStateSelectId).focus()}else if(clientContext.isFirstSourceLoading()===true){$("#"+divNames.mainDiv).focus()}else if(clientContext.hasIntroAlertJustBeenAdded()===true&&clientContext.allowFieldsFormReveal===true){$("#"+divNames.introDiv+" ."+divNames.alertClass).focus()}else{$("#"+divNames.sourceContentDiv).focus()}module.checkSourceHeight();if(callback){callback()}clientContext.setDlStateSwitched(false);clientContext.setFirstSourceLoading(false);clientContext.introAlertAdded=false});log.trace("Leaving hideModal!")};module.hideModalSimple=function(modalBackdropElementName){var divNames=staticconfig.divNames;$("#"+divNames.modalDiv).modal("hide").remove();$(modalBackdropElementName).fadeOut().remove();$("#"+divNames.sourceContentDiv).focus();log.trace("Leaving hideModalSimple!")};module.insertContentAfter=function(content,location,callback){$(content).insertAfter("#"+location);if(callback){callback()}};module.insertContentBefore=function(content,location,callback){$(content).insertBefore("#"+location);if(callback){callback()}};module.replaceContent=function(location,content,callback){log.info("replaceContent location: "+location+" "+content);$("#"+location).html(content);if(callback){callback()}};module.showNoMatchError=function(sourceName){var divNames=staticconfig.divNames;log.trace("enter showNoMatchError");var sourceError=greenidConfig.get(sourceName+"_inProgressStr");var alertErrorClass=divNames.alertErrorClass;if($("#"+divNames.sourceContentDiv+" ."+alertErrorClass).length>0){$("#"+divNames.sourceContentDiv+" ."+alertErrorClass).remove()}module.insertContentAfter('<div class="'+divNames.alertClass+" "+alertErrorClass+'" aria-hidden="true" style="display: block; opacity: 0" role="alert" tabindex="0"><span class="greenid-alert-glyphicon glyphicon-remove-circle"></span>'+sourceError+"</div>",divNames.sourceHeaderDiv,function(){log.trace("enter showNoMatchError > insertContent");if(sourceName!="aecnonaml"&&!greenidUI.showNoMatchErrorOnFirstLoad(sourceName)){module.checkSourceHeight(function(){module.hideModal("#"+divNames.modalBackdropDiv,true)})}setTimeout(function(){$("."+alertErrorClass).animate({opacity:1}).attr("aria-hidden",false).focus()},500);log.trace("exit showNoMatchError > insertContent")});log.trace("exit showNoMatchError")};module.showDocUploadInvalidFilenameError=function(sourceName,errMessage){var divNames=staticconfig.divNames;log.info("enter showDocUploadInvalidFilenameError");var filenameError=greenidConfig.get(sourceName+"_filenameErrorStr");if(errMessage)filenameError=errMessage;var alertErrorClass=divNames.alertErrorClass;if($("#"+divNames.sourceContentDiv+" ."+alertErrorClass).length>0){$("#"+divNames.sourceContentDiv+" ."+alertErrorClass).remove()}module.insertContentAfter('<div class="'+divNames.alertClass+" "+alertErrorClass+'" aria-hidden="true" style="display: block; opacity: 0" role="alert" tabindex="0"><span class="greenid-alert-glyphicon glyphicon-remove-circle"></span>'+filenameError+"</div>",divNames.sourceHeaderDiv,function(){log.info("enter showNoMatchError > insertContent");if(sourceName!="aecnonaml"&&!greenidUI.showNoMatchErrorOnFirstLoad(sourceName)){module.checkSourceHeight(function(){module.hideModal("#"+divNames.modalBackdropDiv,true)})}setTimeout(function(){$("."+alertErrorClass).animate({opacity:1}).attr("aria-hidden",false).focus()},500);log.info("exit showNoMatchError > insertContent")});log.info("exit showNoMatchError")};module.removeAlertErrorMessage=function(){var divNames=staticconfig.divNames;var alertErrorClass=divNames.alertErrorClass;var sourceContentDiv=divNames.sourceContentDiv;if($("#"+sourceContentDiv+" ."+alertErrorClass).length>0){$("#"+sourceContentDiv+" ."+alertErrorClass).remove()}};module.replaceIntro=function(newIntro){var divNames=staticconfig.divNames;$("#"+divNames.introWording).animate({opacity:0},800,function(){module.replaceContent(divNames.introWording,newIntro);$("#"+divNames.introWording).animate({opacity:1},800)})};var dnbFailPopupActions=function(){clientContext.allowFieldsFormReveal=false;var dnbAgreeText=config.get("dnb_fail_popup_agree_text");var dnbAgreeCheckboxHtml='<div class="checkbox" id="greenid-dnb-agree-container"><label for="greenid-dnb-agree" class="control-label"><input type="checkbox" id="greenid-dnb-agree" class="required" aria-required="true" />'+dnbAgreeText+"</label></div>";var errorText=config.get("dnb_fail_popup_text")+dnbAgreeCheckboxHtml;var errorModalContext={errorHeading:config.get("dnb_fail_popup_title"),errorText:errorText,errorCustomButtonText:config.get("dnb_fail_popup_button_text"),errorCustomButtonId:"greenid-modal-close-dnb",errorCustomButtonClass:"btn-primary",modalContainer:clientContext.modalContainer,keepExistingModals:true};module.showErrorModal(errorModalContext);$("#greenid-wait-modal").fadeOut().remove();$("#greenid-modal-close-dnb").click(function(elem){$("#greenid-dnb-agree-container").removeClass("greenid-has-error").find("#error-greenid-dnb-agree").remove();if($("#greenid-dnb-agree").is(":checked")){clientContext.allowFieldsFormReveal=true;module.checkSourceHeight();module.hideModal("#"+staticconfig.divNames.modalBackdropDiv,true);module.modalHideActions(elem)}else{var error="<span class='help-block' id='error-greenid-dnb-agree'>To continue, tick the checkbox above to show your acceptance of this information.</span>";$("#greenid-dnb-agree-container").addClass("greenid-has-error").append(error);$("#greenid-dnb-agree-container input").focus()}})};module.addAlertsModifyIntro=function(sourceName,currentStatus,modalText){var divNames=staticconfig.divNames;if(sourceName==="postoffice"&&currentStatus.currentCheckState==="IN_PROGRESS"){var newIntro=greenidConfig.get("postoffice_introText");log.trace("ADDALERTSMODIFYINTRO: replacing the intro text after Auspost PDF generation");module.replaceIntro(newIntro);clientContext.postIntroAdded=true}var msg="";var alertClass=divNames.alertClass;if(utils.isVerified(currentStatus.currentCheckState)){clientContext.introAlertAdded=true;msg=greenidConfig.get(sourceName+"_verifiedStr");var newIntro=greenidConfig.get("intro_completed_source_introText");module.insertContentBefore('<div class="'+alertClass+' alert-dismissable greenid-alert-success" role="alert" tabindex="0"><button type="button" class="close" data-dismiss="alert" aria-label="close">&times;</button><span class="greenid-alert-glyphicon glyphicon-ok-circle"></span>'+msg+"</div>",divNames.introWording,function(){$("#"+divNames.introAlert).fadeIn(800);module.replaceIntro(newIntro);utils.waitUntil(clientContext.isModalTemplateLoadCompleted,100,0,3e3,function(){$("#"+divNames.modalTextDiv).empty().append(modalText)})});clientContext.introAlertAdded=true}else if(utils.isPending(currentStatus.currentCheckState)){clientContext.introAlertAdded=true;msg=greenidConfig.get(sourceName+"_pendingStr");var newIntro=greenidConfig.get("intro_completed_source_introText");module.insertContentBefore('<div class="'+alertClass+' alert-dismissable greenid-alert-warning" role="alert" tabindex="0"><button type="button" class="close" data-dismiss="alert" aria-label="close">&times;</button><span class="greenid-alert-glyphicon glyphicon-search"></span>'+msg+"</div>",divNames.introWording,function(){$("#"+divNames.introAlert).fadeIn(800);module.replaceIntro(newIntro);utils.waitUntil(clientContext.isModalTemplateLoadCompleted,100,0,3e3,function(){$("#"+divNames.modalTextDiv).empty().append(modalText)})})}else if(utils.isLockedOut(currentStatus.currentCheckState)){clientContext.introAlertAdded=true;msg=greenidConfig.get(sourceName+"_lockedoutStr");var newIntro=greenidConfig.get("intro_lockout_introText");module.insertContentBefore('<div class="'+alertClass+" alert-dismissable "+divNames.alertErrorClass+" "+divNames.alertLockoutClass+'" role="alert" tabindex="0"><button type="button" class="close" data-dismiss="alert" aria-label="close">&times;</button><span class="greenid-alert-glyphicon glyphicon-lock"></span>'+msg+" </div>",divNames.introWording,function(){$("#"+divNames.introAlert).fadeIn(800);module.replaceIntro(newIntro);utils.waitUntil(clientContext.isModalTemplateLoadCompleted,100,0,3e3,function(){$("#"+divNames.modalTextDiv).empty().append(modalText)})})}else if(utils.isNotContributing(currentStatus.currentCheckState)){log.trace("entering isNotContributing");clientContext.introAlertAdded=true;var newIntro=greenidConfig.get("intro_notContributing_introText");var registrationStateReason=currentStatus.checkStateReasonList[sourceName];if(registrationStateReason){msg=greenidConfig.get(sourceName+"_notContributingStr_"+registrationStateReason)}if(!msg){msg=greenidConfig.get(sourceName+"_notContributingStr")}if(!msg){msg=greenidConfig.get(sourceName+"_failedStr")}module.insertContentBefore('<div class="'+alertClass+" alert-dismissable "+divNames.alertErrorClass+'" role="alert" tabindex="0"><button type="button" class="close" data-dismiss="alert" aria-label="close">&times;</button><span class="greenid-alert-glyphicon glyphicon-ban-circle"></span>'+msg+" </div>",divNames.introWording,function(){$("#"+divNames.introAlert).fadeIn(800);module.replaceIntro(newIntro);utils.waitUntil(clientContext.isModalTemplateLoadCompleted,100,0,3e3,function(){$("#"+divNames.modalTextDiv).empty().append(modalText)})})}else if(utils.isFailed(currentStatus.currentCheckState)){log.trace("entering isFailed");clientContext.introAlertAdded=true;msg=greenidConfig.get(sourceName+"_failedStr");var newIntro=greenidConfig.get("intro_failed_introText");module.insertContentBefore('<div class="'+alertClass+" alert-dismissable "+divNames.alertErrorClass+'" role="alert" tabindex="0"><button type="button" class="close" data-dismiss="alert" aria-label="close">&times;</button><span class="greenid-alert-glyphicon glyphicon-remove-circle"></span>'+msg+" </div>",divNames.introWording,function(){$("#"+divNames.introAlert).fadeIn(800);module.replaceIntro(newIntro);utils.waitUntil(clientContext.isModalTemplateLoadCompleted,100,0,3e3,function(){if(sourceName==="dnb"&&config.get("enable_dnb_fail_popup")==true){dnbFailPopupActions()}else{$("#"+divNames.modalTextDiv).empty().append(modalText)}})})}};module.introAfterPost=function(){var newIntro=greenidConfig.get("intro_after_postoffice_introText");log.trace("INTROAFTERPOST: replacing post intro");module.replaceIntro(newIntro);clientContext.postIntroAdded=false};module.introStartUp=function(){var divNames=staticconfig.divNames;var alertClass=divNames.alertClass;if($("#greenid-intro-content ."+alertClass).length>0){$("#greenid-intro-content ."+alertClass).fadeIn("slow")}if($("#"+divNames.introWording).length>0){$("#greenid-source-content").fadeIn(1e3)}};module.sourceListStartUp=function(showManualOptions){log.trace("Entered sourceListStartUp: "+showManualOptions);var divNames=staticconfig.divNames;if($("#"+divNames.sourceTitleDiv).length<2){$("#"+divNames.sourceListDiv).hide()}var menuElement=$("#"+divNames.optionListDiv+" .dropdown-menu");var toggleElement=$("#"+divNames.optionListDiv+" .dropdown-toggle");function onClickAway(nofocus){menuElement.hide();if(nofocus){toggleElement.attr("aria-expanded","false")}else{toggleElement.attr("aria-expanded","false").focus()}setTimeout(function(){$("#"+divNames.sourceContentDiv).css("overflow","hidden")},200);menuElement.parent().removeClass("open");$(document).off("touchend.sourceList");$(document).off("keydown.sourceList");$(document).off("mouseup.sourceList")}toggleElement.click(function(){menuElement.toggle();menuElement.parent().toggleClass("open");if(showManualOptions){menuElement.addClass("has-manual-options");var container=$("#"+divNames.mainDiv);var pageWidth=container.width();menuElement.css("width",pageWidth)}else{menuElement.addClass("no-manual-options")}if($(this).parent().hasClass("open")){toggleElement.attr("aria-expanded","true");$("#"+divNames.optionListDiv+" .dropdown-menu h2:first-of-type").focus();$("#"+divNames.sourceContentDiv).css("overflow","visible");$(document).on("mouseup.sourceList",function(e){if(!menuElement.is(e.target)&&!toggleElement.is(e.target)){onClickAway()}});$(document).on("touchend.sourceList",function(e){if(!menuElement.is(e.target)&&menuElement.has(e.target).length===0&&!toggleElement.is(e.target)){onClickAway()}});$(document).on("keydown.sourceList",function(e){if(e.keyCode===27){onClickAway()}});$("#"+divNames.optionListDiv+" .dropdown-menu a").on("keypress.sourceList",function(e){onClickAway("nofocus")})}else{toggleElement.attr("aria-expanded","false");setTimeout(function(){$("#"+divNames.sourceContentDiv).css("overflow","hidden")},200)}});if($(".onesourceleft").length>0){$("#onesourceleft-alert").show()}$("#"+staticconfig.divNames.completeLaterModal+" [data-action='greenid-finish']").click(function(){greenidUI.saveAndCompleteLater()});$("#"+staticconfig.divNames.errorModal+" [data-action='greenid-finish']").click(function(){greenidUI.abandon()})};module.sourceListOnClick=function(){var divNames=staticconfig.divNames;var menuElement=$("#"+divNames.optionListDiv+" .dropdown-menu");var toggleElement=$("#"+divNames.optionListDiv+" .dropdown-toggle");menuElement.hide();toggleElement.attr("aria-expanded","false");setTimeout(function(){$("#"+divNames.sourceContentDiv).css("overflow","hidden")},200);menuElement.parent().removeClass("open")};module.fieldsFormReveal=function(){var divNames=staticconfig.divNames;utils.waitUntil(clientContext.areSourceFieldsLoaded,100,0,99999999999,function(){module.checkSourceHeight(function(){module.hideModal("#"+divNames.modalBackdropDiv,true,module.checkSourceHeight())})});log.trace("Leaving fieldsFormReveal!")};module.showErrorModal=function(context){var divNames=staticconfig.divNames;var showSaveAndCompleteLater=true;var showContinueVerification=true;var showCustomButton=true;if(!context.errorSaveAndCompleteLaterButtonText){showSaveAndCompleteLater=false}if(!context.errorCancelButtonText){showContinueVerification=false}if(!context.errorCustomButtonText){showCustomButton=false}log.trace("entering showErrorModal showSaveAndCompleteLater = "+showSaveAndCompleteLater+", showContinueVerification = "+showContinueVerification);if(!context.keepExistingModals){module.hideModal("#"+staticconfig.divNames.modalBackdropDiv,true);module.hideModalSimple("."+staticconfig.divNames.modalBackdropBootstrap)}var errorDivId=divNames.errorDiv;if($("#"+errorDivId).length==0){$('<div id="'+errorDivId+'" aria-live="assertive"></div>').prependTo(context.modalContainer)}var id=divNames.errorModal;$("#"+errorDivId).empty();var modalDivClass=divNames.modalDivClass;var errorModal='<div class="'+modalDivClass+' fade" id="'+id+'" tabindex="-1">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<span class="greenid-sr-only" data-action="greenid-dialog-start" tabindex="-1">Dialog start</span>'+'<div class="modal-header">'+'<h4 class="modal-title">'+context.errorHeading+"</h4>"+"    </div>"+'     <div class="modal-body">'+context.errorText+"</div>"+'    <div class="modal-footer">';if(showContinueVerification){errorModal+='      <button type="button" class="btn btn-default greenid-modal-close">'+context.errorCancelButtonText+"</button>"}if(showSaveAndCompleteLater){errorModal+='       <button type="button" class="btn btn-primary" data-action="greenid-finish">'+context.errorSaveAndCompleteLaterButtonText+"</button>"}if(showCustomButton){errorModal+='<button type="button" class="btn '+context.errorCustomButtonClass+'" data-action="custom-error-action" id="'+context.errorCustomButtonId+'">'+context.errorCustomButtonText+"</button>"}errorModal+="     </div>"+' \t<span class="greenid-sr-only" data-action="greenid-dialog-end" tabindex="0">Dialog end</span>'+"   </div>"+" </div>"+"</div>";log.trace("Adding error modal!");$("#"+errorDivId).append(errorModal);if(showSaveAndCompleteLater){$("#"+id+" [data-action='greenid-finish']").click(function(){greenidUI.saveAndCompleteLater();$("."+divNames.modalBackdropBootstrap).fadeOut().remove()})}else if(context.customButtonCallback){$("#"+id+" [data-action='custom-error-action']").click(function(){context.customButtonCallback();$("."+divNames.modalBackdropBootstrap).fadeOut().remove()})}var modalContainer=clientContext.modalContainer;if(modalContainer!="body"&&$(modalContainer).length!=0||$("."+ +divNames.modalBackdropDiv).length!=0){var useBackdrop=false}else{var useBackdrop="static"}$("#"+id).modal({backdrop:useBackdrop,keyboard:false});if(!useBackdrop){$('<div id="'+divNames.modalBackdropDiv+'" class="'+divNames.modalBackdropDiv+' fade in" tabindex="-1"></div>').appendTo(modalContainer).fadeIn(300)}$("#"+id).on("hidden.bs.modal",function(){$(context.modalContainer+" > #"+errorDivId).remove();$(context.modalContainer+" #"+errorDivId+" ."+modalDivClass).remove()});$("#"+id).on("shown.bs.modal",function(){$("#"+divNames.errorModal).find("[data-action='greenid-dialog-start']").focus()});var alertErrorClass=divNames.alertErrorClass;if($("#"+divNames.sourceContentDiv+" ."+alertErrorClass).length>0){$("#"+divNames.sourceContentDiv+" ."+alertErrorClass).remove();module.checkSourceHeight()}module.showHideInfoModals()};module.enablePostofficeAbandon=function(){$("#postoffice-download").click(function(){$("#postoffice-submit").removeAttr("disabled")})};module.initiateTooltips=function(){$('.greenid-helpicon, [data-toggle="tooltip"]').tooltip({placement:"auto",container:"body",html:true,template:'<div class="greenid-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'});$('[data-toggle="tooltip-arrow-under"]').tooltip({placement:"auto",container:"body",html:true,template:'<div class="greenid-tooltip" role="tooltip"><div class="tooltip-arrow greenid-z-underneath"></div><div class="tooltip-inner"></div></div>'});$('[data-toggle="tooltip-wide"]').tooltip({placement:"auto",container:"body",html:true,template:'<div class="greenid-tooltip" role="tooltip"><div class="tooltip-arrow greenid-z-underneath"></div><div class="tooltip-inner tooltip-inner-wide"></div></div>'});$('[data-toggle="popover"]').popover({html:true})};module.initiateDatepicker=function(uiLayer,selectorPrefix){selectorPrefix=selectorPrefix||"";$(selectorPrefix+" .greenid-datepicker").prev("input[readonly='readonly']").next().addClass("greenid-disabled");$(selectorPrefix+" .greenid-datepicker").on("click",function(){if(!$(this).siblings("input[type='text']").prop("disabled")){var dateFormat="dd/mm/yyyy";var minViewMode="days";if(uiLayer==="adminpanel"){dateFormat=$(this).data("format")}else{if($(this).hasClass("medicare-dob")){dateFormat="dd/mm/yyyy";minViewMode="days"}else if($("#greenid_medicaredvs_cardColour").length>0&&$(".dd-selected-value").val()=="Green"){dateFormat="mm/yyyy";minViewMode="months"}else if($("#greenid_medicaredvs_cardColour").length>0&&($(".dd-selected-value").val()=="Blue"||$(".dd-selected-value").val()=="Yellow")){dateFormat="dd/mm/yy";minViewMode="days"}else if($(this).hasClass("greenid-us-date")){dateFormat="mm/dd/yyyy"}else if($(this).attr("data-date-format")!=null&&$(this).attr("data-date-format").length>0){dateFormat=$(this).attr("data-date-format")}}var defaultDateToday=true;if($(this).hasClass("greenid-datepicker-dob")){var defaultDateToday=false}$(this).parent().datepicker({format:dateFormat,autoclose:true,minViewMode:minViewMode}).one("show",function(){var inputField=$(this).find("input[type='text']");if(inputField.val()==""&&defaultDateToday===false){inputField.val("01/01/1980").parent().datepicker("update");inputField.val("")}}).on("hide",function(){return false});$(this).parent().datepicker("show")}})};module.initiateCancelButton=function(){var sourceCancelButton=staticconfig.divNames.idPrefix+"source-cancel";$("#"+sourceCancelButton).click(function(){greenidUI.saveAndCompleteLater()})};module.checkboxAccessibility=function(){$(".checkbox input[type='checkbox']").on("change",function(){$(this).focus()})};module.initiateSourceyThings=function(skipSourceSetup){module.initiateDatepicker();module.initiateTooltips();module.fieldsFormReveal();module.initiateCancelButton();module.checkboxAccessibility();log.info("Entered initiateSourceyThings: "+clientContext.currentSourceName);if(greenidUsableFormsConfig.getUsableFormSourceList(clientContext.currentSourceName)&&!greenidUsableFormsConfig.displayTheUsableForm(clientContext.currentSourceName)){skipSourceSetup=true}if(!skipSourceSetup){var setupFunctionName="setup_"+clientContext.currentSourceName;log.info("Entered setupFunctionName: "+setupFunctionName);if(module[setupFunctionName]){module[setupFunctionName]()}}};function changeTooltips(newTooltips,cardName,newExpiryLabel){if(newTooltips.number_image){var newTooltipCode_number="<img src='"+newTooltips.number_image_path+"' alt='"+newTooltips.number_image_alt+"' class='greenid-card-help' width='"+newTooltips.number_image_width+"' height='"+newTooltips.number_image_height+"'> "+newTooltips.number_text}else{var newTooltipCode_number=newTooltips.number_text}if(newTooltips.individualReferenceNumber_image){var newTooltipCode_individualReferenceNumber="<img src='"+newTooltips.individualReferenceNumber_image_path+"' alt='"+newTooltips.individualReferenceNumber_image_alt+"' class='greenid-card-help' width='"+newTooltips.individualReferenceNumber_image_width+"' height='"+newTooltips.individualReferenceNumber_image_height+"'> "+newTooltips.individualReferenceNumber_text}else{var newTooltipCode_individualReferenceNumber=newTooltips.individualReferenceNumber_text}if(newTooltips.expiry_image){var newTooltipCode_expiry="<img src='"+newTooltips.expiry_image_path+"' alt='"+newTooltips.expiry_image_alt+"' class='greenid-card-help' width='"+newTooltips.expiry_image_width+"' height='"+newTooltips.expiry_image_height+"'> "+newTooltips.expiry_text}else{var newTooltipCode_expiry=newTooltips.expiry_text}if(newTooltips.number_text){$("#greenid_"+cardName+"_number_tooltip").attr("data-original-title",newTooltipCode_number).prev().children(".greenid-sr-only").html(newTooltips.number_text)}if(newTooltips.individualReferenceNumber_text){$("#greenid_"+cardName+"_individualReferenceNumber_tooltip").attr("data-original-title",newTooltipCode_individualReferenceNumber).prev().children(".greenid-sr-only").html(newTooltips.individualReferenceNumber_text)}if(newTooltips.expiry_text){$("#greenid_"+cardName+"_expiry_tooltip").attr("data-original-title",newTooltipCode_expiry).prev().children(".greenid-sr-only").html(newTooltips.expiry_text)}if(newExpiryLabel){$("#greenid_medicaredvs_expiry_label").html(newExpiryLabel)}}module.fancifyCentrelinkChooser=function(){$("#greenid_centrelinkdvs_number").inputmask({mask:"999-999-999a",casing:"upper"});$("#greenid_centrelinkdvs_cardType").ddslick({imagePosition:"right",width:"280",onSelected:function(data){$("#greenid_centrelinkdvs_cardType .dd-selected-value").attr("name","greenid_centrelinkdvs_cardType");$("#greenid_centrelinkdvs_cardType .dd-selected").addClass("form-control");var newTooltips={};if(data.selectedData.value=="HCC"){newTooltips={number_image:greenidConfig.get("centrelinkdvs_number_tooltip_image_hcc"),number_image_path:greenidConfig.get("centrelinkdvs_number_tooltip_image_path_hcc"),number_image_alt:greenidConfig.get("centrelinkdvs_number_tooltip_image_alt_hcc"),number_image_width:greenidConfig.get("centrelinkdvs_number_tooltip_image_width_hcc"),number_image_height:greenidConfig.get("centrelinkdvs_number_tooltip_image_height_hcc"),number_text:greenidConfig.get("centrelinkdvs_number_tooltip_text_hcc"),expiry_image:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_hcc"),expiry_image_path:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_path_hcc"),expiry_image_alt:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_alt_hcc"),expiry_image_width:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_width_hcc"),expiry_image_height:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_height_hcc"),expiry_text:greenidConfig.get("centrelinkdvs_expiry_tooltip_text_hcc")}}if(data.selectedData.value=="SHC"){newTooltips={number_image:greenidConfig.get("centrelinkdvs_number_tooltip_image_shc"),number_image_path:greenidConfig.get("centrelinkdvs_number_tooltip_image_path_shc"),number_image_alt:greenidConfig.get("centrelinkdvs_number_tooltip_image_alt_shc"),number_image_width:greenidConfig.get("centrelinkdvs_number_tooltip_image_width_shc"),number_image_height:greenidConfig.get("centrelinkdvs_number_tooltip_image_height_shc"),number_text:greenidConfig.get("centrelinkdvs_number_tooltip_text_shc"),expiry_image:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_shc"),expiry_image_path:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_path_shc"),expiry_image_alt:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_alt_shc"),expiry_image_width:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_width_shc"),expiry_image_height:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_height_shc"),expiry_text:greenidConfig.get("centrelinkdvs_expiry_tooltip_text_shc")}}if(data.selectedData.value=="PCC"){newTooltips={number_image:greenidConfig.get("centrelinkdvs_number_tooltip_image_pcc"),number_image_path:greenidConfig.get("centrelinkdvs_number_tooltip_image_path_pcc"),number_image_alt:greenidConfig.get("centrelinkdvs_number_tooltip_image_alt_pcc"),number_image_width:greenidConfig.get("centrelinkdvs_number_tooltip_image_width_pcc"),number_image_height:greenidConfig.get("centrelinkdvs_number_tooltip_image_height_pcc"),number_text:greenidConfig.get("centrelinkdvs_number_tooltip_text_pcc"),expiry_image:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_pcc"),expiry_image_path:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_path_pcc"),expiry_image_alt:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_alt_pcc"),expiry_image_width:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_width_pcc"),expiry_image_height:greenidConfig.get("centrelinkdvs_expiry_tooltip_image_height_pcc"),expiry_text:greenidConfig.get("centrelinkdvs_expiry_tooltip_text_pcc")}}changeTooltips(newTooltips,"centrelinkdvs");module.checkSourceHeight()}})};module.fancifyMedicaredvsChooser=function(){$("#greenid_medicaredvs_cardColour").ddslick({imagePosition:"right",width:"300",onSelected:function(data){$("#"+staticconfig.divNames.mainDiv+" .input-group.date").datepicker("remove");$("#greenid_medicaredvs_cardColour .dd-selected-value").attr("name","greenid_medicaredvs_cardColour");$("#greenid_medicaredvs_cardColour .dd-selected").addClass("form-control");var newTooltips={};if(data.selectedData.value=="Green"){newTooltips={number_image:greenidConfig.get("medicaredvs_number_tooltip_image_green"),number_image_path:greenidConfig.get("medicaredvs_number_tooltip_image_path_green"),number_image_alt:greenidConfig.get("medicaredvs_number_tooltip_image_alt_green"),number_image_width:greenidConfig.get("medicaredvs_number_tooltip_image_width_green"),number_image_height:greenidConfig.get("medicaredvs_number_tooltip_image_height_green"),number_text:greenidConfig.get("medicaredvs_number_tooltip_text_green"),individualReferenceNumber_image:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_green"),individualReferenceNumber_image_path:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_path_green"),individualReferenceNumber_image_alt:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_alt_green"),individualReferenceNumber_image_width:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_width_green"),individualReferenceNumber_image_height:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_height_green"),individualReferenceNumber_text:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_text_green"),expiry_image:greenidConfig.get("medicaredvs_expiry_tooltip_image_green"),expiry_image_path:greenidConfig.get("medicaredvs_expiry_tooltip_image_path_green"),expiry_image_alt:greenidConfig.get("medicaredvs_expiry_tooltip_image_alt_green"),expiry_image_width:greenidConfig.get("medicaredvs_expiry_tooltip_image_width_green"),expiry_image_height:greenidConfig.get("medicaredvs_expiry_tooltip_image_height_green"),expiry_text:greenidConfig.get("medicaredvs_expiry_tooltip_text_green")};var newLabel=greenidConfig.get("medicaredvs_expiry_label_green")}if(data.selectedData.value=="Blue"){newTooltips={number_image:greenidConfig.get("medicaredvs_number_tooltip_image_blue"),number_image_path:greenidConfig.get("medicaredvs_number_tooltip_image_path_blue"),number_image_alt:greenidConfig.get("medicaredvs_number_tooltip_image_alt_blue"),number_image_width:greenidConfig.get("medicaredvs_number_tooltip_image_width_blue"),number_image_height:greenidConfig.get("medicaredvs_number_tooltip_image_height_blue"),number_text:greenidConfig.get("medicaredvs_number_tooltip_text_blue"),individualReferenceNumber_image:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_blue"),individualReferenceNumber_image_path:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_path_blue"),individualReferenceNumber_image_alt:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_alt_blue"),individualReferenceNumber_image_width:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_width_blue"),individualReferenceNumber_image_height:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_height_blue"),individualReferenceNumber_text:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_text_blue"),expiry_image:greenidConfig.get("medicaredvs_expiry_tooltip_image_blue"),expiry_image_path:greenidConfig.get("medicaredvs_expiry_tooltip_image_path_blue"),expiry_image_alt:greenidConfig.get("medicaredvs_expiry_tooltip_image_alt_blue"),expiry_image_width:greenidConfig.get("medicaredvs_expiry_tooltip_image_width_blue"),expiry_image_height:greenidConfig.get("medicaredvs_expiry_tooltip_image_height_blue"),expiry_text:greenidConfig.get("medicaredvs_expiry_tooltip_text_blue")};var newLabel=greenidConfig.get("medicaredvs_expiry_label_blue")}if(data.selectedData.value=="Yellow"){newTooltips={number_image:greenidConfig.get("medicaredvs_number_tooltip_image_yellow"),number_image_path:greenidConfig.get("medicaredvs_number_tooltip_image_path_yellow"),number_image_alt:greenidConfig.get("medicaredvs_number_tooltip_image_alt_yellow"),number_image_width:greenidConfig.get("medicaredvs_number_tooltip_image_width_yellow"),number_image_height:greenidConfig.get("medicaredvs_number_tooltip_image_height_yellow"),number_text:greenidConfig.get("medicaredvs_number_tooltip_text_yellow"),individualReferenceNumber_image:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_yellow"),individualReferenceNumber_image_path:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_path_yellow"),individualReferenceNumber_image_alt:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_alt_yellow"),individualReferenceNumber_image_width:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_width_yellow"),individualReferenceNumber_image_height:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_image_height_yellow"),individualReferenceNumber_text:greenidConfig.get("medicaredvs_individualReferenceNumber_tooltip_text_yellow"),expiry_image:greenidConfig.get("medicaredvs_expiry_tooltip_image_yellow"),expiry_image_path:greenidConfig.get("medicaredvs_expiry_tooltip_image_path_yellow"),expiry_image_alt:greenidConfig.get("medicaredvs_expiry_tooltip_image_alt_yellow"),expiry_image_width:greenidConfig.get("medicaredvs_expiry_tooltip_image_width_yellow"),expiry_image_height:greenidConfig.get("medicaredvs_expiry_tooltip_image_height_yellow"),expiry_text:greenidConfig.get("medicaredvs_expiry_tooltip_text_yellow")};var newLabel=greenidConfig.get("medicaredvs_expiry_label_yellow")}changeTooltips(newTooltips,"medicaredvs",newLabel);module.checkSourceHeight()}})};module.multilineMedicaredvsName=function(){var toggleElement="greenid-medicaredvs-multiline-name-toggle";var fieldBlock="greenid-medicaredvs-multiline-name";var fieldElement="greenid_medicaredvs_nameOnCard";var fieldLabel="greenid-medicaredvs-nameOnCard-wrapper label";var showFieldsText=greenidConfig.get("medicaredvs_multiline_nameOnCard_toggle_text_showFields");var multiLineLabel=greenidConfig.get("medicaredvs_multiline_nameOnCard_label");var hideFieldsText=greenidConfig.get("medicaredvs_multiline_nameOnCard_toggle_text_hideFields");var singleLineLabel=greenidConfig.get("medicaredvs_nameOnCard_label");$("<a data-target='#"+fieldBlock+"' id='"+toggleElement+"' tabindex='0'>"+showFieldsText+"</a>").insertAfter("#"+fieldBlock);$("#"+fieldElement).attr("aria-describedby",toggleElement);$("#"+toggleElement).on("click keypress",function(event){if(utils.accessibleClick(event)===true){var currentText=$("#"+toggleElement).text();$("#"+fieldBlock).toggle("fadeIn",function(){if(currentText===showFieldsText){$("#"+toggleElement).text(hideFieldsText);$("#"+fieldLabel).html(multiLineLabel)}else if(currentText===hideFieldsText){$("#"+toggleElement).text(showFieldsText);$("#"+fieldLabel).html(singleLineLabel)}$("#"+fieldElement).focus();module.checkSourceHeight()});return false}})};module.nzaaNumberPrefill=function(){var membershipInput=$(".greenid-nzaa-number");var helpText="3083 26XX XXXX XXXX";var prepopText="3083 26";var fadedClass="greenid-input-faded";if(membershipInput.val()==helpText){membershipInput.addClass(fadedClass)}if(!membershipInput.val()){membershipInput.val(helpText);membershipInput.addClass(fadedClass)}membershipInput.on("focus",function(){$(this).removeClass(fadedClass);if($(this).val()==helpText){$(this).val(prepopText)}});membershipInput.on("focusout",function(){if($(this).val()==prepopText||!$(this).val()){$(this).val(helpText);$(this).addClass(fadedClass)}})};module.preparePassportForm=function(){$("#greenid-passport-extraquestion-container").hide();$("#greenid_passport_country").change(function(){if($(this).val()!="1"){$("#greenid-passport-extraquestion-container input").addClass("required");$("#greenid-passport-extraquestion-container").fadeIn(400,function(){module.checkSourceHeight()})}else if($(this).val()==="1"){$("#greenid-passport-extraquestion-container input").removeClass("required");$("#greenid-passport-extraquestion-container").fadeOut(400,function(){module.checkSourceHeight()})}})};module.prepareNzDiaSource=function(source,hiddenField,cutoffDate){var toggleDiv=$(".greenid-"+source+"-"+hiddenField+"-container");var issuedateField="greenid_"+source+"_issuedate";toggleDiv.hide().find("input").removeClass("required");$("#"+issuedateField).change(function(){greenidValidator.clearError(issuedateField);var enteredDate=$("#"+issuedateField).val();if(greenidValidator.isPastDateValid(enteredDate)){var convertedDate=greenidValidator.convertDate(enteredDate);var convertedCutoffDate=greenidValidator.convertDate(cutoffDate);if(convertedDate>convertedCutoffDate){toggleDiv.fadeIn("slow").find("input").addClass("required").focus();module.checkSourceHeight()}else{toggleDiv.fadeOut("slow").find("input").removeClass("required");toggleDiv.next(".checkbox").find("input").focus();module.checkSourceHeight()}}else{var msg="Invalid issue date.";greenidValidator.handleValidationError(issuedateField,msg);module.checkSourceHeight()}})};module.setup_medicaredvs=function(){log.i("medicaredvs","Entered setup_medicaredvs");module.fancifyMedicaredvsChooser();module.multilineMedicaredvsName()};module.setup_centrelinkdvs=function(){log.i("centrelink","Entered setup_centrelink");module.fancifyCentrelinkChooser()};module.setup_nzaa=function(){log.i("nzaa","Entered setup_nzaa");module.nzaaNumberPrefill()};module.setup_passport=function(){log.i("passport","Entered setup_passport");module.preparePassportForm()};module.setup_aecnonaml=function(){log.i("aecnonaml","Entered setup_aecnonaml");module.checkSourceHeight()};module.setup_birthcertificatedvs=function(){log.i("birthcertificatedvs","Entered setup_birthcertificatedvs");if(typeof greenidBdmConfig!=="undefined"){module.prepareBdmSources("birthcertificatedvs")}};module.setup_marriagecertificatedvs=function(){log.i("marriagecertificatedvs","Entered setup_marriagecertificatedvs");if(typeof greenidBdmConfig!=="undefined"){module.prepareBdmSources("marriagecertificatedvs")}};module.setup_changeofnamecertificatedvs=function(){log.i("changeofnamecertificatedvs","Entered setup_changeofnamecertificatedvs");if(typeof greenidBdmConfig!=="undefined"){module.prepareBdmSources("changeofnamecertificatedvs")}};module.setup_citizenshipcertificatedvs=function(){log.i("citizenshipcertificatedvs","Entered setup_citizenshipcertificatedvs");usableForms.prepareUsableForm("citizenshipcertificatedvs")};module.setup_nzcitizenship=function(){log.i("nzcitizenship","Entered setup_nzcitizenship");module.prepareNzDiaSource("nzcitizenship","certno","31/12/1999")};module.setup_nzbirthcertificate=function(){log.i("nzbirthcertificate","Entered setup_nzbirthcertificate");module.prepareNzDiaSource("nzbirthcertificate","regno","31/12/2002")};module.prepareBdmSources=function(sourceName){$("#"+greenidBdmConfig.bdm.coreFieldsDivId).height(0);$("#"+greenidBdmConfig.bdm.coreFieldsDivId).hide();$("."+greenidBdmConfig.bdm.certContainerClass).hide();var greenidBdmCertManager=greenidBdmCertManagerFunction($,greenidBdmConfig,greenidUtils);var isAdminPage=false;var greenidBdmCertificates=greenidBdmCertsFunction($,Handlebars,greenidBdmCertManager,greenidBdmConfig,greenidConfig,greenidUiBehaviours,greenidStaticConfig);var overrideCertInfo={prepopFieldsByName:{},prepopCheckBoxesByName:{}};var certDecorator=greenidBdmCertificates.getCertDecorator(sourceName)(overrideCertInfo)};module.equaliseHeights=function(element,callback,immediate){var maxHeight=0;$(element).each(function(){if($(this).outerHeight()>maxHeight){maxHeight=$(this).outerHeight()}});if(immediate){$(element).css({height:maxHeight})}else{$(element).animate({height:maxHeight},400)}if(callback){callback()}};module.smoothlyScroll=function(targetDiv){var targetPos=$("#"+targetDiv).offset().top;$("html, body").animate({scrollTop:targetPos-50},700)};return module}(greenidJQuery,greenidStaticConfig,greenidUtils,greenidAjax,greenidConfig,greenidClientContext,greenidLog,greenidUsableForms)}
if(!window.simpleuiLoaded){window.simpleuiLoaded=true;var greenidUI=function($,Handlebars,config,staticconfig,utils,dlHelper,uiBehaviours,ajax,validator,clientContext,log){"use strict";var allowedExtraData=["dnbCreditHeaderConsentGiven","ui","birthplace","businessUnit","customerType","documentNumber","secondaryDocumentNumber","tertiaryDocumentNumber","documentExpiryDate","documentIssueDate","documentState","documentEmployer","documentGender","usSocialSecurityNumber","nationality","documentOccupation","generateMobileReturningUserCode","number","sdkCapability","documentIssuer","documentIssuingStateCode","documentIssuingStateName","counsellorEmail","harmonySingleLineAddress","diaThirdPartyName","selectedEnvironment","consent","nationalIDNumber","origin","individualReferenceNumber","cardColour","nameOnCard","logSessionId"];var validExtraDataPrefixes=["th_"];var excludingExtraDataList=["givenNames","middleNames","surname","email","ruleId","dob","homePhone","workPhone","mobilePhone","country","flatNumber","postcode","townCity","town","propertyName","state","streetName","streetNumber","streetType","suburb","city"];var oldOnError=window.onerror;$.support.cors=true;var biometricMode=false;var haveSetupBiometricCapture=false;var startedViaMobile=false;var errorsWithNoSaveAndCompleteOption=["VerificationFault","FieldValidationFault"];var errorsOnlyOptionIstoAbandon=["InvalidTokenFault","TokenTimeoutFault","HeavyTrafficFault","WebScanAuthentication","JourneyDefinitionFault","CameraUnavailable","UnsupportedBrowser","NoSourcesAvailable","NetworkFault","ServerException","InvalidPasswordFault"];var knownErrors=["CameraUnavailable","UnsupportedBrowser"];var forceAllErrorModalsToCompletionPage=false;var validationCallback=function(){return true};var submitCallback=function(verificationToken,overallCurrentState){};var registerCallback=function(userId,args){};var errorCallback=function(verificationToken,errorName,overallCurrentState,args){};var ajaxErrorCallback;var sourceAttemptCallback=function(verificationToken,sourcename,outcome,overallCurrentState,args){};var sessionCompleteCallback=function(verificationToken,overallCurrentState,args){};var sessionCancelledCallback=function(verificationToken,overallCurrentState,args){};var sourcePreSubmitCallback=function(verificationToken,sourcename,data){};var docuploadCallback=function(){};var combinationSourceCallback=function(){};var updateStatus=function(currentStatus){overallCurrentState=currentStatus.outcome};var submitOnRegister=false;var accountId;var useSubmitCallback=false;var verificationToken;var overallCurrentState;var apiCode;var country;var submitted=false;var sessionComplete=false;var returnPage;var enableBackButtonWarning=true;var enableCancelButton=false;var showSourceList=true;var enableFraudScreen=false;var modalContainer=clientContext.modalContainer;var useRegisterWithDocumentAndDetails=false;var handoffOnceComboSourcesSatisifed=false;var renameMainDiv=false;var customModalClasses;var defaultIds={attemptId:"attemptId",documentType:"documentType",verificationToken:"verificationToken",accountId:"accountId",ruleId:"ruleId",apiCode:"apiCode",formId:"edentitiform",frameId:"edentitiframe",givenNames:"givenNames",middleNames:"middleNames",surname:"surname",email:"email",dob:"dob",homePhone:"homePhone",workPhone:"workPhone",mobilePhone:"mobilePhone",country:"country",flatNumber:"flatNumber",postcode:"postcode",townCity:"townCity",town:"town",city:"city",propertyName:"propertyName",state:"state",streetName:"streetName",streetNumber:"streetNumber",streetType:"streetType",suburb:"suburb"};var formIds;function buildBrowserInfoObject(){var event={};event["userAgent"]=navigator.userAgent;event["winHeight"]=$(window).height();event["docHeight"]=$(document).height();event["winWidth"]=$(window).width();event["docWidth"]=$(document).width();event["url"]=$(location).attr("href");event[log.MESSAGE]="Client Info";log.rlog(log.INFO,event,false,true)}var module={};module.setForceAllErrorsToCompletion=function(value){forceAllErrorModalsToCompletionPage=value};module.updateSubmitted=function(value){submitted=value};module.setStartedByMobile=function(isMobile){startedViaMobile=isMobile};module.error=function(error,onStartup){var event={};var modalContext=error.modalContext;delete error.modalContext;event.jsonError=JSON.stringify(error);event.onStartUp=onStartup;if(error.faultData&&error.faultData!=null){if(error.faultData.faultLogLevel==="WARN"){log.warn(event)}else{log.error(event)}}else{log.error(event)}var errorName="UnexpectedError";var errorDetails="";var errorString="";if(error.faultData&&error.faultData!=null){if(error.faultData.faultString!=null){errorName=error.faultData.code}if(error.faultData.faultName!=null){errorName=error.faultData.faultName}if(error.faultData.details!=null){errorDetails=error.faultData.details}if(error.faultData.faultString!=null){errorString=error.faultData.faultString}}if(errorString.indexOf("Futures timed out after")>-1){errorName="TimeoutFault"}if(errorDetails.indexOf("heavy traffic")>-1){errorName="HeavyTrafficFault"}if(errorString.indexOf("Invalid source id")>-1){errorName="SourceNotAvailableFault"}errorCallback(verificationToken,errorName,"unknown",error);var errorHeading=config.get("modal_error_heading");var errorText=config.get("modal_error_text");if(config.get("modal_show_error_details")){if(error.faultData&&error.faultData!=null){if(error.faultData.faultHeading!=null){errorHeading=error.faultData.faultHeading}}var messageArr=config.get("error_messages");var message="";if(messageArr[errorName]){message=messageArr[errorName]}else{if(error.faultData&&error.faultData!=null){if(error.faultData.faultString){message=error.faultData.faultString}}else{if(error.message&&staticconfig.debugEnabled()){message=error.message}}}if($.inArray(errorName,knownErrors)>-1){errorText="<p>"+message+"</p>"}else{errorText+=" <p>"+message+"</p>"}}var cancelButtonText=config.get("modal_error_cancel_button");var continueButtonText=config.get("modal_error_complete_later_button");var isErrorsOnlyOptionIstoAbandon=false;if($.inArray(errorName,errorsWithNoSaveAndCompleteOption)>-1||onStartup){continueButtonText=""}if($.inArray(errorName,errorsOnlyOptionIstoAbandon)>-1){isErrorsOnlyOptionIstoAbandon=true;continueButtonText="Ok";cancelButtonText=""}if(onStartup&&!isErrorsOnlyOptionIstoAbandon){submitted=false;cancelButtonText="Ok"}if(!config.get("enable_save_and_complete_later")&&!isErrorsOnlyOptionIstoAbandon){continueButtonText=""}if(forceAllErrorModalsToCompletionPage){cancelButtonText="";continueButtonText="Ok"}var errorModalContext={errorHeading:errorHeading,errorText:errorText,errorCancelButtonText:cancelButtonText,errorSaveAndCompleteLaterButtonText:continueButtonText,modalContainer:clientContext.modalContainer};if(modalContext){errorModalContext=modalContext}uiBehaviours.showErrorModal(errorModalContext)};function handleException(exception,funcName,sourceName){var event={};event[log.MESSAGE]="Caught Exception";event[log.FUNCTION]=funcName;if(sourceName){event[log.SOURCE]=sourceName}event["errorName"]=exception.name;event["errorMessage"]=exception.message;log.error(event);module.error(exception,false)}var handleError=function(rawError,onStartup){if(onStartup==="undefined"){onStartup=false}if(ajaxErrorCallback){ajaxErrorCallback(rawError,onStartup);return}if(rawError){if(rawError.responseText){module.error($.parseJSON(rawError.responseText),onStartup)}else{module.error({isFault:true,faultData:{faultCode:"env:Client",code:"SystemFault",details:"UnexpectedError",faultString:"Unexpected error"}},onStartup)}}};module.getFormIds=function(){return formIds};module.webScanRegister=function(webScanFormId,comboCallback,successCallback,finishCallback,returning,verifToken){var $e=$("#"+webScanFormId);verificationToken=verifToken;var originOverride="webBiometrics";accountId=$e.find("#"+formIds.accountId).val();var tmpRegWithDocAndDetails=useRegisterWithDocumentAndDetails;useRegisterWithDocumentAndDetails=true;var webScanRegData=extractRegisterData($e,originOverride);useRegisterWithDocumentAndDetails=tmpRegWithDocAndDetails;log.setAccount(accountId);log.setToken(verifToken);combinationSourceCallback=comboCallback;if(returning){webCallSetFields(webScanFormId,verifToken,originOverride)}else{var registerErrorHandler=function(error,onStartup,errorDetail){$("#greenid-results-div").show();$(".greenid-so-content.greenid-so-back-button-accessible").css("background","none");$(".btn.btn-cancel").remove();var errorString="Unexpected error";var errorText="<p>An unexpected error has occurred<p> <p>Unexpected error</p>";var logLevel="ERROR";var errorHeading="";if(errorDetail&&errorDetail.errorThrown){errorString=errorDetail.errorThrown;if("Proxy Error".toUpperCase()===errorString.toUpperCase()||"Timeout".toUpperCase()===errorString.toUpperCase()){errorText=config.get("biometric_modal_network_fault_error_text");logLevel="WARN";errorHeading=config.get("biometric_modal_network_fault_error_title")}}module.error({isFault:true,faultData:{faultCode:"env:Client",code:"SystemFault",faultHeading:errorHeading,details:"UnexpectedError",faultString:errorString,faultLogLevel:logLevel},modalContext:{errorCancelButtonText:"Ok",errorHeading:"Unexpected Error",errorSaveAndCompleteLaterButtonText:"",errorText:errorText,modalContainer:"#greenid-div"}},false)};ajax.registerWithDetailsRemote(webScanRegData,accountId,updateStatus,handleStartSuccess,registerErrorHandler,finishCallback)}};function webBuildSetFieldsInputStr(formdata,verifToken,originOverride){var input={};$.each(formdata,function(i,dataItem){if(dataItem.name!=="apiCode"&&dataItem.name!=="accountId"){input["greenid_ocrdocument_"+dataItem.name]=dataItem.value}else{input[dataItem.name]=dataItem.value}if(dataItem.name=="nameOnCard"){var nameOnCard=dataItem.value.split(" ");input["greenid_ocrdocument_givenNames"]=nameOnCard[0];input["greenid_ocrdocument_surname"]=nameOnCard[nameOnCard.length-1];var middleNamesList=nameOnCard.splice(1,nameOnCard.length-2);if(middleNamesList.length>0){input["greenid_ocrdocument_middleNames"]=middleNamesList.join(" ")}}});if(originOverride){input["origin"]=originOverride}input.sourceId="ocrdocument";input.verificationToken=verifToken;return JSON.stringify(input)}function webCallSetFields(webScanFormId,verifToken,originOverride){var inputStr=webBuildSetFieldsInputStr($("#"+webScanFormId+" :input").serializeArray(),verifToken,originOverride);var setFieldsErrorHandler=function(error,onStartup,errorDetail){$("#greenid-results-div").show();$(".greenid-so-content.greenid-so-back-button-accessible").css("background","none");$(".btn.btn-complete-later").remove();var errorString="Unexpected error";var errorText="<p>An unexpected error has occurred<p> <p>Unexpected error</p>";if(errorDetail&&errorDetail.errorThrown){errorString=errorDetail.errorThrown;if("Proxy Error".toUpperCase()===errorString.toUpperCase()||"Timeout".toUpperCase()===errorString.toUpperCase()){errorText=config.get("biometric_modal_network_fault_error_text")}}module.error({isFault:true,faultData:{faultCode:"env:Client",code:"SystemFault",details:"UnexpectedError",faultString:errorString},modalContext:{errorCancelButtonText:"Ok",errorHeading:"Unexpected Error",errorSaveAndCompleteLaterButtonText:"",errorText:errorText,modalContainer:"#greenid-div"}},true)};ajax.setFieldsRemote(inputStr,"ocrdocument",accountId,updateStatus,handleWebSetFieldsResult,setFieldsErrorHandler)}function interceptForm(registrationContext){try{var regData="";if(!registrationContext){var $e=$("#"+formIds.formId);verificationToken=$e.find("#"+formIds.verificationToken).val();accountId=$e.find("#"+formIds.accountId).val();regData=extractRegisterData($e,null)}else{verificationToken="";regData=extractRegisterDataFromContext(registrationContext)}log.setAccount(accountId);log.setToken(verificationToken);if(utils.isEmpty(verificationToken)){log.i("","About to register new user");if(useRegisterWithDocumentAndDetails){ajax.registerWithDetailsRemote(regData,accountId,updateStatus,handleStartSuccess,handleError,registerCallback)}else{ajax.registerRemote(regData,accountId,updateStatus,handleStartSuccess,handleError,registerCallback)}}else{log.i("","Getting sources for returning user");ajax.getSourcesRemote(extractReturnData($e),accountId,updateStatus,handleStartSuccess,handleError)}var event={};event[log.FUNCTION]="interceptForm";event["regData"]=utils.removePIIFromJSONString(regData);event["useRegisterWithDocumentAndDetails"]=useRegisterWithDocumentAndDetails;event["formIds.formId"]=formIds.formId;event["registrationContext"]=registrationContext;log.info(event)}catch(e){handleException(e,"interceptForm","")}}function handleStartSuccess(currentStatus,sourceName,accountId){try{verificationToken=currentStatus.verificationToken;log.setToken(verificationToken);log.i(sourceName,"Entered handleStartSuccess");log.logPointOfInterest("HandleStartSuccess",accountId,verificationToken,"");if(submitOnRegister){if(utils.isPassed(currentStatus.outcome)){success()}else{module.saveAndCompleteLater()}}$("#"+formIds.formId).hide();if(enableBackButtonWarning){window.onbeforeunload=function(){if(sessionComplete){return}return config.get("back_button_warning_message")}}if(!submitOnRegister){if(handoffOnceComboSourcesSatisifed&&!utils.sourcesContainCombinationSource(currentStatus.sources)){success()}if(utils.sourcesContainCombinationSource(currentStatus.sources)&&!haveSetupBiometricCapture&&!startedViaMobile){module.showBiometricCapture(accountId,apiCode,"default",currentStatus)}else{checkLoadBdmLibs(currentStatus);startUser(currentStatus,sourceName,accountId)}}}catch(e){handleException(e,"handleStartSuccess",sourceName)}}function checkLoadBdmLibs(currentStatus){var hasBdmSource=false;for(var key in currentStatus.sources){var source=currentStatus.sources[key];if(source.name.indexOf("certificatedvs")>=0){hasBdmSource=true;break}}if(hasBdmSource){var existingScript=window.greenidBdmConfigLoaded;var baseUrl=staticconfig.get("host");if(!existingScript){var script=document.createElement("script");script.src=baseUrl+"/javascripts/greenidui_privsec_bdm.min.js";script.type="text/javascript";script.id="privsecbdm";document.body.appendChild(script)}}}function checkLoadVueThenBiometrics(mconfig){if(true){var existingScript=window.greenidVueLoaded;var baseUrl=staticconfig.get("host");var vueInclude="vue.js";if(utils.isLocalOrDevServer(baseUrl)){vueInclude="vue-dev.js"}if(!existingScript){var script=document.createElement("script");script.src=baseUrl+"/javascripts/libs/vue/"+vueInclude;script.type="text/javascript";script.id="vuejs";script.onload=function(){var script2=document.createElement("script");script2.src=baseUrl+"/javascripts/libs/vue/vuex.js";script2.type="text/javascript";script2.id="vuexjs";script2.onload=function(){window.greenidVueLoaded=true;checkLoadBiometricsAfterVue(mconfig)};document.body.appendChild(script2)};document.body.appendChild(script)}}else{checkLoadBiometricsAfterVue(mconfig)}}function checkLoadBiometricsAfterVue(mconfig){var existingScript=window.greenidBiometricsLoaded;var baseUrl=staticconfig.get("host");if(!existingScript){var result=mconfig["harmony.user.password"];if(!utils.isEmpty(result)){var hScript=document.createElement("script");hScript.src=baseUrl+"/javascripts/greenidHarmonyForBiometrics.min.js";hScript.type="text/javascript";hScript.id="greenidHarmonyForBiometrics";hScript.onload=function(){console.log("Finished loading greenidHarmonyForBiometrics")};document.body.appendChild(hScript)}var bioInclude="greenidBiometrics.min.js";if(utils.isLocalOrDevServer(baseUrl)){bioInclude="greenidBiometrics.js"}var script=document.createElement("script");script.src=baseUrl+"/javascripts/"+bioInclude;script.type="text/javascript";script.id="greenidBiometrics";script.onload=function(){console.log("Finished loading greenidBiometrics")};document.body.appendChild(script);script=document.createElement("script");script.src=baseUrl+"/javascripts/idscanweb/idscan-jcs.7e951041c3d5f2c574b0.js";script.type="text/javascript";script.id="greenidIDSWebJS2";script.onload=function(){window.greenidBiometricsIDS2Loaded=true;console.log("Finished loading greenidBiometrics IDSWeb2")};document.body.appendChild(script)}}function startBiometrics(mconfig,theCurrentStatus){utils.waitUntil(checkGreenidBiometricsFinishedLoading,100,0,3e4,function(){if(!checkGreenidBiometricsFinishedLoading()){module.error({isFault:true,faultData:{faultCode:"env:Client",code:"NetworkFault",details:"Timeout",faultString:config.get("error_messages")["TimeoutFault"]},modalContext:{errorCancelButtonText:"Ok",errorHeading:config.get("modal_error_heading"),errorSaveAndCompleteLaterButtonText:"",errorText:config.get("error_messages")["TimeoutFault"],modalContainer:"#greenid-div"}},true);$("#greenid-results-div").show()}uiBehaviours.hideModal("#"+staticconfig.divNames.modalBackdropDiv,true);greenidBiometrics.startBiometrics(mconfig,theCurrentStatus)})}function checkGreenidBiometricsFinishedLoading(){return window.greenidBiometricsLoaded===true&&window.greenidBiometricsIDS2Loaded===true}function startUser(currentStatus,sourceName,accountId){try{if(utils.isPassed(currentStatus.outcome)||utils.isLockedOut(currentStatus.outcome)){success()}else{loadFirstSource(currentStatus,accountId)}}catch(e){handleException(e,"startUser",sourceName)}}function extractReturnData($e){accountId=$e.find("#"+formIds.accountId).val();apiCode=$e.find("#"+formIds.apiCode).val();return utils.buildJSONStr(accountId,apiCode,verificationToken,staticconfig.get("origin"))}function getDeviceprint(){try{if(enableFraudScreen){var event={};event[log.MESSAGE]="Fetching blackbox.";log.info(event);return ioGetBlackbox().blackbox}}catch(e){handleException(e,"getDeviceprint","")}return null}function extractRegisterDataFromContext(registrationContext){try{var ruleId=registrationContext.ruleId;var givenNames=registrationContext.givenNames;var middleNames=registrationContext.middleNames;var surname=registrationContext.surname;var email=registrationContext.email;var dob=registrationContext.dob;var homePhone=registrationContext.homePhone;var workPhone=registrationContext.workPhone;var mobilePhone=registrationContext.mobilePhone;var country=registrationContext.country;var flatNumber=registrationContext.flatNumber;var postcode=registrationContext.postcode;var townCity=registrationContext.townCity;var propertyName=registrationContext.propertyName;var state=registrationContext.state;var streetName=registrationContext.streetName;var streetNumber=registrationContext.streetNumber;var streetType=registrationContext.streetType;var suburb=registrationContext.suburb;var city=registrationContext.city;var extradata={};var arrayLength=allowedExtraData.length;for(var i=0;i<arrayLength;i++){var tmpname=allowedExtraData[i];var tmpval=registrationContext[tmpname];extradata[tmpname]=tmpval}var deviceprint=getDeviceprint();var retStr=JSON.stringify({accountId:accountId,apiCode:apiCode,givenNames:givenNames,middleNames:middleNames,surname:surname,ruleId:ruleId,email:email,dob:dob,homePhone:homePhone,workPhone:workPhone,mobilePhone:mobilePhone,country:country,flatNumber:flatNumber,propertyName:propertyName,postcode:postcode,townCity:townCity,state:state,streetName:streetName,streetNumber:streetNumber,streetType:streetType,suburb:suburb,city:city,deviceprint:deviceprint,extradata:extradata,hostedMode:staticconfig.getHostedMode(),origin:staticconfig.get("origin")});return retStr}catch(e){handleException(e,"extractRegisterDataFromContext")}}function arrayUnique(array){var a=array.concat();for(var i=0;i<a.length;++i){for(var j=i+1;j<a.length;++j){if(a[i]===a[j])a.splice(j--,1)}}return a}function getStandardDate(element){var value=element.val();var dateFormat=element.attr("data-date-format");if(dateFormat){var originDate=utils.parseDate(value,dateFormat);var newDate=utils.formatSubmitDate(originDate,"dd/mm/yyyy");return newDate.valueOf()}return value}function extractRegisterData($e,originOverride){try{accountId=$e.find("#"+formIds.accountId).val();apiCode=$e.find("#"+formIds.apiCode).val();var givenNames=$e.find("#"+formIds.givenNames).val();var middleNames=$e.find("#"+formIds.middleNames).val();var surname=$e.find("#"+formIds.surname).val();var email=$e.find("#"+formIds.email).val();var ruleId=$e.find("#"+formIds.ruleId).val();var dob=getStandardDate($e.find("#"+formIds.dob));var homePhone=$e.find("#"+formIds.homePhone).val();var workPhone=$e.find("#"+formIds.workPhone).val();var mobilePhone=$e.find("#"+formIds.mobilePhone).val();var country=$e.find("#"+formIds.country).val();var flatNumber=$e.find("#"+formIds.flatNumber).val();var postcode=$e.find("#"+formIds.postcode).val();var townCity=$e.find("#"+formIds.townCity).val();var town=$e.find("#"+formIds.town).val();var propertyName=$e.find("#"+formIds.propertyName).val();var state=$e.find("#"+formIds.state).val();var streetName=$e.find("#"+formIds.streetName).val();var streetNumber=$e.find("#"+formIds.streetNumber).val();var streetType=$e.find("#"+formIds.streetType).val();var suburb=$e.find("#"+formIds.suburb).val();var city=$e.find("#"+formIds.city).val();$("#greenid-so-confirm-details-form").append("<input type='hidden' id='harmonySingleLineAddress' id='harmonySingleLineAddress' value='false'/>");if(utils.isEmpty(streetName)&&!utils.isEmpty($e.find("#fullAddress").val())){$e.find("#harmonySingleLineAddress").val(true);streetName=$e.find("#fullAddress").val()}if(!utils.isEmpty($("#nameOnCard").val())){var nameOnCard=$("#nameOnCard").val().split(" ");givenNames=nameOnCard[0];surname=nameOnCard[nameOnCard.length-1];var middleNamesList=nameOnCard.splice(1,nameOnCard.length-2);if(middleNamesList.length>0){middleNames=middleNamesList.join(" ")}}var deviceprint=getDeviceprint();if(country==="US"){var split=dob.split("/");dob=[split[1],split[0],split[2]].join("/")}if($e.find("#mobileExtraDataListForRegistration").val()){var mobileExtraDataListForRegistration=$e.find("#mobileExtraDataListForRegistration").val().replace(/\s*,\s*/g,",").split(",");if(formIds.formId==="greenid-so-confirm-details-form"){if(mobileExtraDataListForRegistration){allowedExtraData=arrayUnique(mobileExtraDataListForRegistration.concat(allowedExtraData));allowedExtraData=allowedExtraData.filter(function(e){return excludingExtraDataList.indexOf(e)<0})}}}var extradata={};var arrayLength=allowedExtraData.length;for(var i=0;i<arrayLength;i++){var tmpname=allowedExtraData[i];var element=$e.find("#"+tmpname);var tmpval=element.val();if(element.is(":checkbox")){if($(element).prop("checked")){tmpval="true"}else{tmpval="false"}}extradata[tmpname]=tmpval}for(var j=0;j<validExtraDataPrefixes.length;j++){var selector="[id^='"+validExtraDataPrefixes[j]+"']";$e.find(selector).each(function(j,object){var key=object.id;var value=object.value;extradata[key]=value})}var inputContext={accountId:accountId,apiCode:apiCode,givenNames:givenNames,middleNames:middleNames,surname:surname,ruleId:ruleId,email:email,dob:dob,homePhone:homePhone,workPhone:workPhone,mobilePhone:mobilePhone,country:country,flatNumber:flatNumber,postcode:postcode,townCity:townCity,town:town,propertyName:propertyName,state:state,streetName:streetName,streetNumber:streetNumber,streetType:streetType,suburb:suburb,city:city,deviceprint:deviceprint,extradata:extradata,hostedMode:staticconfig.getHostedMode(),origin:staticconfig.get("origin")};if(!utils.isEmpty(originOverride)){inputContext.origin=originOverride}if(useRegisterWithDocumentAndDetails){inputContext.attemptId=$e.find("#"+formIds.attemptId).val();inputContext.documentType=$e.find("#"+formIds.documentType).val();inputContext.documentNumber=$e.find("#"+formIds.documentNumber).val()}var retStr=JSON.stringify(inputContext);log.trace("Using inputString = "+retStr);return retStr}catch(e){handleException(e,"extractRegisterData",sourceName)}}function loadFirstSource(currentStatus,accountId){try{clientContext.firstSourceLoading=true;returnPage=encodeURIComponent(document.location.href);initialiseDivs("",currentStatus);showSources("",currentStatus);var modalText=config.get("modal_loading_first_source");var firstSourceName=utils.getNextSourceName(currentStatus);log.i(firstSourceName,"Loading first source");getFields(currentStatus,firstSourceName,modalText);if(module.showNoMatchErrorOnFirstLoad(firstSourceName)){utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){uiBehaviours.showNoMatchError(firstSourceName)})}}catch(e){handleException(e,"loadFirstSource",firstSourceName)}}module.showNoMatchErrorOnFirstLoad=function(firstSourceName){if(staticconfig.properties["showFailedMessageOnFirstLoad"]){var listOfSources=staticconfig.properties["showFailedMessageOnFirstLoad"].split(",");for(var sourceIndex=0;sourceIndex<listOfSources.length;sourceIndex++){if(listOfSources[sourceIndex].trim()===firstSourceName&&clientContext.isFirstSourceLoading()===true){return true}}}return false};function showSources(lastSourceName,currentStatus){if(showSourceList){try{var event={};event[log.SOURCE]=lastSourceName;event[log.MESSAGE]="Showing sources";event[log.FORM_ID]=staticconfig.divNames.sourceListDiv;log.debug(event);if($("#"+staticconfig.divNames.optionListDiv).length>0){$("#"+staticconfig.divNames.optionListDiv).remove()}var extraContext={selectid:staticconfig.divNames.sourceListId,completeLaterHeading:config.get("modal_complete_later_heading"),completeLaterText:config.get("modal_complete_later_text"),completeLaterButton:config.get("modal_complete_later_button"),completeLaterCancelButton:config.get("modal_complete_later_cancel_button"),completeLaterModal:staticconfig.divNames.completeLaterModal,oneSourceLeftAlertText:config.get("onesourceleft_alert_text"),showSourceList:showSourceList};var sourceListClickCallback=uiBehaviours.sourceListOnClick;ajax.getSourceList(staticconfig.divNames.sourceListDiv,currentStatus,extraContext,getFields,sourceListClickCallback)}catch(e){handleException(e,"showSources",lastSourceName)}}}function initialiseDivs(lastSourceName,currentStatus){try{var event={};event["lastSourceName"]=lastSourceName;event["frameId"]=formIds.frameId;event[log.MESSAGE]="Entered initialiseDivs";log.trace(event);$("#"+formIds.frameId).find("*").not("."+staticconfig.divNames.modalDiv,"."+staticconfig.divNames.modalBackdropDiv).remove();$("#"+staticconfig.divNames.biometricDiv).hide();$('<div id="'+staticconfig.divNames.mainDiv+'" data-eq-pts="small: 768, medium: 992, large: 1200" role="main" tabindex="0"></div>').appendTo("#"+formIds.frameId);$('<div id="'+staticconfig.divNames.errorDiv+'" aria-live="assertive"></div>').appendTo("#"+staticconfig.divNames.mainDiv);$('<div id="'+staticconfig.divNames.introDiv+'" role="banner" aria-live="assertive"></div>').appendTo("#"+staticconfig.divNames.mainDiv);$('<div id="'+staticconfig.divNames.sourceContentDiv+'" tabindex="-1"></div>').appendTo("#"+staticconfig.divNames.mainDiv);var sourceListVisibilityClass="";if(!showSourceList){sourceListVisibilityClass="greenid-hide-source-list"}else{sourceListVisibilityClass="greenid-show-source-list"}$('<div id="'+staticconfig.divNames.sourceHeaderDiv+'" class="'+sourceListVisibilityClass+'"></div>').appendTo("#"+staticconfig.divNames.sourceContentDiv);$('<div id="'+staticconfig.divNames.sourceTitleDiv+'"></div>').appendTo("#"+staticconfig.divNames.sourceHeaderDiv);$('<div id="'+staticconfig.divNames.sourceListDiv+'" role="navigation"></div>').appendTo("#"+staticconfig.divNames.sourceHeaderDiv);$('<div id="'+staticconfig.divNames.sourceBodyDiv+'"></div>').appendTo("#"+staticconfig.divNames.sourceContentDiv);var extraContext={};if(biometricMode){extraContext={intro_title:config.get("biometric_intro_title"),intro_introText:config.get("biometric_intro_introText")};biometricMode=false}else{if(currentStatus.numPassedSources<3){extraContext={intro_title:config.get("intro_title"),intro_introText:config.get("intro_introText"+currentStatus.numPassedSources)}}else{extraContext={intro_title:config.get("intro_title"),intro_introText:config.get("intro_introText2")}}}if(haveSetupBiometricCapture){$("#"+staticconfig.divNames.introDiv).parent().wrap("<div id='greenid-biometrics-wrapper'></div>");$("#greenid-biometrics-wrapper").addClass("greenid-so-content").addClass("greenid-so-back-button-accessible");if(!staticconfig.getHostedMode()){var completeLaterInject='<nav class="greenid-so-content-nav greenid-so-content-flex-row-reverse">'+'<button type="button" data-target="#greenid-so-btn-complete-later-modal"  class="btn btn-complete-later greenid-modal-launch">Complete later</button></nav>\n'+config.get("intro_title")+'<div class="greenid-modal fade" id="greenid-so-btn-complete-later-modal" tabindex="-1" aria-hidden="true">\n'+'<div class="modal-dialog"><div class="modal-content">\n'+'<span class="greenid-sr-only" data-action="greenid-dialog-start" tabindex="-1">Dialog start</span><div class="modal-header">\n'+'<button type="button" class="greenid-modal-close greenid-x" aria-label="close">&times;</button>\n'+'<h4 class="modal-title">Complete this process later</h4></div><div class="modal-body">\n'+"<p>If you quit now, your progress will be saved and you can continue from this point later on.</p>\n"+'<p>Are you sure you want to quit now and finish later?</p></div><div class="modal-footer">\n'+'<button type="button" class="btn btn-primary" onclick="greenidUI.saveAndCompleteLater()">Yes, quit now</button>\n'+'<button type="button" class="btn btn-default greenid-modal-close">No, continue the process</button>\n'+'</div><span class="greenid-sr-only" data-action="greenid-dialog-end" tabindex="0">Dialog end</span></div></div></div>';extraContext.intro_title=Handlebars.compile(completeLaterInject)}}if(staticconfig.getHostedMode()){$("#"+staticconfig.divNames.introDiv).parent().wrap("<div id='greenid-biometrics-wrapper'></div>");$("#greenid-biometrics-wrapper").addClass("greenid-so-content").addClass("greenid-so-back-button-accessible");var cancelInject='<nav class="greenid-so-content-nav greenid-so-content-flex-row-reverse">'+'<button type="button" data-target="#greenid-so-btn-cancel-modal"  class="btn btn-cancel greenid-modal-launch">Cancel</button></nav>\n'+config.get("intro_title")+'<div class="greenid-modal fade" id="greenid-so-btn-cancel-modal" tabindex="-1" aria-hidden="true">\n'+'<div class="modal-dialog"><div class="modal-content">\n'+'<span class="greenid-sr-only" data-action="greenid-dialog-start" tabindex="-1">Dialog start</span><div class="modal-header">\n'+'<button type="button" class="greenid-modal-close greenid-x" aria-label="close">&times;</button>\n'+'<h4 class="modal-title">Are you sure you want to cancel this process?</h4></div><div class="modal-footer">\n'+'<button type="button" class="btn btn-primary" onclick="greenidUI.saveAndCompleteLater()">Yes, quit now</button>\n'+'<button type="button" class="btn btn-default greenid-modal-close">No, continue the process</button>\n'+'</div><span class="greenid-sr-only" data-action="greenid-dialog-end" tabindex="0">Dialog end</span></div></div></div>';extraContext.intro_title=Handlebars.compile(cancelInject)}ajax.getIntro(staticconfig.divNames.introDiv,extraContext);uiBehaviours.hideModalSimple("."+staticconfig.divNames.modalBackdropBootstrap);uiBehaviours.checkSourceHeightOnWindowResize();uiBehaviours.refreshElementQueryArray();event={};event["lastSourceName"]=lastSourceName;event["frameId"]=formIds.frameId;event[log.MESSAGE]="Leaving initialiseDivs";log.trace(event)}catch(e){handleException(e,"initialiseDivs",lastSourceName)}}function initialiseBiometricDiv(){try{var event={};event["frameId"]=formIds.frameId;event[log.MESSAGE]="Entered initialiseBiometricDiv";log.trace(event);$("#"+formIds.frameId).find("*").not("."+staticconfig.divNames.modalDiv,"."+staticconfig.divNames.modalBackdropDiv).remove();$('<div id="'+staticconfig.divNames.biometricDiv+'"></div>').appendTo("#"+formIds.frameId);event={};event["frameId"]=formIds.frameId;event[log.MESSAGE]="Leaving initialiseBiometricDiv";log.trace(event)}catch(e){handleException(e,"initialiseBiometricDiv",lastSourceName)}}module.reshowBiometricDiv=function(){var event={};event["frameId"]=formIds.frameId;event[log.MESSAGE]="Entered initialiseBiometricDiv";log.trace(event);initialiseBiometricDiv()};function shouldInvokeDocuploadCallback(currentStatus){if(!utils.isVerified(currentStatus.overallVerificationStatus)&&staticconfig.get("origin")==="mobile"){return true}return false}function shouldInvokeCombinationSourceCallback(currentStatus){if(!utils.isVerified(currentStatus.overallVerificationStatus)){return true}return false}function showUploadsPage(currentStatus){try{var event={};event.uploadTypes=JSON.stringify(staticconfig.uploadTypes);event.message="Entering showUploadsPage";log.info(event);if(shouldInvokeDocuploadCallback(currentStatus)){if(docuploadCallback){$("#"+formIds.frameId).empty();docuploadCallback(currentStatus.verificationToken,staticconfig.uploadTypes,currentStatus.overallVerificationStatus);return}}var extraContext={host:staticconfig.get("host"),uploadtypes:staticconfig.uploadTypes,accountId:accountId,apiCode:apiCode,verificationToken:verificationToken,filetypeLabel:config.get("upload"+"_filetype_label"),filetypeDefaultOption:config.get("upload"+"_filetype_default_option"),choosefileButtonText:config.get("upload"+"_choosefile_button_text"),choosefileButtonWidth:config.get("upload"+"_choosefile_button_width"),choosefileButtonHeight:config.get("upload"+"_choosefile_button_height"),submitButtonText:config.get("upload"+"_submit_button_text"),enableCancelButton:enableCancelButton,sourceCancelButton:staticconfig.divNames.idPrefix+"source-cancel",sourceCancelButtonText:config.get("cancel_button_text")};var sourceTitle=config.get("upload"+"_title");var infoTitle=config.get("upload"+"_info_title");var infoText=config.get("upload"+"_info_text");var extraTitleContext={sourceTitle:sourceTitle,infoTitle:infoTitle,infoText:infoText};uiBehaviours.addModalBackdrop(true,1,true);var modalText=greenidConfig.get("modal_loading_source");uiBehaviours.showModal("#"+staticconfig.divNames.sourceContentDiv,modalText,false);utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){ajax.addSourceHeader(staticconfig.divNames.sourceTitleDiv,currentStatus,extraTitleContext);ajax.getTemplateSimple("upload.hb","#"+staticconfig.divNames.sourceBodyDiv,extraContext,function(){uiBehaviours.hideModal("#"+staticconfig.divNames.modalBackdropDiv,true);uiBehaviours.checkSourceHeight()})})}catch(e){handleException(e,"showUploadsPage","")}}function showCombinationSourcePage(currentStatus,sourceName){var combinationSourceName=utils.extractSourceFromAugmentedName(sourceName);module.invokeCombinationSourceCallback(currentStatus.verificationToken,currentStatus.overallVerificationStatus,combinationSourceName,currentStatus,event)}function forceFinishWhenNoSourcesLeft(){try{if(staticconfig.showDialogWhenNoSourcesLeft()){var errorModalContext={errorHeading:config.get("modal_no_sources_left_heading"),errorText:config.get("modal_no_sources_left_text"),errorSaveAndCompleteLaterButtonText:config.get("modal_no_sources_left_button"),modalContainer:clientContext.modalContainer};uiBehaviours.showErrorModal(errorModalContext)}else{greenidUI.saveAndCompleteLater()}}catch(e){handleException(e,"showUploadsPage","")}}function getFields(currentStatus,sourceName,modalText){try{log.i(sourceName,"Entered getFields: ");if(utils.isDocumentScanSource(sourceName)){showCombinationSourcePage(currentStatus,sourceName);return}if(!sourceName||sourceName===null||sourceName===""){if(currentStatus.showAuspost){sourceName="postoffice"}else{forceFinishWhenNoSourcesLeft();return}}if(sourceName==="upload"){showUploadsPage(currentStatus);return}var theActualSourceName=sourceName;var source=utils.getSourceFromStatus(currentStatus,sourceName);if(source!=null&&source.isCombo){if(sourceName==="dl"){theActualSourceName=dlHelper.getAddressStateMatchingSourceName(source,staticconfig.ADDRESS_STATE)}else{theActualSourceName=source.subnames[0]}}uiBehaviours.addModalBackdrop(true,1,true);if(($("#"+staticconfig.divNames.modalDiv).length==0||$("."+staticconfig.divNames.modalBackdropBootstrap).length>0)&&clientContext.allowFieldsFormReveal){uiBehaviours.showModal("#"+staticconfig.divNames.sourceContentDiv,modalText,false)}else{}var inputStr=JSON.stringify({accountId:accountId,apiCode:apiCode,verificationToken:verificationToken,sourceId:theActualSourceName,origin:staticconfig.get("origin")});if(clientContext.isPostIntroAdded()===true){uiBehaviours.introAfterPost()}ajax.getFieldsRemote(inputStr,theActualSourceName,accountId,updateStatus,showFieldsForm,handleError)}catch(e){handleException(e,"getFields",sourceName)}}function buildModifiedSourceName(sourceName,currentStatus){if(utils.toBoolean(currentStatus.properties.useModifiedLabelConfig)){if(!utils.isEmpty(currentStatus.properties.countries)){var country=currentStatus.properties.countries.toLowerCase();return sourceName+"_"+country}}else{return sourceName}}function showFieldsForm(currentStatus,sourceName,accountId,page){try{var modifiedSourceName=sourceName;log.i(sourceName,"Entered showFields Form: "+modifiedSourceName);var source=utils.getSourceFromStatus(currentStatus,sourceName);clientContext.currentSourceName=sourceName;try{var template=Handlebars.compile(currentStatus.sourceFieldRawData)}catch(e){handleException(e,"showFieldsForm.handleBarsCompile",sourceName)}if(template instanceof Function){currentStatus.sourceFieldRawData=template(config.getContext(modifiedSourceName))}else{currentStatus.sourceFieldRawData=""}var sourceTitle=config.get(modifiedSourceName+"_title");var infoTitle=config.get(modifiedSourceName+"_info_title");var infoText=config.get(modifiedSourceName+"_info_text");var sourceIntroText=config.get(modifiedSourceName+"_source_intro_text");var extraTitleContext={sourceTitle:sourceTitle,infoTitle:infoTitle,infoText:infoText};var sourceFormId=staticconfig.divNames.idPrefix+"FieldsForm";var submitButton=staticconfig.divNames.idPrefix+"submit";var sourceCancelButton=staticconfig.divNames.idPrefix+"source-cancel";var sourceCancelButtonText=config.get("cancel_button_text");var submitButtonText=sourceName==="postoffice"?config.get("postoffice_submit_button_text"):config.get("submit_button_text");var extraContext={fieldsformid:sourceFormId,submitButton:submitButton,submitButtonText:submitButtonText,sourceName:sourceName,sourceIntroText:sourceIntroText,enableCancelButton:enableCancelButton,sourceCancelButton:sourceCancelButton,sourceCancelButtonText:sourceCancelButtonText};if(dlHelper.isRego(sourceName)){var extraDLContext=dlHelper.buildStateDropDownContext(currentStatus,sourceName,utils,config);$.extend(extraContext,extraDLContext);$.extend(extraContext,{dlStateSelectId:staticconfig.divNames.dlStateSelectId})}if(typeof greenidBdmConfig!=="undefined"){if(greenidBdmConfig.isBdmSource(sourceName)){if("simpleui-bdm-form"in greenidHandlebars.templates){var states=["NSW","VIC","QLD","WA","SA","TAS","ACT","NT"];if(currentStatus.properties.regions){states=currentStatus.properties.regions.split(",")}var bdm_context={"greenid-corefields":currentStatus.sourceFieldRawData,nostateselect:states.length===1,stateChooserLabel:config.get("certificatedvs_state_chooser_label"),states:states,allStatesAvailable:states.length===8};var bdm_template=greenidHandlebars.templates["simpleui-bdm-form"];currentStatus.sourceFieldRawData=bdm_template(bdm_context)}}}if(clientContext.isNextSourceLoading()===true){log.debug("Next source Loading is true, waiting for isNextSourceSwitchAnimationCompleted: "+clientContext.isNextSourceSwitchAnimationCompleted());utils.waitUntil(clientContext.isNextSourceSwitchAnimationCompleted,100,0,3e3,function(){log.debug("isNextSourceSwitchAnimationCompleted = "+clientContext.isNextSourceSwitchAnimationCompleted());ajax.addSourceHeader(staticconfig.divNames.sourceTitleDiv,currentStatus,extraTitleContext);ajax.addSourceFields(staticconfig.divNames.sourceBodyDiv,currentStatus,extraContext,getFields,submitSourceForm);clientContext.nextSourceLoading=false})}else{log.debug("Next source Loading is false, waiting for isSourceSwitchAnimationCompleted: "+clientContext.isSourceSwitchAnimationCompleted());utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){log.debug("isSourceSwitchAnimationCompleted = "+clientContext.isSourceSwitchAnimationCompleted());ajax.addSourceHeader(staticconfig.divNames.sourceTitleDiv,currentStatus,extraTitleContext);ajax.addSourceFields(staticconfig.divNames.sourceBodyDiv,currentStatus,extraContext,getFields,submitSourceForm)})}}catch(e){handleException(e,"showFieldsForm",sourceName)}}function invokeSourcePreSubmitCallback(currentStatus,sourceName,inputData){try{var clonedData=$.extend({},inputData);sourcePreSubmitCallback(currentStatus.verifiationToken,sourceName,clonedData)}catch(e){handleException(e,"invokeSourcePreSubmitCallback",sourceName)}}function submitSourceForm(sourceFormId,sourceName,currentStatus,theActualSourceName,source){try{var event={};event[log.SOURCE]=sourceName;event[log.FORM_ID]=sourceFormId;event[log.OVERALL_STATE]=currentStatus.outcome;event[log.MESSAGE]="Entered submitSourceForm";log.info(event);var data=$("#"+sourceFormId+" :input").serializeArray();if(validator.validateAllFields(sourceName,sourceFormId,true)){var inputData={};inputData["accountId"]=accountId;inputData["apiCode"]=apiCode;inputData["verificationToken"]=verificationToken;inputData["sourceId"]=sourceName;for(var i=0;i<data.length;i++){inputData[data[i].name]=data[i].value}inputData.origin=staticconfig.get("origin");invokeSourcePreSubmitCallback(currentStatus,sourceName,inputData);var inputStr=JSON.stringify(inputData);uiBehaviours.addModalBackdrop(false,.5,false);var modalText="";if(sourceName==="postoffice"){modalText=config.get("postoffice_modal_generating_form")}else{modalText=config.get("modal_checking_details")}uiBehaviours.showModal("#"+staticconfig.divNames.sourceContentDiv,modalText,false);ajax.setFieldsRemote(inputStr,sourceName,accountId,updateStatus,handleSetFieldsResult,handleError)}}catch(e){handleException(e,"submitSourceForm",sourceName)}}function handleWebSetFieldsResult(currentStatus,sourceName,accountId){try{var event={};event[log.SOURCE]=sourceName;event[log.CURRENT_CHECK_STATE]=currentStatus.currentCheckState;event[log.OVERALL_STATE]=currentStatus.outcome;event[log.MESSAGE]="Entered handleWebSetFieldsResults";log.info(event);if(handoffOnceComboSourcesSatisifed&&!utils.sourcesContainCombinationSource(currentStatus.sources)){success()}if(utils.isPassed(currentStatus.outcome)||utils.isLockedOut(currentStatus.outcome)){event={};event[log.SOURCE]=sourceName;event[log.OVERALL_STATE]=currentStatus.outcome;event[log.MESSAGE]="User is passed or locked out, submitting form now";log.info(event);success();return}initialiseDivs("",currentStatus);showSources(sourceName,currentStatus);var modalText=config.get("modal_checking_details");var firstSourceName=utils.getNextSourceName(currentStatus);log.i(firstSourceName,"Loading source");getFields(currentStatus,firstSourceName,modalText)}catch(e){handleException(e,"handleSetFieldsResult",sourceName)}}function handleSetFieldsResult(currentStatus,sourceName,accountId){try{var event={};event[log.SOURCE]=sourceName;event[log.CURRENT_CHECK_STATE]=currentStatus.currentCheckState;event[log.OVERALL_STATE]=currentStatus.outcome;event[log.MESSAGE]="Entered handleSetFieldsResults";log.info(event);try{sourceAttemptCallback(verificationToken,utils.extractWebServiceName(currentStatus,sourceName,dlHelper),currentStatus.currentCheckState,currentStatus.outcome)}catch(e){handleException(e,"handleSetFieldsResult:sourceAttemptCallback",sourceName)}if(utils.isPassed(currentStatus.outcome)||utils.isLockedOut(currentStatus.outcome)){event={};event[log.SOURCE]=sourceName;event[log.OVERALL_STATE]=currentStatus.outcome;event[log.MESSAGE]="User is passed or locked out, submitting form now";log.info(event);success();return}if(utils.isPassed(currentStatus.currentCheckState)||utils.isLockedOut(currentStatus.currentCheckState)||utils.isFailed(currentStatus.currentCheckState)||utils.isNotContributing(currentStatus.currentCheckState)){log.debug("Source "+sourceName+" is "+currentStatus.currentCheckState+", waiting for isModalTemplateLoadCompleted: "+clientContext.isModalTemplateLoadCompleted);utils.waitUntil(clientContext.isModalTemplateLoadCompleted,100,0,3e3,function(){log.debug("isModalTemplateLoadCompleted = "+clientContext.isModalTemplateLoadCompleted);var modalText=config.get("modal_loading_next_source");clientContext.nextSourceLoading=true;var modifiedSourceName=buildModifiedSourceName(sourceName,currentStatus);uiBehaviours.addAlertsModifyIntro(modifiedSourceName,currentStatus,modalText);showSources(sourceName,currentStatus);var nextSourceName=utils.getNextSourceName(currentStatus);getFields(currentStatus,nextSourceName,modalText)})}else{log.debug("Source "+sourceName+" is "+currentStatus.currentCheckState);if(sourceName==="aecnonaml"){if(currentStatus.currentCheckState==="IN_PROGRESS"){getFields(currentStatus,sourceName,config.get("modal_checking_details"));utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){uiBehaviours.showNoMatchError(sourceName)})}}if(sourceName==="postoffice"&&currentStatus.currentCheckState==="IN_PROGRESS"){var modalText=config.get("postoffice_modal_generating_form");utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){uiBehaviours.addAlertsModifyIntro(sourceName,currentStatus,modalText);showPostOfficeFinalPage(currentStatus)})}else{utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){uiBehaviours.showNoMatchError(sourceName)})}}}catch(e){handleException(e,"handleSetFieldsResult",sourceName)}}function showPostOfficeFinalPage(currentStatus){try{var event={};event[log.CURRENT_CHECK_STATE]=currentStatus.currentCheckState;event[log.OVERALL_STATE]=currentStatus.outcome;event[log.MESSAGE]="Entered showPostOfficeFinalPage";log.info(event);var extraContext={downloadIntroText:config.get("postoffice"+"_download_intro_text"),downloadText:config.get("postoffice"+"_download_text"),url:currentStatus.url,submitButtonText:config.get("postoffice"+"_submit_button_text_2")};var sourceTitle=config.get("postoffice"+"_title");var infoTitle=config.get("postoffice"+"_info_title");var infoText=config.get("postoffice"+"_info_text");var extraTitleContext={sourceTitle:sourceTitle,infoTitle:infoTitle,infoText:infoText};uiBehaviours.addModalBackdrop(true,1,true);utils.waitUntil(clientContext.isSourceSwitchAnimationCompleted,100,0,3e3,function(){ajax.addSourceHeader(staticconfig.divNames.sourceTitleDiv,currentStatus,extraTitleContext);ajax.getTemplateSimple("postoffice-final.hb","#"+staticconfig.divNames.sourceBodyDiv,extraContext,function(){uiBehaviours.hideModal("#"+staticconfig.divNames.modalBackdropDiv,true);setTimeout(function(){$("#postoffice-submit").click(function(){greenidUI.abandon(currentStatus)})},200)})})}catch(e){handleException(e,"showPostOfficeFinalPage","")}}function success(){var event={};event[log.OVERALL_STATE]=overallCurrentState;event[log.MESSAGE]="Entered success";log.info(event);try{sessionCompleteCallback(verificationToken,overallCurrentState)}catch(e){handleException(e,"success:sessionCompleteCallback","")}complete()}function complete(){try{var event={};event[log.MESSAGE]="Entered complete()";event["useSubmitCallback"]=useSubmitCallback;log.info(event);log.logPointOfInterest("greenID-Web-Complete",accountId,verificationToken,"");sessionComplete=true;if(useSubmitCallback){$("#"+formIds.frameId).empty();uiBehaviours.hideModalSimple("."+staticconfig.divNames.modalBackdropBootstrap);$("body").removeClass("greenid-modal-open");try{log.flushRemoteLogs();submitCallback(verificationToken,overallCurrentState)}catch(e){handleException(e,"complete:submitCallback","")}}else{uiBehaviours.hideModalSimple("."+staticconfig.divNames.modalBackdropBootstrap);$("body").removeClass("greenid-modal-open");if($("#"+formIds.formId).length>0){$("<input>").attr({type:"hidden",id:"verificationToken",name:"verificationToken",value:verificationToken}).appendTo("#"+formIds.formId);if(!$("#"+formIds.formId)){event={};event[log.MESSAGE]="Submit form does not exist, attempting to submit anyway!";event[log.FORM_ID]=formIds.formId;log.warn(event)}event={};event[log.MESSAGE]="About to submit form...";event["actionURL"]=$("#"+formIds.formId).attr("action");event["actionMethod"]=$("#"+formIds.formId).attr("method");event[log.FORM_ID]=formIds.formId;log.info(event);log.flushRemoteLogs();$("#"+formIds.formId).submit();event={};event[log.MESSAGE]="Completed call to submit";event[log.FORM_ID]=formIds.formId;log.local(event)}else{$("#"+formIds.frameId).empty()}}}catch(e){handleException(e,"complete","")}}function defaultSetup(overrides){formIds=$.extend({},defaultIds,overrides);var overridesStr="";if(overrides.submitOnRegister){overridesStr+="submitOnRegister ";submitOnRegister=overrides.submitOnRegister}if(overrides.registerCallback){overridesStr+="registerCallback ";registerCallback=overrides.registerCallback}if(overrides.errorCallback){overridesStr+="errorCallback ";errorCallback=overrides.errorCallback}if(overrides.ajaxErrorCallback){overridesStr+="ajaxErrorCallback ";ajaxErrorCallback=overrides.ajaxErrorCallback}if(overrides.sourceAttemptCallback){overridesStr+="sourceAttemptCallback ";sourceAttemptCallback=overrides.sourceAttemptCallback}if(overrides.sessionCompleteCallback){overridesStr+="sessionCompleteCallback ";sessionCompleteCallback=overrides.sessionCompleteCallback}if(overrides.sessionCancelledCallback!=null){overridesStr+="sessionCancelledCallback ";sessionCancelledCallback=overrides.sessionCancelledCallback}if(overrides.enableBackButtonWarning!=null){overridesStr+="enableBackButtonWarning ";enableBackButtonWarning=overrides.enableBackButtonWarning}if(overrides.submitCallback!=null){overridesStr+="submitCallback ";submitCallback=overrides.submitCallback;useSubmitCallback=true}if(overrides.preSubmitValidationCallback!=null){overridesStr+="preSubmitValidationCallback ";validationCallback=overrides.preSubmitValidationCallback}if(overrides.enableCancelButton!=null){overridesStr+="enableCancelButton ";enableCancelButton=overrides.enableCancelButton;clientContext.enableCancelButton=enableCancelButton}if(overrides.showSourceList!=null){overridesStr+="showSourceList ";showSourceList=overrides.showSourceList}if(overrides.sourcePreSubmitCallback){overridesStr+="sourcePreSubmitCallback ";sourcePreSubmitCallback=overrides.sourcePreSubmitCallback}if(overrides.docuploadCallback){overridesStr+="docuploadCallback ";docuploadCallback=overrides.docuploadCallback}if(overrides.combinationSourceCallback){overridesStr+="combinationSourceCallback ";combinationSourceCallback=overrides.combinationSourceCallback}if(overrides.useRegisterWithDocumentAndDetails){overridesStr+="useRegisterWithDocumentAndDetails ";useRegisterWithDocumentAndDetails=true}if(overrides.handoffOnceComboSourcesSatisifed){overridesStr+="handoffOnceComboSourcesSatisifed ";handoffOnceComboSourcesSatisifed=overrides.handoffOnceComboSourcesSatisifed}if(overrides.enableFraudScreen){overridesStr+="enableFraudScreen ";enableFraudScreen=overrides.enableFraudScreen}if(overrides.customModalContainer!=null){overridesStr+="customModalContainer ";if(overrides.customModalContainer.indexOf("#")>=0){clientContext.modalContainer=overrides.customModalContainer}else{clientContext.modalContainer="#"+overrides.customModalContainer}modalContainer=clientContext.modalContainer}else{clientContext.modalContainer="#"+formIds.frameId}if(overrides.renameMainDiv!=null){overridesStr+="renameMainDiv ";staticconfig.divNames.mainDiv=overrides.renameMainDiv}if(overrides.customModalClasses!=null){overridesStr+="customModalClasses ";customModalClasses=overrides.customModalClasses}var event={};event[log.MESSAGE]="Setting overrides";if(overridesStr){event["overrides"]=overridesStr}else{event["overrides"]="none"}log.info(event)}var getDynamicMobileConfig=function(accountId,apiCode,token){var config={};if(!token){token=""}var getConfigURL=staticconfig.get("host")+"/mobile/getConfig?accountId="+accountId+"&apiCode="+apiCode+"&token="+token;var ajaxTime=(new Date).getTime();event={};event[log.MESSAGE]="Getting dynamic (mobile) config";event["accountId"]=accountId;event["url"]=getConfigURL;log.info(event);$.ajax({type:"GET",url:getConfigURL,async:false,dataType:"html",processData:false,success:function(data){var jsonResponse=JSON.parse(data);if(jsonResponse){config=jsonResponse.config;event[log.MESSAGE]="config received";event["configLength"]=Object.keys(config).length;log.info(event)}else{event[log.MESSAGE]="Could not retrieve dynamic config";log.warn(event)}},error:function(error){event[log.MESSAGE]="Error when retrieving dynamic config";event["ErrorMessage"]=error;handleError(error)},failure:function(error){event[log.MESSAGE]="Failure when retrieving dynamic config";event["ErrorMessage"]=error;handleError(error)},complete:function(error){var totalTime=(new Date).getTime()-ajaxTime;event[log.MESSAGE]="Finish getting dynamic config.  Time taken: "+totalTime;log.info(event)}});return config};function getEarlyVerificationToken(accountId,apiCode,vToken){var returnResult={};returnResult.verifToken="";returnResult.isFault=true;var getEarlyVerificationTokenUrl=staticconfig.get("host")+"/mobile/getEarlyVerificationToken?accountId="+accountId+"&apiCode="+apiCode+"&token="+vToken;var ajaxTime=(new Date).getTime();event={};event[log.MESSAGE]="Getting early verification token";event["accountId"]=accountId;event["url"]=getEarlyVerificationTokenUrl;log.info(event);$.ajax({type:"GET",url:getEarlyVerificationTokenUrl,async:false,dataType:"html",processData:false,success:function(data){var response=JSON.parse(data);if(response){if(response.isFault===true){event[log.MESSAGE]="Verification token fault";event["ErrorMessage"]=response.faultData.faultString;log.warn(event);returnResult.errorMessage=response.faultData.faultString;returnResult.code=response.faultData.code}else{returnResult.verifToken=response.token;returnResult.isFault=false;event[log.MESSAGE]="Verification token received";event[log.VERIFICATION_TOKEN]=returnResult.verifToken;log.info(event)}}else{event[log.MESSAGE]="Could not extract verification token";log.warn(event)}},error:function(error){event[log.MESSAGE]="Error when retrieving verification token";event["ErrorMessage"]=error;log.warn(event)},failure:function(response){event[log.MESSAGE]="Failure when retrieving verification token";event["ErrorMessage"]=error;log.warn(event)},complete:function(error){var totalTime=(new Date).getTime()-ajaxTime;event[log.MESSAGE]="Finish getting early verification token.  Time taken: "+totalTime;log.info(event)}});return returnResult}module.handleFileUpload=function(file,currentStatusStr){try{if(typeof currentStatusStr=="string"){var currentStatus=$.parseJSON(currentStatusStr)}staticconfig.updateDocuploadProperties(currentStatus.properties);currentStatus=utils.tweakCurrentStatus(currentStatus,dlHelper,config);updateStatus(currentStatus);handleSetFieldsResult(currentStatus,"upload",accountId)}catch(e){handleException(e,"handleFileUpload","")}};module.isFilenameValid=function(filename){var BASIC_CSV_INJECTION="^[+-=<>|%].*[+=<>|%()].*";var AT_SYMBOL_SPECIFIC_VALIDATION="^.*@.*[+=<>|%()].*";var CSS_INJECTION="^.*//.*";var GENERAL_INJECTION="^.*[=<>|%].*";var e1={};e1[log.MESSAGE]="isFilenameValid";e1["filename"]=filename;var isValid=true;if(filename.match(BASIC_CSV_INJECTION)||filename.match(AT_SYMBOL_SPECIFIC_VALIDATION)||filename.match(CSS_INJECTION)||filename.match(GENERAL_INJECTION)){isValid=false}e1["isValid"]=isValid;log.info(e1);return isValid};module.invokeCombinationSourceCallback=function(verificationToken,overallVerificationStatus,sourceName,currentStatus,event){combinationSourceCallback(verificationToken,overallVerificationStatus,sourceName,currentStatus,event)};module.registerAndShow=function(theAccountId,theApiCode,registrationContext){try{accountId=theAccountId;apiCode=theApiCode;log.setAccount(accountId);log.setToken(verificationToken);var event={};event[log.MESSAGE]="Entered registerAndshow";log.info(event);if(utils.isEmpty(verificationToken)){var errorModalContext={errorHeading:config.get("missing_verification_token_error_title"),errorText:config.get("missing_verification_token_error_msg"),errorCancelButtonText:"ok",modalContainer:clientContext.modalContainer};uiBehaviours.showErrorModal(errorModalContext);return}var modalText=config.get("modal_initial_loading");var useBackdrop=false;if($(".modal-backdrop").length==0&&$("."+staticconfig.divNames.modalBackdropDiv).length==0){useBackdrop=true}uiBehaviours.showModal(clientContext.modalContainer,modalText,useBackdrop);interceptForm(registrationContext);submitted=true}catch(e){}};module.show=function(theAccountId,theApiCode,theVerificationToken){accountId=theAccountId;apiCode=theApiCode;verificationToken=theVerificationToken;log.setAccount(accountId);log.setToken(verificationToken);var event={};event[log.MESSAGE]="Entered show";log.info(event);if(utils.isEmpty(verificationToken)){var errorModalContext={errorHeading:config.get("missing_verification_token_error_title"),errorText:config.get("missing_verification_token_error_msg"),errorCancelButtonText:"ok",modalContainer:clientContext.modalContainer};uiBehaviours.showErrorModal(errorModalContext);return}var modalText=config.get("modal_initial_loading");var e2={};var customModalClass="";var customBackdropClass="";var centreModal=false;if(customModalClasses){customModalClass=customModalClasses.customModalClass;customBackdropClass=customModalClasses.customBackdropClass;centreModal=customModalClasses.centreModal;e2[log.MESSAGE]="customModalClasses were passed in at setup";e2["customModalClass"]=customModalClasses;e2["customBackdropClass"]=customBackdropClass;e2["centreModal"]=centreModal}else{e2[log.MESSAGE]="customModalClasses were NOT passed in at setup"}log.trace(e2);var useBackdrop=false;if($(".modal-backdrop").length==0&&$("."+staticconfig.divNames.modalBackdropDiv).length==0){useBackdrop=true}uiBehaviours.showModal(clientContext.modalContainer,modalText,useBackdrop,customModalClass,customBackdropClass,centreModal);var retStr=utils.buildJSONStr(accountId,apiCode,verificationToken,staticconfig.get("origin"));ajax.getSourcesRemote(retStr,accountId,updateStatus,handleStartSuccess,handleError);submitted=true};module.showBiometricCapture=function(theAccountId,theApiCode,theRule,theCurrentStatus){haveSetupBiometricCapture=true;accountId=theAccountId;apiCode=theApiCode;log.setAccount(accountId);var event={};event[log.MESSAGE]="Entered showBiometricCapture";event[log.ACCOUNT_ID]=accountId;log.info(event);log.logPointOfInterest("showBiometricCapture",theAccountId,"","");var modalText=config.get("modal_initial_loading");var e2={};var customModalClass="";var customBackdropClass="";var centreModal=false;if(customModalClasses){customModalClass=customModalClasses.customModalClass;customBackdropClass=customModalClasses.customBackdropClass;centreModal=customModalClasses.centreModal;e2[log.MESSAGE]="customModalClasses were passed in at setup";e2["customModalClass"]=customModalClasses;e2["customBackdropClass"]=customBackdropClass;e2["centreModal"]=centreModal}else{e2[log.MESSAGE]="customModalClasses were NOT passed in at setup"}log.trace(e2);biometricMode=true;initialiseBiometricDiv();var useBackdrop=false;if($(".modal-backdrop").length==0&&$("."+staticconfig.divNames.modalBackdropDiv).length==0){useBackdrop=true}uiBehaviours.showModal(clientContext.modalContainer,modalText,useBackdrop,customModalClass,customBackdropClass,centreModal);var errEvent={};if(!utils.isSupportedBrowser(navigator.userAgent)){errEvent[log.MESSAGE]="showBiometricCapture - Unsupported Browser, not continuing the workflow ";errEvent[log.ACCOUNT_ID]=accountId;errEvent["userAgent"]=navigator.userAgent;errEvent["ErrorType"]="Unsupported Browser";log.warn(errEvent);module.error({isFault:true,faultData:{faultCode:"env:Client",code:"SystemFault",faultHeading:config.get("modal_unsupported_browser_error_title"),faultName:"UnsupportedBrowser",details:"UnsupportedBrowser",faultString:config.get("error_messages")["UnsupportedBrowser"],faultLogLevel:"WARN"}},false);return}var haveAlreadyRegistered=false;var earlyVerificationTokenResult;var earlyVerificationToken;if(!utils.isEmpty(verificationToken)){haveAlreadyRegistered=true;earlyVerificationTokenResult=getEarlyVerificationToken(accountId,apiCode,verificationToken)}else{earlyVerificationTokenResult=getEarlyVerificationToken(accountId,apiCode,"")}if(earlyVerificationTokenResult.isFault===true){errEvent={};errEvent[log.MESSAGE]="showBiometricCapture - earlyVerificationToken not retrieved";errEvent[log.ACCOUNT_ID]=accountId;errEvent["ErrorMessage"]=earlyVerificationTokenResult.errorMessage;log.warn(errEvent)}else{earlyVerificationToken=earlyVerificationTokenResult.verifToken}if(utils.isEmpty(earlyVerificationToken)){errEvent={};errEvent[log.MESSAGE]="showBiometricCapture - empty verificationToken - presenting error dialog";errEvent[log.ACCOUNT_ID]=accountId;log.warn(errEvent);var modalDetails={faultCode:"env:Client",code:"SystemFault",faultHeading:config.get("missing_verification_token_error_title"),faultName:"InvalidTokenFault",details:"InvalidTokenFault",faultString:config.get("missing_verification_token_error_msg"),faultLogLevel:"WARN"};if(earlyVerificationTokenResult.code){modalDetails.faultName=earlyVerificationTokenResult.code;modalDetails.details=earlyVerificationTokenResult.code;if(config.get("error_messages")[earlyVerificationTokenResult.code]){modalDetails.faultString=config.get("error_messages")[earlyVerificationTokenResult.code]}}module.error({isFault:true,faultData:modalDetails},false);return}log.verificationToken=earlyVerificationToken;var mobileConfig=getDynamicMobileConfig(accountId,apiCode,earlyVerificationToken);mobileConfig["isWebScan"]=true;mobileConfig["gidAccountId"]=accountId;mobileConfig["gidApiCode"]=apiCode;mobileConfig["gidVerificationToken"]=earlyVerificationToken;mobileConfig["gidCountry"]=mobileConfig["default.country"];mobileConfig["gidAlreadyRegistered"]=haveAlreadyRegistered;if(utils.isEmpty(theRule)){mobileConfig["gidRuleId"]="default"}else{mobileConfig["gidRuleId"]=theRule;if(theRule!=="default"&&mobileConfig[theRule+".default.country"]){mobileConfig["gidCountry"]=mobileConfig[theRule+".default.country"]}}if(utils.isEmpty(mobileConfig["so.doc.select.option.1"])){var errEvent={};errEvent[log.MESSAGE]="showBiometricCapture - No documents defined in config - presenting error dialog";errEvent[log.ACCOUNT_ID]=accountId;errEvent[log.VERIFICATION_TOKEN]=earlyVerificationToken;log.error(errEvent);module.error({isFault:true,faultData:{faultCode:"env:Client",code:"SystemFault",faultHeading:config.get("modal_no_sources_left_heading"),faultName:"NoSourcesAvailable",details:"NoSourcesAvailable",faultString:config.get("modal_no_sources_left_text"),faultLogLevel:"WARN"}},false);return}checkLoadVueThenBiometrics(mobileConfig);startBiometrics(mobileConfig,theCurrentStatus);submitted=true};module.abandon=function(){success()};module.sessionCancelledCallback=function(verificationToken,overallCurrentState){try{ajax.doActionNotification("cancel",verificationToken,apiCode,accountId);sessionCancelledCallback(verificationToken,overallCurrentState);log.verificationToken=verificationToken;log.info({description:"sessionCancelledCallback",verificationToken:verificationToken,overallCurrentState:overallCurrentState})}catch(e){handleException(e,"sessionCancelledCallback","")}complete()};module.saveAndCompleteLater=function(){try{sessionCancelledCallback(verificationToken,overallCurrentState)}catch(e){handleException(e,"saveAndCompleteLater:sessionCancelledCallback","")}complete()};module.getVersion=function(){var version="22.0201.0_d71edcbb_87";if(version.indexOf("GIT")>-1&&version.indexOf("VERSION")>-1){return"Unknown"}else{if(version.indexOf("v")==0){version=version.substring(1)}return version}};function setupFraudScreen(){var event={};event[log.MESSAGE]="Entered setupFraudScreen";log.info(event);window.io_enable_rip=true;window.io_install_flash=false;window.io_install_stm=false;window.io_exclude_stm=12;try{$.getScript("https://ci-mpsnare.iovation.com/snare.js").done(function(data,textStatus,jqxhr){var gotScriptEvent={};gotScriptEvent[log.MESSAGE]="Loaded snare.js";gotScriptEvent.textStatus=textStatus;gotScriptEvent.jqxhrStatus=jqxhr.status;log.info(gotScriptEvent)}).fail(function(jqxhr,settings,exception){var failedScriptEvent={};failedScriptEvent[log.MESSAGE]="Failed to load snare.js";failedScriptEvent["mail"]="true";failedScriptEvent.textStatus=textStatus;failedScriptEvent.jqxhrStatus=jqxhr.status;failedScriptEvent.exception=exception;log.error(failedScriptEvent)})}catch(e){handleException(e,"setupFraudScreen","")}}module.setup=function(overrides){window.onerror=function(){if(oldOnError)oldOnError.apply(this,arguments);var event={};event[log.MESSAGE]="Error occurred";for(var i=0;i<arguments.length;i++){if(arguments[i]){event["arg"+i]=""+arguments[i]}}log.error(event)};staticconfig.setEnvironment(overrides.environment,overrides);defaultSetup(overrides);if(enableFraudScreen){setupFraudScreen()}log.setVersion(module.getVersion());buildBrowserInfoObject();if(module.getVersion()!=="Unknown"){log.l("","GreenID simpleui "+module.getVersion())}log.local("About to add submit handler to "+formIds.formId);$("#"+formIds.formId).submit(function(e){log.l("","Entered submit, submitted = "+submitted);if(!submitted){e.preventDefault();log.debug("About to call validation callback");if(!validationCallback()){var event={};event[log.MESSAGE]="Validation callback returned false";log.trace(event);submitted=false}else{var e2={};e2[log.MESSAGE]="Validation callback returned true";log.trace(e2);var modalText=config.get("modal_initial_loading");var e3={};var customModalClass="";var customBackdropClass="";var centreModal=false;if(customModalClasses){customModalClass=customModalClasses.customModalClass;customBackdropClass=customModalClasses.customBackdropClass;centreModal=customModalClasses.centreModal;e3[log.MESSAGE]="customModalClasses were passed in at setup";e3["customModalClass"]=customModalClasses;e3["customBackdropClass"]=customBackdropClass;e3["centreModal"]=centreModal}else{e3[log.MESSAGE]="customModalClasses were NOT passed in at setup"}log.trace(e3);var useBackdrop=false;if($(".modal-backdrop").length==0&&$("."+staticconfig.divNames.modalBackdropDiv).length==0){useBackdrop=true}uiBehaviours.showModal(clientContext.modalContainer,modalText,useBackdrop,customModalClass,customBackdropClass,centreModal);interceptForm();submitted=true;if(greenidStaticConfig.get("mobile")){module.saveAndCompleteLater()}}return false}staticconfig.log("Returning true from submit: "+e.isDefaultPrevented());return true})};return module}(greenidJQuery,greenidHandlebars,greenidConfig,greenidStaticConfig,greenidUtils,greenidDLHelper,greenidUiBehaviours,greenidAjax,greenidValidator,greenidClientContext,greenidLog)}
